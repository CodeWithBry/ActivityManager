import{j as e,r as s,c as se,L as $e,d as me,f as fe,g as be,s as Re,a as ye,b as V,F as He,u as Le,e as Ue,h as Xe}from"./index-9-pamK4Y.js";import{s as Ye}from"./subjects-Qvdm7Wki.js";const Ve="_subjectsWrapper_ceua6_1",Ze="_top_ceua6_23",Ge="_dropDownButton_ceua6_61",Je="_showChoices_ceua6_111",Ke="_hideChoices_ceua6_119",es="_choicesBox_ceua6_127",ce={subjectsWrapper:Ve,top:Ze,dropDownButton:Ge,showChoices:Je,hideChoices:Ke,choicesBox:es},ss="_subjectBox_1xvju_1",ts="_topWrapper_1xvju_95",ns="_subjectName_1xvju_217",as="_progressWrapper_1xvju_261",cs="_progresses_1xvju_279",is="_top_1xvju_95",os="_bottom_1xvju_305",rs="_barWrapper_1xvju_329",ls="_bar_1xvju_329",us="_openSubject_1xvju_357",B={subjectBox:ss,topWrapper:ts,subjectName:ns,progressWrapper:as,progresses:cs,top:is,bottom:os,barWrapper:rs,bar:ls,openSubject:us},ds="_subjectSkeletonBox_bnzn5_1",hs={subjectSkeletonBox:ds};function ms(){return e.jsx("div",{className:`${hs.subjectSkeletonBox}`})}function fs({subData:t}){const{userData:l}=s.useContext(se),{selectedQuarter:a}=s.useContext(Se),[i,d]=s.useState(0),[c,S]=s.useState(0),[f,j]=s.useState(0),[v,_]=s.useState(0),[m,u]=s.useState(0),[E,x]=s.useState(0),[g,w]=s.useState(0),[$,D]=s.useState(0),[k,z]=s.useState(0),[y,p]=s.useState(),[A,N]=s.useState(),[F,R]=s.useState();return s.useEffect(()=>{const L=i>0?c/i*100:0,H=v>0?m/v*100:0,M=g>0?$/g*100:0;j(L),x(H),z(M)},[i,c,v,m,g,$]),s.useEffect(()=>{if(a){const L=y?.filter(b=>b.subject==t.subjectNameAbbreviation&&a==b.quarter)?.length,H=A?.filter(b=>b.subject==t.subjectNameAbbreviation&&a==b.quarter)?.length,M=F?.filter(b=>b.subject==t.subjectNameAbbreviation&&a==b.quarter)?.length,Q=y?.filter(b=>b.status=="completed"&&b.subject==t.subjectNameAbbreviation&&a==b.quarter)?.length,re=A?.filter(b=>b.status=="completed"&&b.subject==t.subjectNameAbbreviation&&a==b.quarter)?.length,te=F?.filter(b=>b.status=="completed"&&b.subject==t.subjectNameAbbreviation&&a==b.quarter)?.length;d(L||0),S(Q||0),_(H||0),u(re||0),w(M||0),D(te||0)}},[a,y,A,F]),s.useEffect(()=>{l&&(p(l.activities),N(l.assignments),R(l.petas))},[l]),y?e.jsxs("div",{className:`${B.subjectBox}`,children:[e.jsx("div",{className:B.topWrapper,children:e.jsx("h1",{className:B.subjectName,children:t.subjectNameAbbreviation})}),e.jsxs("div",{className:B.progressWrapper,children:[e.jsxs("div",{className:`${B.actWrapper} ${B.progresses}`,children:[e.jsxs("div",{className:B.top,children:[e.jsx("p",{children:"Activities:"}),e.jsx("p",{className:B.completed,children:i>=c&&i!=0?c+" out of "+i+" is Completed":"No Activity"})]}),e.jsx("div",{className:B.bottom,children:e.jsx("div",{className:B.barWrapper,children:e.jsx("div",{className:B.bar,style:{width:`${f}%`}})})})]}),e.jsxs("div",{className:`${B.assignWrapper} ${B.progresses}`,children:[e.jsxs("div",{className:B.top,children:[e.jsx("p",{children:"Assignments:"}),e.jsx("p",{className:B.completed,children:v>=m&&v!=0?m+" out of "+v+" is Completed":"No Assignment"})]}),e.jsx("div",{className:B.bottom,children:e.jsx("div",{className:B.barWrapper,children:e.jsx("div",{className:B.bar,style:{width:`${E}%`}})})})]}),e.jsxs("div",{className:`${B.projWrapper} ${B.progresses}`,children:[e.jsxs("div",{className:B.top,children:[e.jsx("p",{children:"Performance Tasks:"}),e.jsx("p",{className:B.completed,children:g>=$&&g!=0?$+" out of "+g+" is Completed":"No Projects"})]}),e.jsx("div",{className:B.bottom,children:e.jsx("div",{className:B.barWrapper,children:e.jsx("div",{className:B.bar,style:{width:`${k}%`}})})})]})]}),e.jsx($e,{to:"/subjects/"+t.subjectNameAbbreviation,className:B.openSubject,children:"Open Subject"})]}):e.jsx(ms,{})}const js="_subConWrapper_faeli_1",xs="_topComponent_faeli_21",ps="_backButt_faeli_1",bs="_right_faeli_75",Ss="_wrapMenusButton_faeli_87",_s="_wrap_faeli_87",vs="_hideWrap_faeli_97",gs="_selectedChoice_faeli_107",As="_showChoices_faeli_147",Ns="_hideChoices_faeli_155",Cs="_choicesBox_faeli_163",ws="_contentWrapper_faeli_221",Bs="_subjectActs_faeli_257",ks="_buttonWrapper_faeli_297",ys="_content_faeli_221",$s="_selectAllButton_faeli_383",Ds="_hideSelectAllButton_faeli_399",Ps="_transparent_faeli_429",h={subConWrapper:js,topComponent:xs,backButt:ps,right:bs,wrapMenusButton:Ss,wrap:_s,hideWrap:vs,selectedChoice:gs,showChoices:As,hideChoices:Ns,choicesBox:Cs,contentWrapper:ws,subjectActs:Bs,buttonWrapper:ks,content:ys,selectAllButton:$s,hideSelectAllButton:Ds,transparent:Ps},Ws="_showActDesc_ozrv6_1",Es="_hideActDesc_ozrv6_29",Ms="_showActDescBox_ozrv6_37",qs="_right_ozrv6_73",Ts="_stateWrapper_ozrv6_81",zs="_showButton_ozrv6_95",Os="_choices_ozrv6_103",Is="_hideChoices_ozrv6_105",Qs="_showInfo_ozrv6_115",Fs="_highlight_ozrv6_141",Rs="_unhighlight_ozrv6_161",Hs="_hideButton_ozrv6_173",T={showActDesc:Ws,hideActDesc:Es,showActDescBox:Ms,right:qs,stateWrapper:Ts,showButton:zs,choices:Os,hideChoices:Is,showInfo:Qs,highlight:Fs,unhighlight:Rs,hideButton:Hs},Ls="_infoBox_xvtjn_1",Us="_showInfoBox_xvtjn_21",Xs="_hideInfoBox_xvtjn_31",Ys="_animHideInfo_xvtjn_41",O={infoBox:Ls,showInfoBox:Us,hideInfoBox:Xs,animHideInfo:Ys};function Vs({showInfo:t,setShowInfo:l}){const{actDesc:a}=s.useContext(I);function i(d){const c=d.currentTarget.classList;c.contains(O.hideInfoBox)?(c.replace(`${O.hideInfoBox}`,`${O.animHideInfo}`),setTimeout(()=>{c.replace(`${O.animHideInfo}`,`${O.hideInfoBox}`)},1e3)):(c.add(`${O.animHideInfo}`),setTimeout(()=>{c.replace(`${O.animHideInfo}`,`${O.hideInfoBox}`)},1e3)),l(!1)}return e.jsx(e.Fragment,{children:e.jsx("div",{className:t?`${O.infoBox} ${O.showInfoBox}`:`${O.infoBox} ${O.hideInfoBox}`,onMouseLeave:i,children:e.jsxs("ul",{children:[e.jsxs("li",{children:["Created At: ",a?.createdAt]}),e.jsxs("li",{children:["Deadline: ",a?.dueDate]}),e.jsxs("li",{children:["Semester: ",a?.semester," Sem"]}),e.jsxs("li",{children:["Quarter: ",a?.quarter," Quarter"]}),e.jsxs("li",{children:["Type: ",a?.typeOfWork]})]})})})}function Zs(){const{actDesc:t,showActDesc:l,setShowActDesc:a,setActDesc:i,defineTypeOfWork:d}=s.useContext(I),[c,S]=s.useState(!1),[f,j]=s.useState(!1);return e.jsx(e.Fragment,{children:e.jsx("div",{className:l?T.showActDesc:T.hideActDesc,children:e.jsxs("div",{className:l?T.showActDescBox:T.hideActDescBox,children:[e.jsxs("h2",{children:["Description",e.jsxs("div",{className:T.right,children:[e.jsxs("div",{className:T.stateWrapper,children:[e.jsx("button",{className:T.showButton,onClick:()=>{S(!c)},children:e.jsx("i",{className:"fa fa-navicon"})}),e.jsxs("div",{className:c?T.choices:T.hideChoices,children:[e.jsx("button",{className:t?.status=="completed"?T.highlight:T.unhighlight,onClick:()=>{t&&d(!1,"completed",t)},children:"Finish"}),e.jsx("button",{className:t?.status=="pending"?T.highlight:T.unhighlight,onClick:()=>{t&&d(!1,"pending",t)},children:"Pending"}),e.jsxs("button",{className:T.showInfo,onClick:()=>{j(!f)},children:[e.jsx("i",{className:"fa fa-list-alt"}),e.jsx(Vs,{showInfo:f,setShowInfo:j})]})]})]}),e.jsx("button",{onClick:()=>{a(!1),i(null)},className:T.hideButton,children:"X"})]})]}),e.jsx("h3",{children:t?.title}),e.jsx("p",{children:t?.description})]})})})}const Gs="_addSubjectWrapper_55ez4_1",Js="_addSubjectBox_55ez4_29",Ks="_closeButton_55ez4_53",et="_top_55ez4_123",st="_submit_55ez4_189",K={addSubjectWrapper:Gs,addSubjectBox:Js,closeButton:Ks,top:et,submit:st},tt="_subjectBox_1p62z_1",nt="_choices_1p62z_51",at="_show_1p62z_87",ct="_subject_1p62z_1",it="_status_1p62z_99",P={subjectBox:tt,choices:nt,show:at,subject:ct,status:it};function ot({subject:t,setSubject:l}){const[a]=s.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[i,d]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:P.subName,children:"Subject"}),e.jsxs("button",{className:P.subjectBox,onClick:()=>{d(!i)},children:[t,e.jsx("i",{className:i?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:i?`${P.choices} ${P.show}`:P.choices,children:a.map(c=>e.jsx("li",{className:P.subject,onClick:()=>{l(c)},children:c},Math.random()*1))})]})]})}function rt(){const{quarterAndSemChoices:t,quarter:l,setQuarter:a,semester:i,setSemester:d}=s.useContext(I),[c,S]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:P.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:P.subjectBox,onClick:()=>{S(!c)},children:[i+" Sem: "+l+" Quarter",e.jsx("i",{className:c?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:c?`${P.choices} ${P.show}`:P.choices,children:t.map(f=>e.jsx("li",{className:P.subject,onClick:()=>{a(f.quarter),d(f.sem)},children:f.sem+" Sem: "+f.quarter+" Quarter"},Math.random()*1))})]})]})}function lt({status:t,setStatus:l}){const[a]=s.useState(["pending","completed"]),[i,d]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:P.subName,children:"Subject"}),e.jsxs("button",{className:P.subjectBox,onClick:()=>{d(!i)},children:[t,e.jsx("i",{className:i?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:i?`${P.choices} ${P.show}`:P.choices,children:a.map(c=>e.jsx("li",{className:P.status,onClick:()=>{l(c=="pending"?"pending":"completed")},children:c},Math.random()*1))})]})]})}function ut(){const{typeOfWork:t,showAddPrompt:l,setShowAddPrompt:a,setTypeOfWork:i,params:d,quarter:c,semester:S}=s.useContext(I),{userData:f}=s.useContext(se),[j,v]=s.useState(""),[_,m]=s.useState(""),[u,E]=s.useState(null),[x,g]=s.useState(d?.toUpperCase()),[w,$]=s.useState("pending");async function D(){const k=new Date,z={id:Math.random()*1,title:j,description:_,typeOfWork:t,status:w,createdBy:"Pajarillaga, Bryan",createdAt:`${k?.getFullYear()}-${k?.getMonth()}-${k?.getDate()}`,dueDate:u,subject:x,semester:S,quarter:c,isSelected:!1,timeCreated:Date.now()};try{const y=me(fe,"Main_Database","School_Activities");(await be(y)).exists()?await V(y,{[t]:ye(z)}):await Re(y,{[t]:ye(z)}),v(""),m(""),E(null),i(""),a(!1)}catch(y){y instanceof He&&console.log(y)}}if(s.useEffect(()=>{g(d)},[d]),l&&f?.user.status=="Owner")return e.jsx("div",{className:K.addSubjectWrapper,children:e.jsxs("div",{className:K.addSubjectBox,children:[e.jsx("button",{className:K.closeButton,onClick:()=>{i(""),a(!1)},children:"X"}),e.jsxs("h1",{children:["Create ",t]}),e.jsxs("div",{className:K.top,children:[e.jsx(ot,{subject:x,setSubject:g}),e.jsx(rt,{}),e.jsx(lt,{status:w,setStatus:$}),e.jsx("h2",{className:K.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:k=>{console.log(k.currentTarget.value),E(k.currentTarget.value)}}),e.jsxs("h2",{className:K.actTitle,children:[t," Title"]}),e.jsx("input",{type:"text",value:j,onChange:k=>{v(k.currentTarget.value)}}),e.jsxs("h2",{className:K.actDesc,children:[t," Description"]}),e.jsx("textarea",{rows:5,value:_,onChange:k=>{m(k.currentTarget.value)}})]}),e.jsx("button",{className:K.submit,onClick:D,children:"Submit"})]})})}const dt="_noActivities_u5p8f_1",ht="_showMenu_u5p8f_13",mt="_hideMenu_u5p8f_71",ft="_addActivity_u5p8f_79",jt="_hamWrapper_u5p8f_145",xt="_dropDownMenus_u5p8f_185",pt="_hideDropDown_u5p8f_237",ie={noActivities:dt,showMenu:ht,hideMenu:mt,addActivity:ft,hamWrapper:jt,dropDownMenus:xt,hideDropDown:pt};function bt({task:t}){const{setShowActDesc:l,setCanSelect:a,defineTypeOfWork:i,actDesc:d,menu:c,showMenu:S,menuPos:f,canSelect:j,handleRightClick:v,setActivities:_,setAssignments:m,setProjects:u,handleSelectAll:E,setShowEdit:x,setExams:g}=s.useContext(I),{userData:w}=s.useContext(se);function $(p){if(j)switch(t?.typeOfWork){case"Activity":_(A=>A?A.map(N=>N.id==t?.id?{...N,isSelected:p}:N):[]);break;case"Assignment":m(A=>A?A.map(N=>N.id==t?.id?{...N,isSelected:p}:N):[]);break;case"Project":u(A=>A?A.map(N=>N.id==t?.id?{...N,isSelected:p}:N):[]);break;case"Exam":g(A=>A?A.map(N=>N.id==t?.id?{...N,isSelected:p}:N):[]);break}}function D(p){switch(p){case 1:l(!0);break;case 2:a(!j),j&&($(!1),E("All",!1));break;case 3:d&&i(!0,"pending",d);break;case 4:d&&i(!0,"completed",d);break;case 5:t?.isSelected?$(!1):$(!0);break;case 6:x(!0);break;case 7:d&&k(d);break}}async function k(p){const A=me(fe,"Main_Database","School_Activities"),N=(await be(A)).data(),F=N?.Activity.filter(M=>p.id!=M.id),R=N?.Assignment.filter(M=>p.id!=M.id),L=N?.Project.filter(M=>p.id!=M.id),H=N?.Exam.filter(M=>p.id!=M.id);switch(p.typeOfWork){case"Activity":await V(A,{Activity:F});break;case"Assignment":await V(A,{Assignment:R});break;case"Project":await V(A,{Project:L});break;case"Exam":await V(A,{Exam:H});break}}function z(){if(j)return e.jsxs("button",{onClick:()=>D(5),children:[e.jsx("i",{className:"fa fa-hand-o-up"}),d?.isSelected?"Unselect":"Select"]})}function y(){if(w?.user.status=="Owner")return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>D(6),children:[e.jsx("i",{className:"	fa fa-edit"}),"Edit"]}),e.jsxs("button",{onClick:()=>D(7),children:[e.jsx("i",{className:"	fa fa-trash"}),"Delete"]})]})}return e.jsxs("div",{ref:c,onClick:p=>v(p,null,!1),className:S?ie.showMenu:ie.hideMenu,style:{left:f.x,top:f.y},children:[e.jsxs("button",{onClick:()=>D(1),children:[e.jsx("i",{className:"fa fa-envelope-open"}),"Open"]}),e.jsx(y,{}),e.jsxs("button",{onClick:()=>D(2),children:[e.jsx("i",{className:j?"fa fa-close":"fa fa-hand-o-up"}),j?"Cancel":"Select"]}),e.jsx(z,{}),e.jsxs("button",{onClick:()=>D(3),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Pending"]}),e.jsxs("button",{onClick:()=>D(4),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Finish"]})]})}function St(){const{setSortingType:t,sortingType:l}=s.useContext(I),[a,i]=s.useState(!1),[d,c]=s.useState([{classname:"fa fa-ellipsis-h",functionName:"Pending"},{classname:"fa fa-check",functionName:"Completed"},{classname:"fa fa-sort-numeric-asc",functionName:"Newest-Oldest"},{classname:"fa fa-sort-numeric-desc",functionName:"Oldest-Newest"},{classname:"fa fa-sort-alpha-asc",functionName:"A-Z"},{classname:"fa fa-sort-alpha-desc",functionName:"Z-A"}]),[S,f]=s.useState({classname:"fa fa-sort-numeric-asc",functionName:l});return s.useEffect(()=>{S&&t(S?.functionName)},[S]),e.jsxs("button",{className:ie.hamWrapper,onClick:()=>{i(!a)},children:[e.jsxs("p",{children:["Sort",e.jsx("i",{className:S?.classname}),e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("ul",{className:a?ie.dropDownMenus:ie.hideDropDown,children:d.map(j=>e.jsxs("li",{onClick:()=>{c(v=>v.map(_=>(j.functionName==_.functionName&&f(_),_)))},children:[e.jsx("i",{className:j.classname}),e.jsx("p",{children:j.functionName})]},j.functionName))})]})}function ue({type:t}){const{userData:l}=s.useContext(se),{setTypeOfWork:a,setShowAddPrompt:i}=s.useContext(I);if(l?.user?.status=="Owner")return e.jsx("div",{className:ie.addActivity,onClick:()=>{a(t),i(!0)},children:e.jsx("h1",{children:"+"})})}const _t="_activity_1u0xz_1",vt="_pendingActivity_1u0xz_3",gt="_selected_1u0xz_67",At="_notSelected_1u0xz_69",de={activity:_t,pendingActivity:vt,selected:gt,notSelected:At};function Nt({task:t,handleRightClick:l,setActDesc:a}){const{canSelect:i,setActivities:d,setAssignments:c,setProjects:S,setExams:f}=s.useContext(I),j=()=>{if(i)return e.jsx("input",{type:"checkbox",checked:t?.isSelected,onChange:()=>{v(null)},className:t?.isSelected?de.selected:de.notSelected})};function v(_){i&&(d(m=>m?m.map(u=>u.id==_?.id?{...u,isSelected:!u.isSelected}:u):[]),c(m=>m?m.map(u=>u.id==_?.id?{...u,isSelected:!u.isSelected}:u):[]),S(m=>m?m.map(u=>u.id==_?.id?{...u,isSelected:!u.isSelected}:u):[]),f(m=>m?m.map(u=>u.id==_?.id?{...u,isSelected:!u.isSelected}:u):[]))}return e.jsxs("div",{id:`${t?.id}`,className:t?.status=="completed"?de.activity:de.pendingActivity,onContextMenu:_=>l(_,t,!1),onDoubleClick:_=>l(_,t,!0),onClick:()=>{a(t),v(t)},children:[e.jsx("h2",{children:t?.title}),e.jsx("p",{children:t?.description}),e.jsx(j,{})]})}const Ct="_activitySkeleton_o3c77_1",wt={activitySkeleton:Ct};function Bt({count:t}){return e.jsx(e.Fragment,{children:Array.from({length:t}).map((l,a)=>e.jsx("div",{className:wt.activitySkeleton},a))})}function he({typeOfWork:t,sortingType:l}){const{activities:a,assignments:i,projects:d,selectedChoice:c,handleRightClick:S,setActDesc:f,exams:j}=s.useContext(I),{userData:v}=s.useContext(se),_=t==="Activity"?a||[]:t==="Assignment"?i||[]:t==="Project"?d||[]:j||[],m=s.useMemo(()=>{let u=[..._];return console.log(u),l==="Newest-Oldest"?u.sort((x,g)=>g.timeCreated-x.timeCreated):l==="Oldest-Newest"?u.sort((x,g)=>x.timeCreated-g.timeCreated):l==="A-Z"?u.sort((x,g)=>(x.title||"").localeCompare(g.title||"")):l==="Z-A"?u.sort((x,g)=>(g.title||"").localeCompare(x.title||"")):l==="Pending"?u=u.filter(x=>x.status==="pending"):l==="Completed"&&(u=u.filter(x=>x.status==="completed")),u.filter(x=>x.quarter===c.quarter&&x.semester===c.sem)},[_,l,c]);if(v){if(v&&m.length!=0)return e.jsx(e.Fragment,{children:m.map(u=>e.jsx(Nt,{task:u,handleRightClick:S,setActDesc:f},u.id||u.timeCreated))});if(v&&m.length==0)return e.jsxs("h2",{className:ie.noActivities,children:[t==="Activity"&&"There are no Activities!",t==="Assignment"&&"There are no Assignments!",t==="Project"&&"There are no Projects!",t==="Exam"&&"There are no Exam!"]})}else return e.jsx(Bt,{count:6})}const kt="_addSubjectWrapper_55ez4_1",yt="_addSubjectBox_55ez4_29",$t="_closeButton_55ez4_53",Dt="_top_55ez4_123",Pt="_submit_55ez4_189",ee={addSubjectWrapper:kt,addSubjectBox:yt,closeButton:$t,top:Dt,submit:Pt},Wt="_subjectBox_1p62z_1",Et="_choices_1p62z_51",Mt="_show_1p62z_87",qt="_subject_1p62z_1",Tt="_status_1p62z_99",W={subjectBox:Wt,choices:Et,show:Mt,subject:qt,status:Tt};function zt({subject:t,setSubject:l}){const[a]=s.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[i,d]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:W.subName,children:"Subject"}),e.jsxs("button",{className:W.subjectBox,onClick:()=>{d(!i)},children:[t,e.jsx("i",{className:i?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:i?`${W.choices} ${W.show}`:W.choices,children:a.map(c=>e.jsx("li",{className:W.subject,onClick:()=>{l(c)},children:c},Math.random()*1))})]})]})}function Ot(){const{quarterAndSemChoices:t,quarter:l,setQuarter:a,semester:i,setSemester:d}=s.useContext(I),[c,S]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:W.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:W.subjectBox,onClick:()=>{S(!c)},children:[i+" Sem: "+l+" Quarter",e.jsx("i",{className:c?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:c?`${W.choices} ${W.show}`:W.choices,children:t.map(f=>e.jsx("li",{className:W.subject,onClick:()=>{a(f.quarter),d(f.sem)},children:f.sem+" Sem: "+f.quarter+" Quarter"},Math.random()*1))})]})]})}function It({status:t,setStatus:l}){const[a]=s.useState(["pending","completed"]),[i,d]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:W.subName,children:"Subject"}),e.jsxs("button",{className:W.subjectBox,onClick:()=>{d(!i)},children:[t,e.jsx("i",{className:i?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:i?`${W.choices} ${W.show}`:W.choices,children:a.map(c=>e.jsx("li",{className:W.status,onClick:()=>{l(c=="pending"?"pending":"completed")},children:c},Math.random()*1))})]})]})}function Qt(){const{typeOfWork:t,setTypeOfWork:l,params:a,quarter:i,semester:d,actDesc:c,showEdit:S,setShowEdit:f}=s.useContext(I),{userData:j}=s.useContext(se),[v,_]=s.useState(""),[m,u]=s.useState(""),[E,x]=s.useState(""),[g,w]=s.useState(a?.toUpperCase()),[$,D]=s.useState("pending"),[k,z]=s.useState("");async function y(){const p=new Date,A={id:k,title:v,description:m,typeOfWork:t,status:$,createdBy:"Pajarillaga, Bryan",createdAt:`${p?.getFullYear()}-${p?.getMonth()}-${p?.getDate()}`,dueDate:E,subject:g,semester:d,quarter:i,isSelected:!1,timeCreated:Date.now()},N=me(fe,"Main_Database","School_Activities"),R=(await be(N)).data();if(R)switch(t){case"Activity":const H=R.Activity.map(b=>b.id==k?{...A,id:Math.random()*1}:{...b});await V(N,{[t]:H});break;case"Assignment":const Q=R.Assignment.map(b=>b.id==k?{...A,id:Math.random()*1}:{...b});await V(N,{[t]:Q});break;case"Project":const te=R.Project.map(b=>b.id==k?{...A,id:Math.random()*1}:{...b});await V(N,{[t]:te});break}f(!1)}if(s.useEffect(()=>{w(a)},[a]),s.useEffect(()=>{c&&(_(c.title),u(c.description),x(c.dueDate),D(c.status),z(c.id))},[c]),S&&j?.user.status=="Owner")return e.jsx("div",{className:ee.addSubjectWrapper,children:e.jsxs("div",{className:ee.addSubjectBox,children:[e.jsx("button",{className:ee.closeButton,onClick:()=>{l(""),f(!1)},children:"X"}),e.jsxs("h1",{children:["Edit ",t]}),e.jsxs("div",{className:ee.top,children:[e.jsx(zt,{subject:g,setSubject:w}),e.jsx(Ot,{}),e.jsx(It,{status:$,setStatus:D}),e.jsx("h2",{className:ee.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:p=>{console.log(p.currentTarget.value),x(p.currentTarget.value)}}),e.jsxs("h2",{className:ee.actTitle,children:[t," Title"]}),e.jsx("input",{type:"text",value:v,onChange:p=>{_(p.currentTarget.value)}}),e.jsxs("h2",{className:ee.actDescription,children:[t," Description"]}),e.jsx("textarea",{rows:5,value:m,onChange:p=>{u(p.currentTarget.value)}})]}),e.jsx("button",{className:ee.submit,onClick:y,children:"Submit"})]})})}const I=s.createContext({});function Ft({params:t,subjects:l}){const{userData:a,userObject:i,setUserData:d}=s.useContext(se),{selectedQuarter:c,selectedSemester:S}=s.useContext(Se),f=s.useRef(null),j=s.useRef(null),v=s.useRef(null),_=s.useRef(null),m=s.useRef(null),u=Le(),E=Ue(),[x,g]=s.useState(null),[w,$]=s.useState(null),[D,k]=s.useState(null),[z,y]=s.useState(null),[p,A]=s.useState(!1),[N,F]=s.useState(!1),[R,L]=s.useState(!1),[H,M]=s.useState(!1),[Q,re]=s.useState(!1),[te,b]=s.useState(!1),[De,Pe]=s.useState(!1),[je,_e]=s.useState(""),[Z,ve]=s.useState("2nd"),[We,ge]=s.useState("1st"),[le,Ee]=s.useState("Newest-Oldest"),[Ae,xe]=s.useState(null),[Me,Ne]=s.useState({x:0,y:0}),[oe,ne]=s.useState({quarter:"2nd",sem:"1st"}),[G,U]=s.useState({Activity:!1,Assignment:!1,Project:!1,Exam:!1,Groupings:!1}),[Ce,we]=s.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]);function qe(r,C,o){o&&r.preventDefault();const n=window.innerWidth,Y=window.innerHeight;F(!0),Ne({x:r.clientX+160>n?r.clientX-(r.clientX+160-n):r.clientX,y:r.clientY+162.86>Y?r.clientY-(r.clientY+162.86-Y):r.clientY}),C&&(_e(C.typeOfWork),xe(C))}function Te(r,C,o){switch(je){case"Activity":n("activities");break;case"Assignment":n("assignments");break;case"Project":n("petas");break;case"Exam":n("exams");break}function n(Y){d(pe=>{if(!pe)return null;const ke=pe[Y]?.map(q=>{if(o&&o.id===q.id)return{...o,status:C,isSelected:!1};const Oe=x?.find(ae=>ae.id===q.id),Ie=w?.find(ae=>ae.id===q.id),Qe=D?.find(ae=>ae.id===q.id),Fe=z?.find(ae=>ae.id===q.id);switch(Y){case"activities":if(Oe?.isSelected)return{...q,status:C,isSelected:!1};break;case"assignments":if(Ie?.isSelected)return{...q,status:C,isSelected:!1};break;case"petas":if(Qe?.isSelected)return{...q,status:C,isSelected:!1};break;case"exams":if(Fe?.isSelected)return{...q,status:C,isSelected:!1};break}return q});return xe(q=>!q||r?null:{...q,status:C}),Be(ke,Y),U(q=>({...q,[je]:!1})),{...pe,[Y]:ke}})}}function X(r,C){if(Q)switch(r){case"Activity":g(o=>o?o?.map(n=>({...n,isSelected:n.quarter==Z?C:!1})):[]);break;case"Assignment":$(o=>o?o?.map(n=>({...n,isSelected:n.quarter==Z?C:!1})):[]);break;case"Project":k(o=>o?o?.map(n=>({...n,isSelected:n.quarter==Z?C:!1})):[]);break;case"Exam":y(o=>o?o?.map(n=>({...n,isSelected:n.quarter==Z?C:!1})):[]);break;case"All":g(o=>o?o?.map(n=>({...n,isSelected:n.quarter==Z?C:!1})):[]),$(o=>o?o?.map(n=>({...n,isSelected:n.quarter==Z?C:!1})):[]),k(o=>o?o?.map(n=>({...n,isSelected:n.quarter==Z?C:!1})):[]);break}}async function Be(r,C){const o=me(fe,"McCarthy",`${i?.uid}`);await V(o,{[C]:r})}function J(r,C){switch(C){case"Activity":var o=j.current,n=208;o&&(r==!1?o.scrollBy({left:n,behavior:"smooth"}):o.scrollBy({left:-n,behavior:"smooth"}));break;case"Assignment":var o=v.current,n=208;o&&(r==!1?o.scrollBy({left:n,behavior:"smooth"}):o.scrollBy({left:-n,behavior:"smooth"}));break;case"Project":var o=_.current,n=208;o&&(r==!1?o.scrollBy({left:n,behavior:"smooth"}):o.scrollBy({left:-n,behavior:"smooth"}));break;case"Exam":var o=m.current,n=208;o&&(r==!1?o.scrollBy({left:n,behavior:"smooth"}):o.scrollBy({left:-n,behavior:"smooth"}));break}}s.useEffect(()=>{(a?.activities!=null||a?.assignments!=null||a?.petas!=null)&&(g(a.activities.filter(r=>r.subject===t)),$(a.assignments.filter(r=>r.subject===t)),k(a.petas.filter(r=>r.subject===t)),y(a.exams.filter(r=>r.subject===t)),console.log(a))},[a,t]),s.useEffect(()=>{ve(oe.quarter),ge(oe.sem)},[oe]),s.useEffect(()=>{ne({quarter:c,sem:S})},[c,S]),s.useEffect(()=>{if(E.hash&&x!=null){const r=E.hash.substring(1).split("#"),[C,o]=r;if(C&&document.getElementById(C)?.scrollIntoView({behavior:"smooth"}),o){switch(C){case"Activity":x?.map(n=>{n.id==o&&ne({quarter:n.quarter,sem:n.semester})});break;case"Assignment":w?.map(n=>{n.id==o&&ne({quarter:n.quarter,sem:n.semester})});break;case"Project":D?.map(n=>{n.id==o&&ne({quarter:n.quarter,sem:n.semester})});break;case"Exam":z?.map(n=>{n.id==o&&ne({quarter:n.quarter,sem:n.semester})});break}setTimeout(()=>{const n=document.getElementById(o);n&&(n?.scrollIntoView({behavior:"smooth"}),n.style.backgroundColor="rgb(223, 223, 223)",n.style.scale="1.2"),n&&setTimeout(()=>{u(`/subjects/${t}`),n&&(n?.scrollIntoView({behavior:"smooth"}),n.style.backgroundColor="white",n.style.scale="1")},1e3)},500)}}},[E,x]);const ze={canSelect:Q,setCanSelect:re,showMenu:N,setShowMenu:F,showActDesc:R,showAddPrompt:H,setShowAddPrompt:M,showEdit:De,setShowEdit:Pe,typeOfWork:je,setTypeOfWork:_e,selectedChoice:oe,setSelectedChoice:ne,setShowActDesc:L,actDesc:Ae,setActDesc:xe,activities:x,setActivities:g,assignments:w,setAssignments:$,projects:D,setProjects:k,exams:z,setExams:y,quarterAndSemChoices:Ce,setQuarterAndSemChoices:we,quarter:Z,setQuarter:ve,semester:We,setSemester:ge,params:t,sortingType:le,setSortingType:Ee,menuPos:Me,setMenuPos:Ne,defineTypeOfWork:Te,handleRightClick:qe,handleSelectAll:X,saveToDatabase:Be,menu:f};if(t)return e.jsx(I.Provider,{value:ze,children:e.jsxs("div",{className:h.subConWrapper,onClick:()=>{F(!1)},children:[e.jsx(bt,{task:Ae}),e.jsx(Zs,{}),e.jsx(ut,{}),e.jsx(Qt,{}),e.jsxs("div",{className:h.topComponent,children:[e.jsx($e,{to:"/subjects",id:h.backButt,children:"Back"}),e.jsx("h1",{children:l.map(r=>r.subjectNameAbbreviation.toLowerCase()==t.toLowerCase()?r.subjectNameAbbreviation:"")}),e.jsxs("div",{className:h.right,children:[e.jsx("button",{className:h.wrapMenusButton,onClick:()=>{b(!te)},children:e.jsx("i",{className:"fa fa-bars"})}),e.jsxs("div",{className:te?h.wrap:h.hideWrap,children:[e.jsxs("div",{className:h.selectedChoice,children:[e.jsxs("button",{onClick:()=>{A(!p)},children:[oe.sem," Sem: ",oe.quarter," Quarter",e.jsx("i",{className:p?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("div",{className:p?`${h.choicesBox} ${h.showChoices}`:`${h.choicesBox} ${h.hideChoices}`,children:Ce.map((r,C)=>e.jsxs("button",{onClick:()=>{we(o=>o.map((n,Y)=>(C==Y&&ne(n),n))),A(!1)},children:[r.sem," Sem: ",r.quarter," Quarter"]},Math.random()*1))})]}),e.jsx(St,{})]})]})]}),e.jsxs("div",{className:h.contentWrapper,children:[e.jsxs("div",{className:`${h.subjectActs} ${h.subjectActivities}`,id:"Activity",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Activities"}),e.jsxs("div",{className:h.buttonWrapper,children:[e.jsx("button",{onClick:()=>{J(!0,"Activity")},children:e.jsx("i",{className:"	fa fa-angle-left"})}),e.jsx("button",{onClick:()=>{J(!1,"Activity")},children:e.jsx("i",{className:"	fa fa-angle-right"})})]})]}),e.jsxs("div",{ref:j,className:h.content,children:[e.jsx(ue,{type:"Activity"},Math.random()*1),e.jsx("button",{className:Q?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{G.Activity?(X("Activity",!1),U(r=>({...r,Activity:!1}))):(X("Activity",!0),U(r=>({...r,Activity:!0})))},children:e.jsx("i",{className:G.Activity?"fa fa-check":h.transparent})}),e.jsx(he,{typeOfWork:"Activity",sortingType:le})]})]}),e.jsxs("div",{className:`${h.subjectActs} ${h.subjectAssignments}`,id:"Assignment",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Assignment"}),e.jsxs("div",{className:h.buttonWrapper,children:[e.jsx("button",{onClick:()=>{J(!0,"Assignment")},children:e.jsx("i",{className:"	fa fa-angle-left"})}),e.jsx("button",{onClick:()=>{J(!1,"Assignment")},children:e.jsx("i",{className:"	fa fa-angle-right"})})]})]}),e.jsxs("div",{ref:v,className:h.content,children:[e.jsx(ue,{type:"Assignment"},Math.random()*1),e.jsx("button",{className:Q?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{G.Assignment?(X("Assignment",!1),U(r=>({...r,Assignment:!1}))):(X("Assignment",!0),U(r=>({...r,Assignment:!0})))},children:e.jsx("i",{className:G.Assignment?"fa fa-check":h.transparent})}),e.jsx(he,{typeOfWork:"Assignment",sortingType:le})]})]}),e.jsxs("div",{className:`${h.subjectActs} ${h.subjectProjects}`,id:"Project",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Performance Tasks"}),e.jsxs("div",{className:h.buttonWrapper,children:[e.jsx("button",{onClick:()=>{J(!0,"Project")},children:e.jsx("i",{className:"	fa fa-angle-left"})}),e.jsx("button",{onClick:()=>{J(!1,"Project")},children:e.jsx("i",{className:"	fa fa-angle-right"})})]})]}),e.jsxs("div",{ref:_,className:h.content,children:[e.jsx(ue,{type:"Project"},Math.random()*1),e.jsx("button",{className:Q?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{G.Project?(X("Project",!1),U(r=>({...r,Project:!1}))):(X("Project",!0),U(r=>({...r,Project:!0})))},children:e.jsx("i",{className:G.Project?"fa fa-check":h.transparent})}),e.jsx(he,{typeOfWork:"Project",sortingType:le})]})]}),e.jsxs("div",{className:`${h.subjectActs} ${h.subjectActivities}`,id:"Exam",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Exams And Quizes"}),e.jsxs("div",{className:h.buttonWrapper,children:[e.jsx("button",{onClick:()=>{J(!0,"Exam")},children:e.jsx("i",{className:"	fa fa-angle-left"})}),e.jsx("button",{onClick:()=>{J(!1,"Exam")},children:e.jsx("i",{className:"	fa fa-angle-right"})})]})]}),e.jsxs("div",{ref:m,className:h.content,children:[e.jsx(ue,{type:"Exam"},Math.random()*1),e.jsx("button",{className:Q?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{G.Exam?(X("Exam",!1),U(r=>({...r,Exam:!1}))):(X("Exam",!0),U(r=>({...r,Exam:!0})))},children:e.jsx("i",{className:G.Exam?"fa fa-check":h.transparent})}),e.jsx(he,{typeOfWork:"Exam",sortingType:le})]})]})]})]})})}const Se=s.createContext(null);function Lt(){const{pageDetector:t,userObject:l}=s.useContext(se),{subjectName:a}=Xe(),[i,d]=s.useState(!1),[c,S]=s.useState("2nd"),[f,j]=s.useState("1st"),[v]=s.useState(Ye),[_,m]=s.useState({quarter:"2nd",sem:"1st"}),[u]=s.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]),E=s.useRef(null),x=s.useRef(null);s.useEffect(()=>{t(null,1,!1)},[a]),s.useEffect(()=>{l?.uid?t(null,1,!1):t(0,null,!0)},[l]);const g={selectedQuarter:c,setSelectedQuarter:S,selectedSemester:f,setSelectedSemester:j};return e.jsx(Se.Provider,{value:g,children:a?e.jsx(Ft,{params:a,subjects:v}):e.jsxs("div",{ref:E,className:`${ce.subjectsWrapper}`,children:[e.jsxs("header",{ref:x,id:"SubjectNavigation",className:`${ce.top}`,children:[e.jsx("h1",{children:"Subjects"}),e.jsxs("div",{className:ce.dropDownButton,onClick:()=>d(w=>!w),children:[_.sem," Semester: ",_.quarter," Quarter",e.jsx("i",{className:i?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("div",{className:i?`${ce.choicesBox} ${ce.showChoices}`:`${ce.choicesBox} ${ce.hideChoices}`,children:u.map(w=>e.jsxs("button",{onClick:()=>{m(w),S(w.quarter),j(w.sem)},children:[w.sem," Sem: ",w.quarter," Quarter"]},`${w.sem}-${w.quarter}`))})]})]}),e.jsx("section",{children:v.map(w=>e.jsx(fs,{subData:w},w.subjectTeacher))})]})})}export{Se as SubjectsContext,Lt as default};
