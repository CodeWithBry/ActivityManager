import{j as e,r as t,c as Y,L as we,d as je,f as fe,g as Be,s as qe,a as Ce,b as oe,F as ze,u as Ee,e as Te,h as Ie}from"./index-9jqVOv3Q.js";import{s as Oe}from"./subjects-Qvdm7Wki.js";const Qe="_subjectsWrapper_1bbtx_1",Fe="_top_1bbtx_31",Re="_dropDownButton_1bbtx_69",Le="_showChoices_1bbtx_119",He="_hideChoices_1bbtx_127",Ue="_choicesBox_1bbtx_135",J={subjectsWrapper:Qe,top:Fe,dropDownButton:Re,showChoices:Le,hideChoices:He,choicesBox:Ue},Ze="_subjectBox_1xvju_1",Ve="_topWrapper_1xvju_95",Xe="_subjectName_1xvju_217",Ye="_progressWrapper_1xvju_261",Ge="_progresses_1xvju_279",Je="_top_1xvju_95",Ke="_bottom_1xvju_305",et="_barWrapper_1xvju_329",tt="_bar_1xvju_329",st="_openSubject_1xvju_357",v={subjectBox:Ze,topWrapper:Ve,subjectName:Xe,progressWrapper:Ye,progresses:Ge,top:Je,bottom:Ke,barWrapper:et,bar:tt,openSubject:st},nt="_subjectSkeletonBox_bnzn5_1",ct={subjectSkeletonBox:nt};function at(){return e.jsx("div",{className:`${ct.subjectSkeletonBox}`})}function it({subData:s}){const{userData:i}=t.useContext(Y),{selectedQuarter:n}=t.useContext(pe),[a,o]=t.useState(0),[c,_]=t.useState(0),[m,b]=t.useState(0),[l,p]=t.useState(0),[u,S]=t.useState(0),[x,$]=t.useState(0),[C,g]=t.useState(0),[D,z]=t.useState(0),[w,M]=t.useState(0),[N,A]=t.useState(),[I,R]=t.useState(),[ee,q]=t.useState();return t.useEffect(()=>{const G=a>0?c/a*100:0,O=l>0?u/l*100:0,L=C>0?D/C*100:0;b(G),$(O),M(L)},[a,c,l,u,C,D]),t.useEffect(()=>{if(n){const G=N?.filter(j=>j.subject==s.subjectNameAbbreviation&&n==j.quarter)?.length,O=I?.filter(j=>j.subject==s.subjectNameAbbreviation&&n==j.quarter)?.length,L=ee?.filter(j=>j.subject==s.subjectNameAbbreviation&&n==j.quarter)?.length,te=N?.filter(j=>j.status=="completed"&&j.subject==s.subjectNameAbbreviation&&n==j.quarter)?.length,ae=I?.filter(j=>j.status=="completed"&&j.subject==s.subjectNameAbbreviation&&n==j.quarter)?.length,H=ee?.filter(j=>j.status=="completed"&&j.subject==s.subjectNameAbbreviation&&n==j.quarter)?.length;o(G||0),_(te||0),p(O||0),S(ae||0),g(L||0),z(H||0)}},[n,N,I,ee]),t.useEffect(()=>{i&&(A(i.activities),R(i.assignments),q(i.petas))},[i]),N?e.jsxs("div",{className:`${v.subjectBox}`,children:[e.jsx("div",{className:v.topWrapper,children:e.jsx("h1",{className:v.subjectName,children:s.subjectNameAbbreviation})}),e.jsxs("div",{className:v.progressWrapper,children:[e.jsxs("div",{className:`${v.actWrapper} ${v.progresses}`,children:[e.jsxs("div",{className:v.top,children:[e.jsx("p",{children:"Activities:"}),e.jsx("p",{className:v.completed,children:a>=c&&a!=0?c+" out of "+a+" is Completed":"No Activity"})]}),e.jsx("div",{className:v.bottom,children:e.jsx("div",{className:v.barWrapper,children:e.jsx("div",{className:v.bar,style:{width:`${a>=c&&a!=0?m:100}%`}})})})]}),e.jsxs("div",{className:`${v.assignWrapper} ${v.progresses}`,children:[e.jsxs("div",{className:v.top,children:[e.jsx("p",{children:"Assignments:"}),e.jsx("p",{className:v.completed,children:l>=u&&l!=0?u+" out of "+l+" is Completed":"No Assignment"})]}),e.jsx("div",{className:v.bottom,children:e.jsx("div",{className:v.barWrapper,children:e.jsx("div",{className:v.bar,style:{width:`${l>=u&&l!=0?x:100}%`}})})})]}),e.jsxs("div",{className:`${v.projWrapper} ${v.progresses}`,children:[e.jsxs("div",{className:v.top,children:[e.jsx("p",{children:"Performance Tasks:"}),e.jsx("p",{className:v.completed,children:C>=D&&C!=0?D+" out of "+C+" is Completed":"No Projects"})]}),e.jsx("div",{className:v.bottom,children:e.jsx("div",{className:v.barWrapper,children:e.jsx("div",{className:v.bar,style:{width:`${C>=D&&C!=0?w:100}%`}})})})]})]}),e.jsx(we,{to:"/subjects/"+s.subjectNameAbbreviation,className:v.openSubject,children:"Open Subject"})]}):e.jsx(at,{})}const ot="_subConWrapper_1fnzp_1",rt="_topComponent_1fnzp_23",lt="_backButt_1fnzp_1",ut="_right_1fnzp_77",dt="_wrapMenusButton_1fnzp_89",ht="_wrap_1fnzp_89",mt="_hideWrap_1fnzp_99",jt="_selectedChoice_1fnzp_109",ft="_showChoices_1fnzp_149",pt="_hideChoices_1fnzp_157",xt="_choicesBox_1fnzp_165",bt="_contentWrapper_1fnzp_223",_t="_subjectActs_1fnzp_267",St="_content_1fnzp_223",At="_selectAllButton_1fnzp_339",gt="_hideSelectAllButton_1fnzp_355",Nt="_transparent_1fnzp_385",h={subConWrapper:ot,topComponent:rt,backButt:lt,right:ut,wrapMenusButton:dt,wrap:ht,hideWrap:mt,selectedChoice:jt,showChoices:ft,hideChoices:pt,choicesBox:xt,contentWrapper:bt,subjectActs:_t,content:St,selectAllButton:At,hideSelectAllButton:gt,transparent:Nt},vt="_showActDesc_ozrv6_1",Ct="_hideActDesc_ozrv6_29",wt="_showActDescBox_ozrv6_37",Bt="_right_ozrv6_73",$t="_stateWrapper_ozrv6_81",Dt="_showButton_ozrv6_95",yt="_choices_ozrv6_103",kt="_hideChoices_ozrv6_105",Pt="_showInfo_ozrv6_115",Mt="_highlight_ozrv6_141",Wt="_unhighlight_ozrv6_161",qt="_hideButton_ozrv6_173",W={showActDesc:vt,hideActDesc:Ct,showActDescBox:wt,right:Bt,stateWrapper:$t,showButton:Dt,choices:yt,hideChoices:kt,showInfo:Pt,highlight:Mt,unhighlight:Wt,hideButton:qt},zt="_infoBox_xvtjn_1",Et="_showInfoBox_xvtjn_21",Tt="_hideInfoBox_xvtjn_31",It="_animHideInfo_xvtjn_41",E={infoBox:zt,showInfoBox:Et,hideInfoBox:Tt,animHideInfo:It};function Ot({showInfo:s,setShowInfo:i}){const{actDesc:n}=t.useContext(T);function a(o){const c=o.currentTarget.classList;c.contains(E.hideInfoBox)?(c.replace(`${E.hideInfoBox}`,`${E.animHideInfo}`),setTimeout(()=>{c.replace(`${E.animHideInfo}`,`${E.hideInfoBox}`)},1e3)):(c.add(`${E.animHideInfo}`),setTimeout(()=>{c.replace(`${E.animHideInfo}`,`${E.hideInfoBox}`)},1e3)),i(!1)}return e.jsx(e.Fragment,{children:e.jsx("div",{className:s?`${E.infoBox} ${E.showInfoBox}`:`${E.infoBox} ${E.hideInfoBox}`,onMouseLeave:a,children:e.jsxs("ul",{children:[e.jsxs("li",{children:["Created At: ",n?.createdAt]}),e.jsxs("li",{children:["Deadline: ",n?.dueDate]}),e.jsxs("li",{children:["Semester: ",n?.semester," Sem"]}),e.jsxs("li",{children:["Quarter: ",n?.quarter," Quarter"]}),e.jsxs("li",{children:["Type: ",n?.typeOfWork]})]})})})}function Qt(){const{actDesc:s,showActDesc:i,setShowActDesc:n,setActDesc:a,defineTypeOfWork:o}=t.useContext(T),[c,_]=t.useState(!1),[m,b]=t.useState(!1);return e.jsx(e.Fragment,{children:e.jsx("div",{className:i?W.showActDesc:W.hideActDesc,children:e.jsxs("div",{className:i?W.showActDescBox:W.hideActDescBox,children:[e.jsxs("h2",{children:["Description",e.jsxs("div",{className:W.right,children:[e.jsxs("div",{className:W.stateWrapper,children:[e.jsx("button",{className:W.showButton,onClick:()=>{_(!c)},children:e.jsx("i",{className:"fa fa-navicon"})}),e.jsxs("div",{className:c?W.choices:W.hideChoices,children:[e.jsx("button",{className:s?.status=="completed"?W.highlight:W.unhighlight,onClick:()=>{s&&o(!1,"completed")},children:"Finish"}),e.jsx("button",{className:s?.status=="pending"?W.highlight:W.unhighlight,onClick:()=>{s&&o(!1,"pending")},children:"Pending"}),e.jsxs("button",{className:W.showInfo,onClick:()=>{b(!m)},children:[e.jsx("i",{className:"fa fa-list-alt"}),e.jsx(Ot,{showInfo:m,setShowInfo:b})]})]})]}),e.jsx("button",{onClick:()=>{n(!1),a(null)},className:W.hideButton,children:"X"})]})]}),e.jsx("h3",{children:s?.title}),e.jsx("p",{children:s?.description})]})})})}const Ft="_addSubjectWrapper_55ez4_1",Rt="_addSubjectBox_55ez4_29",Lt="_closeButton_55ez4_53",Ht="_top_55ez4_123",Ut="_submit_55ez4_189",V={addSubjectWrapper:Ft,addSubjectBox:Rt,closeButton:Lt,top:Ht,submit:Ut},Zt="_subjectBox_1p62z_1",Vt="_choices_1p62z_51",Xt="_show_1p62z_87",Yt="_subject_1p62z_1",Gt="_status_1p62z_99",y={subjectBox:Zt,choices:Vt,show:Xt,subject:Yt,status:Gt};function Jt({subject:s,setSubject:i}){const[n]=t.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[a,o]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:y.subName,children:"Subject"}),e.jsxs("button",{className:y.subjectBox,onClick:()=>{o(!a)},children:[s,e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:a?`${y.choices} ${y.show}`:y.choices,children:n.map(c=>e.jsx("li",{className:y.subject,onClick:()=>{i(c)},children:c},Math.random()*1))})]})]})}function Kt(){const{quarterAndSemChoices:s,quarter:i,setQuarter:n,semester:a,setSemester:o}=t.useContext(T),[c,_]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:y.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:y.subjectBox,onClick:()=>{_(!c)},children:[a+" Sem: "+i+" Quarter",e.jsx("i",{className:c?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:c?`${y.choices} ${y.show}`:y.choices,children:s.map(m=>e.jsx("li",{className:y.subject,onClick:()=>{n(m.quarter),o(m.sem)},children:m.sem+" Sem: "+m.quarter+" Quarter"},Math.random()*1))})]})]})}function es({status:s,setStatus:i}){const[n]=t.useState(["pending","completed"]),[a,o]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:y.subName,children:"Subject"}),e.jsxs("button",{className:y.subjectBox,onClick:()=>{o(!a)},children:[s,e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:a?`${y.choices} ${y.show}`:y.choices,children:n.map(c=>e.jsx("li",{className:y.status,onClick:()=>{i(c=="pending"?"pending":"completed")},children:c},Math.random()*1))})]})]})}function ts(){const{typeOfWork:s,showAddPrompt:i,setShowAddPrompt:n,setTypeOfWork:a,params:o,quarter:c,semester:_}=t.useContext(T),{userData:m}=t.useContext(Y),[b,l]=t.useState(""),[p,u]=t.useState(""),[S,x]=t.useState(null),[$,C]=t.useState(o?.toUpperCase()),[g,D]=t.useState("pending");async function z(){const w=new Date,M={id:Math.random()*1,title:b,description:p,typeOfWork:s,status:g,createdBy:"Pajarillaga, Bryan",createdAt:`${w?.getFullYear()}-${w?.getMonth()}-${w?.getDate()}`,dueDate:S,subject:$,semester:_,quarter:c,isSelected:!1,timeCreated:Date.now()};try{const N=je(fe,"Main_Database","School_Activities");(await Be(N)).exists()?await oe(N,{[s]:Ce(M)}):await qe(N,{[s]:Ce(M)}),l(""),u(""),x(null),a(""),n(!1)}catch(N){N instanceof ze&&console.log(N)}}if(t.useEffect(()=>{C(o)},[o]),i&&m?.user.status=="Owner")return e.jsx("div",{className:V.addSubjectWrapper,children:e.jsxs("div",{className:V.addSubjectBox,children:[e.jsx("button",{className:V.closeButton,onClick:()=>{a(""),n(!1)},children:"X"}),e.jsxs("h1",{children:["Create ",s]}),e.jsxs("div",{className:V.top,children:[e.jsx(Jt,{subject:$,setSubject:C}),e.jsx(Kt,{}),e.jsx(es,{status:g,setStatus:D}),e.jsx("h2",{className:V.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:w=>{console.log(w.currentTarget.value),x(w.currentTarget.value)}}),e.jsxs("h2",{className:V.actTitle,children:[s," Title"]}),e.jsx("input",{type:"text",value:b,onChange:w=>{l(w.currentTarget.value)}}),e.jsxs("h2",{className:V.actDesc,children:[s," Description"]}),e.jsx("textarea",{rows:5,value:p,onChange:w=>{u(w.currentTarget.value)}})]}),e.jsx("button",{className:V.submit,onClick:z,children:"Submit"})]})})}const ss="_noActivities_1bced_1",ns="_showMenu_1bced_11",cs="_hideMenu_1bced_69",as="_addActivity_1bced_77",is="_hamWrapper_1bced_143",os="_dropDownMenus_1bced_183",rs="_hideDropDown_1bced_235",K={noActivities:ss,showMenu:ns,hideMenu:cs,addActivity:as,hamWrapper:is,dropDownMenus:os,hideDropDown:rs};function ls({task:s}){const{setShowActDesc:i,setCanSelect:n,defineTypeOfWork:a,actDesc:o,menu:c,showMenu:_,menuPos:m,canSelect:b,handleRightClick:l,setActivities:p,setAssignments:u,setProjects:S,handleSelectAll:x,setShowEdit:$}=t.useContext(T),{userData:C}=t.useContext(Y);function g(M){if(b)switch(s?.typeOfWork){case"Activity":p(N=>N?N.map(A=>A.id==s?.id?{...A,isSelected:M}:A):[]);break;case"Assignment":u(N=>N?N.map(A=>A.id==s?.id?{...A,isSelected:M}:A):[]);break;case"Project":S(N=>N?N.map(A=>A.id==s?.id?{...A,isSelected:M}:A):[]);break}}function D(M){switch(M){case 1:i(!0);break;case 2:n(!b),b&&(g(!1),x("All",!1));break;case 3:o&&a(!0,"pending",o);break;case 4:o&&a(!0,"completed",o);break;case 5:s?.isSelected?g(!1):g(!0);break;case 6:$(!0);break}}function z(){if(b)return e.jsxs("button",{onClick:()=>D(5),children:[e.jsx("i",{className:"fa fa-hand-o-up"}),o?.isSelected?"Unselect":"Select"]})}function w(){if(C?.user.status=="Owner")return e.jsxs("button",{onClick:()=>D(6),children:[e.jsx("i",{className:"	fa fa-edit"}),"Edit"]})}return e.jsxs("div",{ref:c,onClick:M=>l(M,null,!1),className:_?K.showMenu:K.hideMenu,style:{left:m.x,top:m.y},children:[e.jsxs("button",{onClick:()=>D(1),children:[e.jsx("i",{className:"fa fa-envelope-open"}),"Open"]}),e.jsx(w,{}),e.jsxs("button",{onClick:()=>D(2),children:[e.jsx("i",{className:b?"fa fa-close":"fa fa-hand-o-up"}),b?"Cancel":"Select"]}),e.jsx(z,{}),e.jsxs("button",{onClick:()=>D(3),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Pending"]}),e.jsxs("button",{onClick:()=>D(4),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Finish"]})]})}function us(){const{setSortingType:s}=t.useContext(T),[i,n]=t.useState(!1),[a,o]=t.useState([{classname:"fa fa-ellipsis-h",functionName:"Pending"},{classname:"fa fa-check",functionName:"Completed"},{classname:"fa fa-sort-numeric-asc",functionName:"Newest-Oldest"},{classname:"fa fa-sort-numeric-desc",functionName:"Oldest-Newest"},{classname:"fa fa-sort-alpha-asc",functionName:"A-Z"},{classname:"fa fa-sort-alpha-desc",functionName:"Z-A"}]),[c,_]=t.useState({classname:"fa fa-sort-alpha-asc",functionName:"A-Z"});return t.useEffect(()=>{c&&s(c?.functionName)},[c]),e.jsxs("button",{className:K.hamWrapper,onClick:()=>{n(!i)},children:[e.jsxs("p",{children:["Sort",e.jsx("i",{className:c?.classname}),e.jsx("i",{className:i?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("ul",{className:i?K.dropDownMenus:K.hideDropDown,children:a.map(m=>e.jsxs("li",{onClick:()=>{o(b=>b.map(l=>(m.functionName==l.functionName&&_(l),l)))},children:[e.jsx("i",{className:m.classname}),e.jsx("p",{children:m.functionName})]},m.functionName))})]})}function re({type:s}){const{userData:i}=t.useContext(Y),{setTypeOfWork:n,setShowAddPrompt:a}=t.useContext(T);if(i?.user?.status=="Owner")return e.jsx("div",{className:K.addActivity,onClick:()=>{n(s),a(!0)},children:e.jsx("h1",{children:"+"})})}const ds="_activity_19w5l_1",hs="_pendingActivity_19w5l_3",ms="_selected_19w5l_69",js="_notSelected_19w5l_71",le={activity:ds,pendingActivity:hs,selected:ms,notSelected:js};function fs({task:s,handleRightClick:i,setActDesc:n}){const{canSelect:a,setActivities:o,setAssignments:c,setProjects:_}=t.useContext(T),m=()=>{if(a)return e.jsx("input",{type:"checkbox",checked:s?.isSelected,onChange:()=>{b(null)},className:s?.isSelected?le.selected:le.notSelected})};function b(l){a&&(o(p=>p?p.map(u=>u.id==l?.id?{...u,isSelected:!u.isSelected}:u):[]),c(p=>p?p.map(u=>u.id==l?.id?{...u,isSelected:!u.isSelected}:u):[]),_(p=>p?p.map(u=>u.id==l?.id?{...u,isSelected:!u.isSelected}:u):[]))}return e.jsxs("div",{id:`${s?.id}`,className:s?.status=="completed"?le.activity:le.pendingActivity,onContextMenu:l=>i(l,s,!1),onDoubleClick:l=>i(l,s,!0),onClick:()=>{n(s),b(s)},children:[e.jsx("h2",{children:s?.title}),e.jsx("p",{children:s?.description}),e.jsx(m,{})]})}const ps="_activitySkeleton_o3c77_1",xs={activitySkeleton:ps};function bs({count:s}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((i,n)=>e.jsx("div",{className:xs.activitySkeleton},n))})}function ue({typeOfWork:s,sortingType:i}){const{activities:n,assignments:a,projects:o,selectedChoice:c,handleRightClick:_,setActDesc:m,exams:b}=t.useContext(T),{userData:l}=t.useContext(Y),p=s==="Activity"?n||[]:s==="Assignment"?a||[]:s==="Assignment"?o||[]:b||[],u=t.useMemo(()=>{let S=[...p];return i==="Newest-Oldest"?S.sort((x,$)=>$.timeCreated-x.timeCreated):i==="Oldest-Newest"?S.sort((x,$)=>x.timeCreated-$.timeCreated):i==="A-Z"?S.sort((x,$)=>(x.title||"").localeCompare($.title||"")):i==="Z-A"?S.sort((x,$)=>($.title||"").localeCompare(x.title||"")):i==="Pending"?S=S.filter(x=>x.status==="pending"):i==="Completed"&&(S=S.filter(x=>x.status==="completed")),S.filter(x=>x.quarter===c.quarter&&x.semester===c.sem)},[p,i,c]);if(l){if(l&&u.length!=0)return e.jsx(e.Fragment,{children:u.map(S=>e.jsx(fs,{task:S,handleRightClick:_,setActDesc:m},S.id||S.timeCreated))});if(l&&u.length==0)return e.jsxs("h2",{className:K.noActivities,children:[s==="Activity"&&"There are no Activities!",s==="Assignment"&&"There are no Assignments!",s==="Project"&&"There are no Projects!",s==="Exam"&&"There are no Exam!"]})}else return e.jsx(bs,{count:6})}const _s="_addSubjectWrapper_55ez4_1",Ss="_addSubjectBox_55ez4_29",As="_closeButton_55ez4_53",gs="_top_55ez4_123",Ns="_submit_55ez4_189",X={addSubjectWrapper:_s,addSubjectBox:Ss,closeButton:As,top:gs,submit:Ns},vs="_subjectBox_1p62z_1",Cs="_choices_1p62z_51",ws="_show_1p62z_87",Bs="_subject_1p62z_1",$s="_status_1p62z_99",k={subjectBox:vs,choices:Cs,show:ws,subject:Bs,status:$s};function Ds({subject:s,setSubject:i}){const[n]=t.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[a,o]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:k.subName,children:"Subject"}),e.jsxs("button",{className:k.subjectBox,onClick:()=>{o(!a)},children:[s,e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:a?`${k.choices} ${k.show}`:k.choices,children:n.map(c=>e.jsx("li",{className:k.subject,onClick:()=>{i(c)},children:c},Math.random()*1))})]})]})}function ys(){const{quarterAndSemChoices:s,quarter:i,setQuarter:n,semester:a,setSemester:o}=t.useContext(T),[c,_]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:k.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:k.subjectBox,onClick:()=>{_(!c)},children:[a+" Sem: "+i+" Quarter",e.jsx("i",{className:c?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:c?`${k.choices} ${k.show}`:k.choices,children:s.map(m=>e.jsx("li",{className:k.subject,onClick:()=>{n(m.quarter),o(m.sem)},children:m.sem+" Sem: "+m.quarter+" Quarter"},Math.random()*1))})]})]})}function ks({status:s,setStatus:i}){const[n]=t.useState(["pending","completed"]),[a,o]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:k.subName,children:"Subject"}),e.jsxs("button",{className:k.subjectBox,onClick:()=>{o(!a)},children:[s,e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:a?`${k.choices} ${k.show}`:k.choices,children:n.map(c=>e.jsx("li",{className:k.status,onClick:()=>{i(c=="pending"?"pending":"completed")},children:c},Math.random()*1))})]})]})}function Ps(){const{typeOfWork:s,setTypeOfWork:i,params:n,quarter:a,semester:o,actDesc:c,showEdit:_,setShowEdit:m}=t.useContext(T),{userData:b}=t.useContext(Y),[l,p]=t.useState(""),[u,S]=t.useState(""),[x,$]=t.useState(""),[C,g]=t.useState(n?.toUpperCase()),[D,z]=t.useState("pending"),[w,M]=t.useState("");async function N(){const A=new Date,I={id:w,title:l,description:u,typeOfWork:s,status:D,createdBy:"Pajarillaga, Bryan",createdAt:`${A?.getFullYear()}-${A?.getMonth()}-${A?.getDate()}`,dueDate:x,subject:C,semester:o,quarter:a,isSelected:!1,timeCreated:Date.now()},R=je(fe,"Main_Database","School_Activities"),q=(await Be(R)).data();if(q)switch(s){case"Activity":const O=q.Activity.map(j=>j.id==w?{...I,id:Math.random()*1}:{...j});await oe(R,{[s]:O});break;case"Assignment":const te=q.Assignment.map(j=>j.id==w?{...I,id:Math.random()*1}:{...j});await oe(R,{[s]:te});break;case"Project":const H=q.Project.map(j=>j.id==w?{...I,id:Math.random()*1}:{...j});await oe(R,{[s]:H});break}m(!1)}if(t.useEffect(()=>{g(n)},[n]),t.useEffect(()=>{c&&(p(c.title),S(c.description),$(c.dueDate),z(c.status),M(c.id))},[c]),_&&b?.user.status=="Owner")return e.jsx("div",{className:X.addSubjectWrapper,children:e.jsxs("div",{className:X.addSubjectBox,children:[e.jsx("button",{className:X.closeButton,onClick:()=>{i(""),m(!1)},children:"X"}),e.jsxs("h1",{children:["Edit ",s]}),e.jsxs("div",{className:X.top,children:[e.jsx(Ds,{subject:C,setSubject:g}),e.jsx(ys,{}),e.jsx(ks,{status:D,setStatus:z}),e.jsx("h2",{className:X.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:A=>{console.log(A.currentTarget.value),$(A.currentTarget.value)}}),e.jsxs("h2",{className:X.actTitle,children:[s," Title"]}),e.jsx("input",{type:"text",value:l,onChange:A=>{p(A.currentTarget.value)}}),e.jsxs("h2",{className:X.actDescription,children:[s," Description"]}),e.jsx("textarea",{rows:5,value:u,onChange:A=>{S(A.currentTarget.value)}})]}),e.jsx("button",{className:X.submit,onClick:N,children:"Submit"})]})})}const T=t.createContext({});function Ms({params:s,subjects:i}){const{userData:n,userObject:a,setUserData:o}=t.useContext(Y),{selectedQuarter:c,selectedSemester:_}=t.useContext(pe),m=t.useRef(null),b=Ee(),l=Te(),[p,u]=t.useState(null),[S,x]=t.useState(null),[$,C]=t.useState(null),[g,D]=t.useState(null),[z,w]=t.useState(!1),[M,N]=t.useState(!1),[A,I]=t.useState(!1),[R,ee]=t.useState(!1),[q,G]=t.useState(!1),[O,L]=t.useState(!1),[te,ae]=t.useState(!1),[H,j]=t.useState(""),[U,xe]=t.useState("2nd"),[$e,be]=t.useState("1st"),[ie,De]=t.useState("Pending"),[de,he]=t.useState(null),[ye,_e]=t.useState({x:0,y:0}),[se,ne]=t.useState({quarter:"2nd",sem:"1st"}),[Z,Q]=t.useState({Activity:!1,Assignment:!1,Project:!1,Exam:!1,Groupings:!1}),[Se,Ae]=t.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]);function ke(r,B,d){d&&r.preventDefault(),N(!0),_e({x:r.clientX,y:r.clientY}),B&&(j(B.typeOfWork),he(B))}function Pe(r,B,d){switch(H){case"Activity":f("activities");break;case"Assignment":f("assignments");break;case"Project":f("petas");break;case"Exam":f("exams");break}function f(P){o(me=>{if(!me)return null;const Ne=me[P]?.map(ce=>{if(d&&d.id===ce.id)return{...d,status:B};const ve=p?.find(We=>We.id===ce.id);return ve?.isSelected?(console.log(ve),{...ce,status:B}):ce})||[];return he(r?null:de),ge(Ne,P),Q(ce=>({...ce,[H]:!1})),{...me,[P]:Ne}})}}function F(r,B){if(q)switch(r){case"Activity":u(d=>d?d?.map(f=>({...f,isSelected:f.quarter==U?B:!1})):[]);break;case"Assignment":x(d=>d?d?.map(f=>({...f,isSelected:f.quarter==U?B:!1})):[]);break;case"Project":C(d=>d?d?.map(f=>({...f,isSelected:f.quarter==U?B:!1})):[]);break;case"Exam":D(d=>d?d?.map(f=>({...f,isSelected:f.quarter==U?B:!1})):[]);break;case"All":u(d=>d?d?.map(f=>({...f,isSelected:f.quarter==U?B:!1})):[]),x(d=>d?d?.map(f=>({...f,isSelected:f.quarter==U?B:!1})):[]),C(d=>d?d?.map(f=>({...f,isSelected:f.quarter==U?B:!1})):[]);break}}async function ge(r,B){try{if(r&&B){const d=je(fe,"McCarthy",`${a?.uid}`);await oe(d,{[B]:r})}}catch{}}t.useEffect(()=>{(n?.activities!=null||n?.assignments!=null||n?.petas!=null)&&(u(n.activities.filter(r=>r.subject===s)),x(n.assignments.filter(r=>r.subject===s)),C(n.petas.filter(r=>r.subject===s)),D(n.exams.filter(r=>r.subject===s)))},[n,s]),t.useEffect(()=>{xe(se.quarter),be(se.sem)},[se]),t.useEffect(()=>{ne({quarter:c,sem:_})},[c,_]),t.useEffect(()=>{if(l.hash&&p!=null){const r=l.hash.substring(1).split("#"),[B,d]=r;if(B&&document.getElementById(B)?.scrollIntoView({behavior:"smooth"}),d){const f=document.getElementById(d);switch(f?.scrollIntoView({behavior:"smooth"}),B){case"Activity":p?.map(P=>{P.id==d&&ne({quarter:P.quarter,sem:P.semester})});break;case"Assignment":S?.map(P=>{P.id==d&&ne({quarter:P.quarter,sem:P.semester})});break;case"Project":console.log("Project"),$?.map(P=>{P.id==d&&(console.log("Project"),ne({quarter:P.quarter,sem:P.semester}))});break}f&&setTimeout(()=>{b(`/subjects/${s}`)},1e3)}}},[l,p]);const Me={canSelect:q,setCanSelect:G,showMenu:M,setShowMenu:N,showActDesc:A,showAddPrompt:R,setShowAddPrompt:ee,showEdit:te,setShowEdit:ae,typeOfWork:H,setTypeOfWork:j,selectedChoice:se,setSelectedChoice:ne,setShowActDesc:I,actDesc:de,setActDesc:he,activities:p,setActivities:u,assignments:S,setAssignments:x,projects:$,setProjects:C,exams:g,setExams:D,quarterAndSemChoices:Se,setQuarterAndSemChoices:Ae,quarter:U,setQuarter:xe,semester:$e,setSemester:be,params:s,sortingType:ie,setSortingType:De,menuPos:ye,setMenuPos:_e,defineTypeOfWork:Pe,handleRightClick:ke,handleSelectAll:F,saveToDatabase:ge,menu:m};if(s)return e.jsx(T.Provider,{value:Me,children:e.jsxs("div",{className:h.subConWrapper,onClick:()=>{N(!1)},children:[e.jsx(ls,{task:de}),e.jsx(Qt,{}),e.jsx(ts,{}),e.jsx(Ps,{}),e.jsxs("div",{className:h.topComponent,children:[e.jsx(we,{to:"/subjects",id:h.backButt,children:"Back"}),e.jsx("h1",{children:i.map(r=>r.subjectNameAbbreviation.toLowerCase()==s.toLowerCase()?r.subjectNameAbbreviation:"")}),e.jsxs("div",{className:h.right,children:[e.jsx("button",{className:h.wrapMenusButton,onClick:()=>{L(!O)},children:e.jsx("i",{className:"fa fa-bars"})}),e.jsxs("div",{className:O?h.wrap:h.hideWrap,children:[e.jsxs("div",{className:h.selectedChoice,children:[e.jsxs("button",{onClick:()=>{w(!z)},children:[se.sem," Sem: ",se.quarter," Quarter",e.jsx("i",{className:z?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("div",{className:z?`${h.choicesBox} ${h.showChoices}`:`${h.choicesBox} ${h.hideChoices}`,children:Se.map((r,B)=>e.jsxs("button",{onClick:()=>{Ae(d=>d.map((f,P)=>(B==P&&ne(f),f))),w(!1)},children:[r.sem," Sem: ",r.quarter," Quarter"]},Math.random()*1))})]}),e.jsx(us,{})]})]})]}),e.jsxs("div",{className:h.contentWrapper,children:[e.jsxs("div",{className:`${h.subjectActs} ${h.subjectActivities}`,id:"Activity",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Activities"})]}),e.jsxs("div",{className:h.content,children:[e.jsx(re,{type:"Activity"},Math.random()*1),e.jsx("button",{className:q?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{Z.Activity?(F("Activity",!1),Q(r=>({...r,Activity:!1}))):(F("Activity",!0),Q(r=>({...r,Activity:!0})))},children:e.jsx("i",{className:Z.Activity?"fa fa-check":h.transparent})}),e.jsx(ue,{typeOfWork:"Activity",sortingType:ie})]})]}),e.jsxs("div",{className:`${h.subjectActs} ${h.subjectAssignments}`,id:"Assignment",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Assignment"})]}),e.jsxs("div",{className:h.content,children:[e.jsx(re,{type:"Assignment"},Math.random()*1),e.jsx("button",{className:q?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{Z.Assignment?(F("Assignment",!1),Q(r=>({...r,Assignment:!1}))):(F("Assignment",!0),Q(r=>({...r,Assignment:!0})))},children:e.jsx("i",{className:Z.Assignment?"fa fa-check":h.transparent})}),e.jsx(ue,{typeOfWork:"Assignment",sortingType:ie})]})]}),e.jsxs("div",{className:`${h.subjectActs} ${h.subjectProjects}`,id:"Project",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Performance Tasks"})]}),e.jsxs("div",{className:h.content,children:[e.jsx(re,{type:"Project"},Math.random()*1),e.jsx("button",{className:q?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{Z.Project?(F("Project",!1),Q(r=>({...r,Project:!1}))):(F("Project",!0),Q(r=>({...r,Project:!0})))},children:e.jsx("i",{className:Z.Project?"fa fa-check":h.transparent})}),e.jsx(ue,{typeOfWork:"Project",sortingType:ie})]})]}),e.jsxs("div",{className:`${h.subjectActs} ${h.subjectActivities}`,id:"Exam",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Exams"})]}),e.jsxs("div",{className:h.content,children:[e.jsx(re,{type:"Exam"},Math.random()*1),e.jsx("button",{className:q?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{Z.Exam?(F("Exam",!1),Q(r=>({...r,Exam:!1}))):(F("Exam",!0),Q(r=>({...r,Exam:!0})))},children:e.jsx("i",{className:Z.Exam?"fa fa-check":h.transparent})}),e.jsx(ue,{typeOfWork:"Exam",sortingType:ie})]})]})]})]})})}const pe=t.createContext(null);function zs(){const{pageDetector:s,userObject:i}=t.useContext(Y),{subjectName:n}=Ie(),[a,o]=t.useState(!1),[c,_]=t.useState("1st"),[m,b]=t.useState("1st"),[l]=t.useState(Oe),[p,u]=t.useState({quarter:"1st",sem:"1st"}),[S]=t.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]),x=t.useRef(null),$=t.useRef(null);t.useEffect(()=>{s(null,1,!1)},[n]),t.useEffect(()=>{i?.uid?s(null,1,!1):s(0,null,!0)},[i]);const C={selectedQuarter:c,setSelectedQuarter:_,selectedSemester:m,setSelectedSemester:b};return e.jsx(pe.Provider,{value:C,children:n?e.jsx(Ms,{params:n,subjects:l}):e.jsxs("div",{ref:x,className:`${J.subjectsWrapper}`,children:[e.jsxs("header",{ref:$,id:"SubjectNavigation",className:`${J.top}`,children:[e.jsx("h1",{children:"Subjects"}),e.jsxs("div",{className:J.dropDownButton,onClick:()=>o(g=>!g),children:[p.sem," Semester: ",p.quarter," Quarter",e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("div",{className:a?`${J.choicesBox} ${J.showChoices}`:`${J.choicesBox} ${J.hideChoices}`,children:S.map(g=>e.jsxs("button",{onClick:()=>{u(g),_(g.quarter),b(g.sem)},children:[g.sem," Sem: ",g.quarter," Quarter"]},`${g.sem}-${g.quarter}`))})]})]}),e.jsx("section",{children:l.map(g=>e.jsx(it,{subData:g},g.subjectTeacher))})]})})}export{pe as SubjectsContext,zs as default};
