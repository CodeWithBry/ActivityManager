import{j as e,r as s,c as J,L as $e,d as pe,f as be,g as De,s as Re,a as ye,b as ue,F as Le,u as He,e as Ue,h as Xe}from"./index-D5hL6cUE.js";import{s as Ve}from"./subjects-Qvdm7Wki.js";const Ze="_subjectsWrapper_ceua6_1",Ye="_top_ceua6_23",Ge="_dropDownButton_ceua6_61",Je="_showChoices_ceua6_111",Ke="_hideChoices_ceua6_119",es="_choicesBox_ceua6_127",ae={subjectsWrapper:Ze,top:Ye,dropDownButton:Ge,showChoices:Je,hideChoices:Ke,choicesBox:es},ss="_subjectBox_1xvju_1",ts="_topWrapper_1xvju_95",ns="_subjectName_1xvju_217",as="_progressWrapper_1xvju_261",cs="_progresses_1xvju_279",is="_top_1xvju_95",os="_bottom_1xvju_305",rs="_barWrapper_1xvju_329",ls="_bar_1xvju_329",us="_openSubject_1xvju_357",C={subjectBox:ss,topWrapper:ts,subjectName:ns,progressWrapper:as,progresses:cs,top:is,bottom:os,barWrapper:rs,bar:ls,openSubject:us},ds="_subjectSkeletonBox_bnzn5_1",hs={subjectSkeletonBox:ds};function ms(){return e.jsx("div",{className:`${hs.subjectSkeletonBox}`})}function fs({subData:t}){const{userData:r}=s.useContext(J),{selectedQuarter:a}=s.useContext(Se),[o,d]=s.useState(0),[c,v]=s.useState(0),[m,p]=s.useState(0),[x,N]=s.useState(0),[f,u]=s.useState(0),[b,w]=s.useState(0),[k,g]=s.useState(0),[y,E]=s.useState(0),[B,D]=s.useState(0),[A,S]=s.useState(),[T,R]=s.useState(),[L,H]=s.useState();return s.useEffect(()=>{const K=o>0?c/o*100:0,U=x>0?f/x*100:0,ee=k>0?y/k*100:0;p(K),w(U),D(ee)},[o,c,x,f,k,y]),s.useEffect(()=>{if(a){const K=A?.filter(j=>j.subject==t.subjectNameAbbreviation&&a==j.quarter)?.length,U=T?.filter(j=>j.subject==t.subjectNameAbbreviation&&a==j.quarter)?.length,ee=L?.filter(j=>j.subject==t.subjectNameAbbreviation&&a==j.quarter)?.length,I=A?.filter(j=>j.status=="completed"&&j.subject==t.subjectNameAbbreviation&&a==j.quarter)?.length,re=T?.filter(j=>j.status=="completed"&&j.subject==t.subjectNameAbbreviation&&a==j.quarter)?.length,se=L?.filter(j=>j.status=="completed"&&j.subject==t.subjectNameAbbreviation&&a==j.quarter)?.length;d(K||0),v(I||0),N(U||0),u(re||0),g(ee||0),E(se||0)}},[a,A,T,L]),s.useEffect(()=>{r&&(S(r.activities),R(r.assignments),H(r.petas))},[r]),A?e.jsxs("div",{className:`${C.subjectBox}`,children:[e.jsx("div",{className:C.topWrapper,children:e.jsx("h1",{className:C.subjectName,children:t.subjectNameAbbreviation})}),e.jsxs("div",{className:C.progressWrapper,children:[e.jsxs("div",{className:`${C.actWrapper} ${C.progresses}`,children:[e.jsxs("div",{className:C.top,children:[e.jsx("p",{children:"Activities:"}),e.jsx("p",{className:C.completed,children:o>=c&&o!=0?c+" out of "+o+" is Completed":"No Activity"})]}),e.jsx("div",{className:C.bottom,children:e.jsx("div",{className:C.barWrapper,children:e.jsx("div",{className:C.bar,style:{width:`${m}%`}})})})]}),e.jsxs("div",{className:`${C.assignWrapper} ${C.progresses}`,children:[e.jsxs("div",{className:C.top,children:[e.jsx("p",{children:"Assignments:"}),e.jsx("p",{className:C.completed,children:x>=f&&x!=0?f+" out of "+x+" is Completed":"No Assignment"})]}),e.jsx("div",{className:C.bottom,children:e.jsx("div",{className:C.barWrapper,children:e.jsx("div",{className:C.bar,style:{width:`${b}%`}})})})]}),e.jsxs("div",{className:`${C.projWrapper} ${C.progresses}`,children:[e.jsxs("div",{className:C.top,children:[e.jsx("p",{children:"Performance Tasks:"}),e.jsx("p",{className:C.completed,children:k>=y&&k!=0?y+" out of "+k+" is Completed":"No Projects"})]}),e.jsx("div",{className:C.bottom,children:e.jsx("div",{className:C.barWrapper,children:e.jsx("div",{className:C.bar,style:{width:`${B}%`}})})})]})]}),e.jsx($e,{to:"/subjects/"+t.subjectNameAbbreviation,className:C.openSubject,children:"Open Subject"})]}):e.jsx(ms,{})}const js="_subConWrapper_faeli_1",xs="_topComponent_faeli_21",ps="_backButt_faeli_1",bs="_right_faeli_75",Ss="_wrapMenusButton_faeli_87",_s="_wrap_faeli_87",vs="_hideWrap_faeli_97",gs="_selectedChoice_faeli_107",Ns="_showChoices_faeli_147",As="_hideChoices_faeli_155",Cs="_choicesBox_faeli_163",ws="_contentWrapper_faeli_221",Bs="_subjectActs_faeli_257",ks="_buttonWrapper_faeli_297",ys="_content_faeli_221",$s="_selectAllButton_faeli_383",Ds="_hideSelectAllButton_faeli_399",Ps="_transparent_faeli_429",h={subConWrapper:js,topComponent:xs,backButt:ps,right:bs,wrapMenusButton:Ss,wrap:_s,hideWrap:vs,selectedChoice:gs,showChoices:Ns,hideChoices:As,choicesBox:Cs,contentWrapper:ws,subjectActs:Bs,buttonWrapper:ks,content:ys,selectAllButton:$s,hideSelectAllButton:Ds,transparent:Ps},Ws="_showActDesc_ozrv6_1",Ms="_hideActDesc_ozrv6_29",Es="_showActDescBox_ozrv6_37",qs="_right_ozrv6_73",zs="_stateWrapper_ozrv6_81",Ts="_showButton_ozrv6_95",Is="_choices_ozrv6_103",Os="_hideChoices_ozrv6_105",Qs="_showInfo_ozrv6_115",Fs="_highlight_ozrv6_141",Rs="_unhighlight_ozrv6_161",Ls="_hideButton_ozrv6_173",M={showActDesc:Ws,hideActDesc:Ms,showActDescBox:Es,right:qs,stateWrapper:zs,showButton:Ts,choices:Is,hideChoices:Os,showInfo:Qs,highlight:Fs,unhighlight:Rs,hideButton:Ls},Hs="_infoBox_xvtjn_1",Us="_showInfoBox_xvtjn_21",Xs="_hideInfoBox_xvtjn_31",Vs="_animHideInfo_xvtjn_41",q={infoBox:Hs,showInfoBox:Us,hideInfoBox:Xs,animHideInfo:Vs};function Zs({showInfo:t,setShowInfo:r}){const{actDesc:a}=s.useContext(z);function o(d){const c=d.currentTarget.classList;c.contains(q.hideInfoBox)?(c.replace(`${q.hideInfoBox}`,`${q.animHideInfo}`),setTimeout(()=>{c.replace(`${q.animHideInfo}`,`${q.hideInfoBox}`)},1e3)):(c.add(`${q.animHideInfo}`),setTimeout(()=>{c.replace(`${q.animHideInfo}`,`${q.hideInfoBox}`)},1e3)),r(!1)}return e.jsx(e.Fragment,{children:e.jsx("div",{className:t?`${q.infoBox} ${q.showInfoBox}`:`${q.infoBox} ${q.hideInfoBox}`,onMouseLeave:o,children:e.jsxs("ul",{children:[e.jsxs("li",{children:["Created At: ",a?.createdAt]}),e.jsxs("li",{children:["Deadline: ",a?.dueDate]}),e.jsxs("li",{children:["Semester: ",a?.semester," Sem"]}),e.jsxs("li",{children:["Quarter: ",a?.quarter," Quarter"]}),e.jsxs("li",{children:["Type: ",a?.typeOfWork]})]})})})}function Ys(){const{actDesc:t,showActDesc:r,setShowActDesc:a,setActDesc:o,defineTypeOfWork:d}=s.useContext(z),[c,v]=s.useState(!1),[m,p]=s.useState(!1);return e.jsx(e.Fragment,{children:e.jsx("div",{className:r?M.showActDesc:M.hideActDesc,children:e.jsxs("div",{className:r?M.showActDescBox:M.hideActDescBox,children:[e.jsxs("h2",{children:["Description",e.jsxs("div",{className:M.right,children:[e.jsxs("div",{className:M.stateWrapper,children:[e.jsx("button",{className:M.showButton,onClick:()=>{v(!c)},children:e.jsx("i",{className:"fa fa-navicon"})}),e.jsxs("div",{className:c?M.choices:M.hideChoices,children:[e.jsx("button",{className:t?.status=="completed"?M.highlight:M.unhighlight,onClick:()=>{t&&d(!1,"completed",t)},children:"Finish"}),e.jsx("button",{className:t?.status=="pending"?M.highlight:M.unhighlight,onClick:()=>{t&&d(!1,"pending",t)},children:"Pending"}),e.jsxs("button",{className:M.showInfo,onClick:()=>{p(!m)},children:[e.jsx("i",{className:"fa fa-list-alt"}),e.jsx(Zs,{showInfo:m,setShowInfo:p})]})]})]}),e.jsx("button",{onClick:()=>{a(!1),o(null)},className:M.hideButton,children:"X"})]})]}),e.jsx("h3",{children:t?.title}),e.jsx("p",{children:t?.description})]})})})}const Gs="_addSubjectWrapper_55ez4_1",Js="_addSubjectBox_55ez4_29",Ks="_closeButton_55ez4_53",et="_top_55ez4_123",st="_submit_55ez4_189",Y={addSubjectWrapper:Gs,addSubjectBox:Js,closeButton:Ks,top:et,submit:st},tt="_subjectBox_1p62z_1",nt="_choices_1p62z_51",at="_show_1p62z_87",ct="_subject_1p62z_1",it="_status_1p62z_99",P={subjectBox:tt,choices:nt,show:at,subject:ct,status:it};function ot({subject:t,setSubject:r}){const[a]=s.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[o,d]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:P.subName,children:"Subject"}),e.jsxs("button",{className:P.subjectBox,onClick:()=>{d(!o)},children:[t,e.jsx("i",{className:o?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:o?`${P.choices} ${P.show}`:P.choices,children:a.map(c=>e.jsx("li",{className:P.subject,onClick:()=>{r(c)},children:c},Math.random()*1))})]})]})}function rt(){const{quarterAndSemChoices:t,quarter:r,setQuarter:a,semester:o,setSemester:d}=s.useContext(z),[c,v]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:P.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:P.subjectBox,onClick:()=>{v(!c)},children:[o+" Sem: "+r+" Quarter",e.jsx("i",{className:c?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:c?`${P.choices} ${P.show}`:P.choices,children:t.map(m=>e.jsx("li",{className:P.subject,onClick:()=>{a(m.quarter),d(m.sem)},children:m.sem+" Sem: "+m.quarter+" Quarter"},Math.random()*1))})]})]})}function lt({status:t,setStatus:r}){const[a]=s.useState(["pending","completed"]),[o,d]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:P.subName,children:"Subject"}),e.jsxs("button",{className:P.subjectBox,onClick:()=>{d(!o)},children:[t,e.jsx("i",{className:o?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:o?`${P.choices} ${P.show}`:P.choices,children:a.map(c=>e.jsx("li",{className:P.status,onClick:()=>{r(c=="pending"?"pending":"completed")},children:c},Math.random()*1))})]})]})}function ut(){const{typeOfWork:t,showAddPrompt:r,setShowAddPrompt:a,setTypeOfWork:o,params:d,quarter:c,semester:v}=s.useContext(z),{userData:m}=s.useContext(J),[p,x]=s.useState(""),[N,f]=s.useState(""),[u,b]=s.useState(null),[w,k]=s.useState(d?.toUpperCase()),[g,y]=s.useState("pending");async function E(){const B=new Date,D={id:Math.random()*1,title:p,description:N,typeOfWork:t,status:g,createdBy:"Pajarillaga, Bryan",createdAt:`${B?.getFullYear()}-${B?.getMonth()}-${B?.getDate()}`,dueDate:u,subject:w,semester:v,quarter:c,isSelected:!1,timeCreated:Date.now()};try{const A=pe(be,"Main_Database","School_Activities");(await De(A)).exists()?await ue(A,{[t]:ye(D)}):await Re(A,{[t]:ye(D)}),x(""),f(""),b(null),o(""),a(!1)}catch(A){A instanceof Le&&console.log(A)}}if(s.useEffect(()=>{k(d)},[d]),r&&m?.user.status=="Owner")return e.jsx("div",{className:Y.addSubjectWrapper,children:e.jsxs("div",{className:Y.addSubjectBox,children:[e.jsx("button",{className:Y.closeButton,onClick:()=>{o(""),a(!1)},children:"X"}),e.jsxs("h1",{children:["Create ",t]}),e.jsxs("div",{className:Y.top,children:[e.jsx(ot,{subject:w,setSubject:k}),e.jsx(rt,{}),e.jsx(lt,{status:g,setStatus:y}),e.jsx("h2",{className:Y.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:B=>{console.log(B.currentTarget.value),b(B.currentTarget.value)}}),e.jsxs("h2",{className:Y.actTitle,children:[t," Title"]}),e.jsx("input",{type:"text",value:p,onChange:B=>{x(B.currentTarget.value)}}),e.jsxs("h2",{className:Y.actDesc,children:[t," Description"]}),e.jsx("textarea",{rows:5,value:N,onChange:B=>{f(B.currentTarget.value)}})]}),e.jsx("button",{className:Y.submit,onClick:E,children:"Submit"})]})})}const dt="_noActivities_u5p8f_1",ht="_showMenu_u5p8f_13",mt="_hideMenu_u5p8f_71",ft="_addActivity_u5p8f_79",jt="_hamWrapper_u5p8f_145",xt="_dropDownMenus_u5p8f_185",pt="_hideDropDown_u5p8f_237",ce={noActivities:dt,showMenu:ht,hideMenu:mt,addActivity:ft,hamWrapper:jt,dropDownMenus:xt,hideDropDown:pt};function bt({task:t}){const{setShowActDesc:r,setCanSelect:a,defineTypeOfWork:o,actDesc:d,menu:c,showMenu:v,menuPos:m,canSelect:p,handleRightClick:x,setActivities:N,setAssignments:f,setProjects:u,handleSelectAll:b,setShowEdit:w}=s.useContext(z),{userData:k}=s.useContext(J);function g(D){if(p)switch(t?.typeOfWork){case"Activity":N(A=>A?A.map(S=>S.id==t?.id?{...S,isSelected:D}:S):[]);break;case"Assignment":f(A=>A?A.map(S=>S.id==t?.id?{...S,isSelected:D}:S):[]);break;case"Project":u(A=>A?A.map(S=>S.id==t?.id?{...S,isSelected:D}:S):[]);break}}function y(D){switch(D){case 1:r(!0);break;case 2:a(!p),p&&(g(!1),b("All",!1));break;case 3:d&&o(!0,"pending",d);break;case 4:d&&o(!0,"completed",d);break;case 5:t?.isSelected?g(!1):g(!0);break;case 6:w(!0);break}}function E(){if(p)return e.jsxs("button",{onClick:()=>y(5),children:[e.jsx("i",{className:"fa fa-hand-o-up"}),d?.isSelected?"Unselect":"Select"]})}function B(){if(k?.user.status=="Owner")return e.jsxs("button",{onClick:()=>y(6),children:[e.jsx("i",{className:"	fa fa-edit"}),"Edit"]})}return e.jsxs("div",{ref:c,onClick:D=>x(D,null,!1),className:v?ce.showMenu:ce.hideMenu,style:{left:m.x,top:m.y},children:[e.jsxs("button",{onClick:()=>y(1),children:[e.jsx("i",{className:"fa fa-envelope-open"}),"Open"]}),e.jsx(B,{}),e.jsxs("button",{onClick:()=>y(2),children:[e.jsx("i",{className:p?"fa fa-close":"fa fa-hand-o-up"}),p?"Cancel":"Select"]}),e.jsx(E,{}),e.jsxs("button",{onClick:()=>y(3),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Pending"]}),e.jsxs("button",{onClick:()=>y(4),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Finish"]})]})}function St(){const{setSortingType:t}=s.useContext(z),[r,a]=s.useState(!1),[o,d]=s.useState([{classname:"fa fa-ellipsis-h",functionName:"Pending"},{classname:"fa fa-check",functionName:"Completed"},{classname:"fa fa-sort-numeric-asc",functionName:"Newest-Oldest"},{classname:"fa fa-sort-numeric-desc",functionName:"Oldest-Newest"},{classname:"fa fa-sort-alpha-asc",functionName:"A-Z"},{classname:"fa fa-sort-alpha-desc",functionName:"Z-A"}]),[c,v]=s.useState({classname:"fa fa-sort-alpha-asc",functionName:"A-Z"});return s.useEffect(()=>{c&&t(c?.functionName)},[c]),e.jsxs("button",{className:ce.hamWrapper,onClick:()=>{a(!r)},children:[e.jsxs("p",{children:["Sort",e.jsx("i",{className:c?.classname}),e.jsx("i",{className:r?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("ul",{className:r?ce.dropDownMenus:ce.hideDropDown,children:o.map(m=>e.jsxs("li",{onClick:()=>{d(p=>p.map(x=>(m.functionName==x.functionName&&v(x),x)))},children:[e.jsx("i",{className:m.classname}),e.jsx("p",{children:m.functionName})]},m.functionName))})]})}function de({type:t}){const{userData:r}=s.useContext(J),{setTypeOfWork:a,setShowAddPrompt:o}=s.useContext(z);if(r?.user?.status=="Owner")return e.jsx("div",{className:ce.addActivity,onClick:()=>{a(t),o(!0)},children:e.jsx("h1",{children:"+"})})}const _t="_activity_1u0xz_1",vt="_pendingActivity_1u0xz_3",gt="_selected_1u0xz_67",Nt="_notSelected_1u0xz_69",he={activity:_t,pendingActivity:vt,selected:gt,notSelected:Nt};function At({task:t,handleRightClick:r,setActDesc:a}){const{canSelect:o,setActivities:d,setAssignments:c,setProjects:v,setExams:m}=s.useContext(z),p=()=>{if(o)return e.jsx("input",{type:"checkbox",checked:t?.isSelected,onChange:()=>{x(null)},className:t?.isSelected?he.selected:he.notSelected})};function x(N){o&&(d(f=>f?f.map(u=>u.id==N?.id?{...u,isSelected:!u.isSelected}:u):[]),c(f=>f?f.map(u=>u.id==N?.id?{...u,isSelected:!u.isSelected}:u):[]),v(f=>f?f.map(u=>u.id==N?.id?{...u,isSelected:!u.isSelected}:u):[]),m(f=>f?f.map(u=>u.id==N?.id?{...u,isSelected:!u.isSelected}:u):[]))}return e.jsxs("div",{id:`${t?.id}`,className:t?.status=="completed"?he.activity:he.pendingActivity,onContextMenu:N=>r(N,t,!1),onDoubleClick:N=>r(N,t,!0),onClick:()=>{a(t),x(t)},children:[e.jsx("h2",{children:t?.title}),e.jsx("p",{children:t?.description}),e.jsx(p,{})]})}const Ct="_activitySkeleton_o3c77_1",wt={activitySkeleton:Ct};function Bt({count:t}){return e.jsx(e.Fragment,{children:Array.from({length:t}).map((r,a)=>e.jsx("div",{className:wt.activitySkeleton},a))})}function me({typeOfWork:t,sortingType:r}){const{activities:a,assignments:o,projects:d,selectedChoice:c,handleRightClick:v,setActDesc:m,exams:p}=s.useContext(z),{userData:x}=s.useContext(J),N=t==="Activity"?a||[]:t==="Assignment"?o||[]:t==="Project"?d||[]:p||[],f=s.useMemo(()=>{let u=[...N];return r==="Newest-Oldest"?u.sort((b,w)=>w.timeCreated-b.timeCreated):r==="Oldest-Newest"?u.sort((b,w)=>b.timeCreated-w.timeCreated):r==="A-Z"?u.sort((b,w)=>(b.title||"").localeCompare(w.title||"")):r==="Z-A"?u.sort((b,w)=>(w.title||"").localeCompare(b.title||"")):r==="Pending"?u=u.filter(b=>b.status==="pending"):r==="Completed"&&(u=u.filter(b=>b.status==="completed")),u.filter(b=>b.quarter===c.quarter&&b.semester===c.sem)},[N,r,c]);if(x){if(x&&f.length!=0)return e.jsx(e.Fragment,{children:f.map(u=>e.jsx(At,{task:u,handleRightClick:v,setActDesc:m},u.id||u.timeCreated))});if(x&&f.length==0)return e.jsxs("h2",{className:ce.noActivities,children:[t==="Activity"&&"There are no Activities!",t==="Assignment"&&"There are no Assignments!",t==="Project"&&"There are no Projects!",t==="Exam"&&"There are no Exam!"]})}else return e.jsx(Bt,{count:6})}const kt="_addSubjectWrapper_55ez4_1",yt="_addSubjectBox_55ez4_29",$t="_closeButton_55ez4_53",Dt="_top_55ez4_123",Pt="_submit_55ez4_189",G={addSubjectWrapper:kt,addSubjectBox:yt,closeButton:$t,top:Dt,submit:Pt},Wt="_subjectBox_1p62z_1",Mt="_choices_1p62z_51",Et="_show_1p62z_87",qt="_subject_1p62z_1",zt="_status_1p62z_99",W={subjectBox:Wt,choices:Mt,show:Et,subject:qt,status:zt};function Tt({subject:t,setSubject:r}){const[a]=s.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[o,d]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:W.subName,children:"Subject"}),e.jsxs("button",{className:W.subjectBox,onClick:()=>{d(!o)},children:[t,e.jsx("i",{className:o?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:o?`${W.choices} ${W.show}`:W.choices,children:a.map(c=>e.jsx("li",{className:W.subject,onClick:()=>{r(c)},children:c},Math.random()*1))})]})]})}function It(){const{quarterAndSemChoices:t,quarter:r,setQuarter:a,semester:o,setSemester:d}=s.useContext(z),[c,v]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:W.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:W.subjectBox,onClick:()=>{v(!c)},children:[o+" Sem: "+r+" Quarter",e.jsx("i",{className:c?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:c?`${W.choices} ${W.show}`:W.choices,children:t.map(m=>e.jsx("li",{className:W.subject,onClick:()=>{a(m.quarter),d(m.sem)},children:m.sem+" Sem: "+m.quarter+" Quarter"},Math.random()*1))})]})]})}function Ot({status:t,setStatus:r}){const[a]=s.useState(["pending","completed"]),[o,d]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:W.subName,children:"Subject"}),e.jsxs("button",{className:W.subjectBox,onClick:()=>{d(!o)},children:[t,e.jsx("i",{className:o?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:o?`${W.choices} ${W.show}`:W.choices,children:a.map(c=>e.jsx("li",{className:W.status,onClick:()=>{r(c=="pending"?"pending":"completed")},children:c},Math.random()*1))})]})]})}function Qt(){const{typeOfWork:t,setTypeOfWork:r,params:a,quarter:o,semester:d,actDesc:c,showEdit:v,setShowEdit:m}=s.useContext(z),{userData:p}=s.useContext(J),[x,N]=s.useState(""),[f,u]=s.useState(""),[b,w]=s.useState(""),[k,g]=s.useState(a?.toUpperCase()),[y,E]=s.useState("pending"),[B,D]=s.useState("");async function A(){const S=new Date,T={id:B,title:x,description:f,typeOfWork:t,status:y,createdBy:"Pajarillaga, Bryan",createdAt:`${S?.getFullYear()}-${S?.getMonth()}-${S?.getDate()}`,dueDate:b,subject:k,semester:d,quarter:o,isSelected:!1,timeCreated:Date.now()},R=pe(be,"Main_Database","School_Activities"),H=(await De(R)).data();if(H)switch(t){case"Activity":const U=H.Activity.map(j=>j.id==B?{...T,id:Math.random()*1}:{...j});await ue(R,{[t]:U});break;case"Assignment":const I=H.Assignment.map(j=>j.id==B?{...T,id:Math.random()*1}:{...j});await ue(R,{[t]:I});break;case"Project":const se=H.Project.map(j=>j.id==B?{...T,id:Math.random()*1}:{...j});await ue(R,{[t]:se});break}m(!1)}if(s.useEffect(()=>{g(a)},[a]),s.useEffect(()=>{c&&(N(c.title),u(c.description),w(c.dueDate),E(c.status),D(c.id))},[c]),v&&p?.user.status=="Owner")return e.jsx("div",{className:G.addSubjectWrapper,children:e.jsxs("div",{className:G.addSubjectBox,children:[e.jsx("button",{className:G.closeButton,onClick:()=>{r(""),m(!1)},children:"X"}),e.jsxs("h1",{children:["Edit ",t]}),e.jsxs("div",{className:G.top,children:[e.jsx(Tt,{subject:k,setSubject:g}),e.jsx(It,{}),e.jsx(Ot,{status:y,setStatus:E}),e.jsx("h2",{className:G.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:S=>{console.log(S.currentTarget.value),w(S.currentTarget.value)}}),e.jsxs("h2",{className:G.actTitle,children:[t," Title"]}),e.jsx("input",{type:"text",value:x,onChange:S=>{N(S.currentTarget.value)}}),e.jsxs("h2",{className:G.actDescription,children:[t," Description"]}),e.jsx("textarea",{rows:5,value:f,onChange:S=>{u(S.currentTarget.value)}})]}),e.jsx("button",{className:G.submit,onClick:A,children:"Submit"})]})})}const z=s.createContext({});function Ft({params:t,subjects:r}){const{userData:a,userObject:o,setUserData:d}=s.useContext(J),{selectedQuarter:c,selectedSemester:v}=s.useContext(Se),m=s.useRef(null),p=s.useRef(null),x=s.useRef(null),N=s.useRef(null),f=s.useRef(null),u=He(),b=Ue(),[w,k]=s.useState(null),[g,y]=s.useState(null),[E,B]=s.useState(null),[D,A]=s.useState(null),[S,T]=s.useState(!1),[R,L]=s.useState(!1),[H,K]=s.useState(!1),[U,ee]=s.useState(!1),[I,re]=s.useState(!1),[se,j]=s.useState(!1),[Pe,We]=s.useState(!1),[fe,_e]=s.useState(""),[X,ve]=s.useState("2nd"),[Me,ge]=s.useState("1st"),[le,O]=s.useState("Pending"),[Ne,je]=s.useState(null),[Ee,Ae]=s.useState({x:0,y:0}),[ie,te]=s.useState({quarter:"2nd",sem:"1st"}),[V,Q]=s.useState({Activity:!1,Assignment:!1,Project:!1,Exam:!1,Groupings:!1}),[Ce,we]=s.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]);function qe(l,_,i){i&&l.preventDefault();const n=window.innerWidth;L(!0),Ae({x:l.clientX+160>n?l.clientX-(l.clientX+160-n):l.clientX,y:l.clientY}),_&&(_e(_.typeOfWork),je(_))}function ze(l,_,i){switch(fe){case"Activity":n("activities");break;case"Assignment":n("assignments");break;case"Project":n("petas");break;case"Exam":n("exams");break}function n(oe){d(xe=>{if(!xe)return null;const ke=xe[oe]?.map($=>{if(i&&i.id===$.id)return{...i,status:_,isSelected:!1};const Ie=w?.find(ne=>ne.id===$.id),Oe=g?.find(ne=>ne.id===$.id),Qe=E?.find(ne=>ne.id===$.id),Fe=D?.find(ne=>ne.id===$.id);switch(oe){case"activities":if(Ie?.isSelected)return $.status=="pending"?O("Pending"):O("Completed"),{...$,status:_,isSelected:!1};break;case"assignments":if(Oe?.isSelected)return $.status=="pending"?O("Pending"):O("Completed"),{...$,status:_,isSelected:!1};break;case"petas":if(Qe?.isSelected)return $.status=="pending"?O("Pending"):O("Completed"),{...$,status:_,isSelected:!1};break;case"exams":if(Fe?.isSelected)return $.status=="pending"?O("Pending"):O("Completed"),{...$,status:_,isSelected:!1};break}return $})||[];return je($=>!$||l?null:{...$,status:_}),Be(ke,oe),Q($=>({...$,[fe]:!1})),{...xe,[oe]:ke}})}}function F(l,_){if(I)switch(l){case"Activity":k(i=>i?i?.map(n=>({...n,isSelected:n.quarter==X?_:!1})):[]);break;case"Assignment":y(i=>i?i?.map(n=>({...n,isSelected:n.quarter==X?_:!1})):[]);break;case"Project":B(i=>i?i?.map(n=>({...n,isSelected:n.quarter==X?_:!1})):[]);break;case"Exam":A(i=>i?i?.map(n=>({...n,isSelected:n.quarter==X?_:!1})):[]);break;case"All":k(i=>i?i?.map(n=>({...n,isSelected:n.quarter==X?_:!1})):[]),y(i=>i?i?.map(n=>({...n,isSelected:n.quarter==X?_:!1})):[]),B(i=>i?i?.map(n=>({...n,isSelected:n.quarter==X?_:!1})):[]);break}}async function Be(l,_){try{if(l&&_){const i=pe(be,"McCarthy",`${o?.uid}`);await ue(i,{[_]:l})}}catch{}}function Z(l,_){switch(_){case"Activity":var i=p.current,n=208;i&&(l==!1?i.scrollBy({left:n,behavior:"smooth"}):i.scrollBy({left:-n,behavior:"smooth"}));break;case"Assignment":var i=x.current,n=208;i&&(l==!1?i.scrollBy({left:n,behavior:"smooth"}):i.scrollBy({left:-n,behavior:"smooth"}));break;case"Project":var i=N.current,n=208;i&&(l==!1?i.scrollBy({left:n,behavior:"smooth"}):i.scrollBy({left:-n,behavior:"smooth"}));break;case"Exam":var i=f.current,n=208;i&&(l==!1?i.scrollBy({left:n,behavior:"smooth"}):i.scrollBy({left:-n,behavior:"smooth"}));break}}s.useEffect(()=>{(a?.activities!=null||a?.assignments!=null||a?.petas!=null)&&(k(a.activities.filter(l=>l.subject===t)),y(a.assignments.filter(l=>l.subject===t)),B(a.petas.filter(l=>l.subject===t)),A(a.exams.filter(l=>l.subject===t)))},[a,t]),s.useEffect(()=>{ve(ie.quarter),ge(ie.sem)},[ie]),s.useEffect(()=>{te({quarter:c,sem:v})},[c,v]),s.useEffect(()=>{if(b.hash&&w!=null){const l=b.hash.substring(1).split("#"),[_,i]=l;if(_&&document.getElementById(_)?.scrollIntoView({behavior:"smooth"}),i){switch(_){case"Activity":w?.map(n=>{n.id==i&&te({quarter:n.quarter,sem:n.semester})});break;case"Assignment":g?.map(n=>{n.id==i&&te({quarter:n.quarter,sem:n.semester})});break;case"Project":E?.map(n=>{n.id==i&&te({quarter:n.quarter,sem:n.semester})});break;case"Exam":D?.map(n=>{n.id==i&&te({quarter:n.quarter,sem:n.semester})});break}setTimeout(()=>{const n=document.getElementById(i);n&&(n?.scrollIntoView({behavior:"smooth"}),n.style.backgroundColor="rgb(223, 223, 223)",n.style.scale="1.2"),n&&setTimeout(()=>{u(`/subjects/${t}`),n&&(n?.scrollIntoView({behavior:"smooth"}),n.style.backgroundColor="white",n.style.scale="1")},1e3)},500)}}},[b,w]);const Te={canSelect:I,setCanSelect:re,showMenu:R,setShowMenu:L,showActDesc:H,showAddPrompt:U,setShowAddPrompt:ee,showEdit:Pe,setShowEdit:We,typeOfWork:fe,setTypeOfWork:_e,selectedChoice:ie,setSelectedChoice:te,setShowActDesc:K,actDesc:Ne,setActDesc:je,activities:w,setActivities:k,assignments:g,setAssignments:y,projects:E,setProjects:B,exams:D,setExams:A,quarterAndSemChoices:Ce,setQuarterAndSemChoices:we,quarter:X,setQuarter:ve,semester:Me,setSemester:ge,params:t,sortingType:le,setSortingType:O,menuPos:Ee,setMenuPos:Ae,defineTypeOfWork:ze,handleRightClick:qe,handleSelectAll:F,saveToDatabase:Be,menu:m};if(t)return e.jsx(z.Provider,{value:Te,children:e.jsxs("div",{className:h.subConWrapper,onClick:()=>{L(!1)},children:[e.jsx(bt,{task:Ne}),e.jsx(Ys,{}),e.jsx(ut,{}),e.jsx(Qt,{}),e.jsxs("div",{className:h.topComponent,children:[e.jsx($e,{to:"/subjects",id:h.backButt,children:"Back"}),e.jsx("h1",{children:r.map(l=>l.subjectNameAbbreviation.toLowerCase()==t.toLowerCase()?l.subjectNameAbbreviation:"")}),e.jsxs("div",{className:h.right,children:[e.jsx("button",{className:h.wrapMenusButton,onClick:()=>{j(!se)},children:e.jsx("i",{className:"fa fa-bars"})}),e.jsxs("div",{className:se?h.wrap:h.hideWrap,children:[e.jsxs("div",{className:h.selectedChoice,children:[e.jsxs("button",{onClick:()=>{T(!S)},children:[ie.sem," Sem: ",ie.quarter," Quarter",e.jsx("i",{className:S?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("div",{className:S?`${h.choicesBox} ${h.showChoices}`:`${h.choicesBox} ${h.hideChoices}`,children:Ce.map((l,_)=>e.jsxs("button",{onClick:()=>{we(i=>i.map((n,oe)=>(_==oe&&te(n),n))),T(!1)},children:[l.sem," Sem: ",l.quarter," Quarter"]},Math.random()*1))})]}),e.jsx(St,{})]})]})]}),e.jsxs("div",{className:h.contentWrapper,children:[e.jsxs("div",{className:`${h.subjectActs} ${h.subjectActivities}`,id:"Activity",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Activities"}),e.jsxs("div",{className:h.buttonWrapper,children:[e.jsx("button",{onClick:()=>{Z(!0,"Activity")},children:e.jsx("i",{className:"	fa fa-angle-left"})}),e.jsx("button",{onClick:()=>{Z(!1,"Activity")},children:e.jsx("i",{className:"	fa fa-angle-right"})})]})]}),e.jsxs("div",{ref:p,className:h.content,children:[e.jsx(de,{type:"Activity"},Math.random()*1),e.jsx("button",{className:I?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{V.Activity?(F("Activity",!1),Q(l=>({...l,Activity:!1}))):(F("Activity",!0),Q(l=>({...l,Activity:!0})))},children:e.jsx("i",{className:V.Activity?"fa fa-check":h.transparent})}),e.jsx(me,{typeOfWork:"Activity",sortingType:le})]})]}),e.jsxs("div",{className:`${h.subjectActs} ${h.subjectAssignments}`,id:"Assignment",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Assignment"}),e.jsxs("div",{className:h.buttonWrapper,children:[e.jsx("button",{onClick:()=>{Z(!0,"Assignment")},children:e.jsx("i",{className:"	fa fa-angle-left"})}),e.jsx("button",{onClick:()=>{Z(!1,"Assignment")},children:e.jsx("i",{className:"	fa fa-angle-right"})})]})]}),e.jsxs("div",{ref:x,className:h.content,children:[e.jsx(de,{type:"Assignment"},Math.random()*1),e.jsx("button",{className:I?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{V.Assignment?(F("Assignment",!1),Q(l=>({...l,Assignment:!1}))):(F("Assignment",!0),Q(l=>({...l,Assignment:!0})))},children:e.jsx("i",{className:V.Assignment?"fa fa-check":h.transparent})}),e.jsx(me,{typeOfWork:"Assignment",sortingType:le})]})]}),e.jsxs("div",{className:`${h.subjectActs} ${h.subjectProjects}`,id:"Project",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Performance Tasks"}),e.jsxs("div",{className:h.buttonWrapper,children:[e.jsx("button",{onClick:()=>{Z(!0,"Project")},children:e.jsx("i",{className:"	fa fa-angle-left"})}),e.jsx("button",{onClick:()=>{Z(!1,"Project")},children:e.jsx("i",{className:"	fa fa-angle-right"})})]})]}),e.jsxs("div",{ref:N,className:h.content,children:[e.jsx(de,{type:"Project"},Math.random()*1),e.jsx("button",{className:I?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{V.Project?(F("Project",!1),Q(l=>({...l,Project:!1}))):(F("Project",!0),Q(l=>({...l,Project:!0})))},children:e.jsx("i",{className:V.Project?"fa fa-check":h.transparent})}),e.jsx(me,{typeOfWork:"Project",sortingType:le})]})]}),e.jsxs("div",{className:`${h.subjectActs} ${h.subjectActivities}`,id:"Exam",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Exams And Quizes"}),e.jsxs("div",{className:h.buttonWrapper,children:[e.jsx("button",{onClick:()=>{Z(!0,"Exam")},children:e.jsx("i",{className:"	fa fa-angle-left"})}),e.jsx("button",{onClick:()=>{Z(!1,"Exam")},children:e.jsx("i",{className:"	fa fa-angle-right"})})]})]}),e.jsxs("div",{ref:f,className:h.content,children:[e.jsx(de,{type:"Exam"},Math.random()*1),e.jsx("button",{className:I?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{V.Exam?(F("Exam",!1),Q(l=>({...l,Exam:!1}))):(F("Exam",!0),Q(l=>({...l,Exam:!0})))},children:e.jsx("i",{className:V.Exam?"fa fa-check":h.transparent})}),e.jsx(me,{typeOfWork:"Exam",sortingType:le})]})]})]})]})})}const Se=s.createContext(null);function Ht(){const{pageDetector:t,userObject:r}=s.useContext(J),{subjectName:a}=Xe(),[o,d]=s.useState(!1),[c,v]=s.useState("2nd"),[m,p]=s.useState("1st"),[x]=s.useState(Ve),[N,f]=s.useState({quarter:"2nd",sem:"1st"}),[u]=s.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]),b=s.useRef(null),w=s.useRef(null);s.useEffect(()=>{t(null,1,!1)},[a]),s.useEffect(()=>{r?.uid?t(null,1,!1):t(0,null,!0)},[r]);const k={selectedQuarter:c,setSelectedQuarter:v,selectedSemester:m,setSelectedSemester:p};return e.jsx(Se.Provider,{value:k,children:a?e.jsx(Ft,{params:a,subjects:x}):e.jsxs("div",{ref:b,className:`${ae.subjectsWrapper}`,children:[e.jsxs("header",{ref:w,id:"SubjectNavigation",className:`${ae.top}`,children:[e.jsx("h1",{children:"Subjects"}),e.jsxs("div",{className:ae.dropDownButton,onClick:()=>d(g=>!g),children:[N.sem," Semester: ",N.quarter," Quarter",e.jsx("i",{className:o?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("div",{className:o?`${ae.choicesBox} ${ae.showChoices}`:`${ae.choicesBox} ${ae.hideChoices}`,children:u.map(g=>e.jsxs("button",{onClick:()=>{f(g),v(g.quarter),p(g.sem)},children:[g.sem," Sem: ",g.quarter," Quarter"]},`${g.sem}-${g.quarter}`))})]})]}),e.jsx("section",{children:x.map(g=>e.jsx(fs,{subData:g},g.subjectTeacher))})]})})}export{Se as SubjectsContext,Ht as default};
