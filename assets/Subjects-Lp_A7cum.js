import{j as e,r as s,c as J,L as ye,d as je,f as xe,g as $e,s as Oe,a as ke,b as re,F as Qe,u as Fe,e as Re,h as Le}from"./index-DUVib3i_.js";import{s as He}from"./subjects-Qvdm7Wki.js";const Ue="_subjectsWrapper_1bbtx_1",Ze="_top_1bbtx_31",Ve="_dropDownButton_1bbtx_69",Xe="_showChoices_1bbtx_119",Ye="_hideChoices_1bbtx_127",Ge="_choicesBox_1bbtx_135",te={subjectsWrapper:Ue,top:Ze,dropDownButton:Ve,showChoices:Xe,hideChoices:Ye,choicesBox:Ge},Je="_subjectBox_1xvju_1",Ke="_topWrapper_1xvju_95",es="_subjectName_1xvju_217",ss="_progressWrapper_1xvju_261",ts="_progresses_1xvju_279",cs="_top_1xvju_95",ns="_bottom_1xvju_305",as="_barWrapper_1xvju_329",is="_bar_1xvju_329",os="_openSubject_1xvju_357",C={subjectBox:Je,topWrapper:Ke,subjectName:es,progressWrapper:ss,progresses:ts,top:cs,bottom:ns,barWrapper:as,bar:is,openSubject:os},rs="_subjectSkeletonBox_bnzn5_1",ls={subjectSkeletonBox:rs};function us(){return e.jsx("div",{className:`${ls.subjectSkeletonBox}`})}function ds({subData:t}){const{userData:o}=s.useContext(J),{selectedQuarter:c}=s.useContext(pe),[i,l]=s.useState(0),[n,_]=s.useState(0),[f,x]=s.useState(0),[h,S]=s.useState(0),[m,g]=s.useState(0),[p,w]=s.useState(0),[k,v]=s.useState(0),[y,z]=s.useState(0),[B,W]=s.useState(0),[A,b]=s.useState(),[T,R]=s.useState(),[L,H]=s.useState();return s.useEffect(()=>{const K=i>0?n/i*100:0,U=h>0?m/h*100:0,ee=k>0?y/k*100:0;x(K),w(U),W(ee)},[i,n,h,m,k,y]),s.useEffect(()=>{if(c){const K=A?.filter(j=>j.subject==t.subjectNameAbbreviation&&c==j.quarter)?.length,U=T?.filter(j=>j.subject==t.subjectNameAbbreviation&&c==j.quarter)?.length,ee=L?.filter(j=>j.subject==t.subjectNameAbbreviation&&c==j.quarter)?.length,I=A?.filter(j=>j.status=="completed"&&j.subject==t.subjectNameAbbreviation&&c==j.quarter)?.length,ie=T?.filter(j=>j.status=="completed"&&j.subject==t.subjectNameAbbreviation&&c==j.quarter)?.length,se=L?.filter(j=>j.status=="completed"&&j.subject==t.subjectNameAbbreviation&&c==j.quarter)?.length;l(K||0),_(I||0),S(U||0),g(ie||0),v(ee||0),z(se||0)}},[c,A,T,L]),s.useEffect(()=>{o&&(b(o.activities),R(o.assignments),H(o.petas))},[o]),A?e.jsxs("div",{className:`${C.subjectBox}`,children:[e.jsx("div",{className:C.topWrapper,children:e.jsx("h1",{className:C.subjectName,children:t.subjectNameAbbreviation})}),e.jsxs("div",{className:C.progressWrapper,children:[e.jsxs("div",{className:`${C.actWrapper} ${C.progresses}`,children:[e.jsxs("div",{className:C.top,children:[e.jsx("p",{children:"Activities:"}),e.jsx("p",{className:C.completed,children:i>=n&&i!=0?n+" out of "+i+" is Completed":"No Activity"})]}),e.jsx("div",{className:C.bottom,children:e.jsx("div",{className:C.barWrapper,children:e.jsx("div",{className:C.bar,style:{width:`${f}%`}})})})]}),e.jsxs("div",{className:`${C.assignWrapper} ${C.progresses}`,children:[e.jsxs("div",{className:C.top,children:[e.jsx("p",{children:"Assignments:"}),e.jsx("p",{className:C.completed,children:h>=m&&h!=0?m+" out of "+h+" is Completed":"No Assignment"})]}),e.jsx("div",{className:C.bottom,children:e.jsx("div",{className:C.barWrapper,children:e.jsx("div",{className:C.bar,style:{width:`${p}%`}})})})]}),e.jsxs("div",{className:`${C.projWrapper} ${C.progresses}`,children:[e.jsxs("div",{className:C.top,children:[e.jsx("p",{children:"Performance Tasks:"}),e.jsx("p",{className:C.completed,children:k>=y&&k!=0?y+" out of "+k+" is Completed":"No Projects"})]}),e.jsx("div",{className:C.bottom,children:e.jsx("div",{className:C.barWrapper,children:e.jsx("div",{className:C.bar,style:{width:`${B}%`}})})})]})]}),e.jsx(ye,{to:"/subjects/"+t.subjectNameAbbreviation,className:C.openSubject,children:"Open Subject"})]}):e.jsx(us,{})}const hs="_subConWrapper_1cz7a_1",ms="_topComponent_1cz7a_23",fs="_backButt_1cz7a_1",js="_right_1cz7a_77",xs="_wrapMenusButton_1cz7a_89",ps="_wrap_1cz7a_89",bs="_hideWrap_1cz7a_99",_s="_selectedChoice_1cz7a_109",Ss="_showChoices_1cz7a_149",vs="_hideChoices_1cz7a_157",gs="_choicesBox_1cz7a_165",As="_contentWrapper_1cz7a_223",Ns="_subjectActs_1cz7a_267",Cs="_buttonWrapper_1cz7a_307",ws="_content_1cz7a_223",Bs="_selectAllButton_1cz7a_391",ks="_hideSelectAllButton_1cz7a_407",ys="_transparent_1cz7a_437",d={subConWrapper:hs,topComponent:ms,backButt:fs,right:js,wrapMenusButton:xs,wrap:ps,hideWrap:bs,selectedChoice:_s,showChoices:Ss,hideChoices:vs,choicesBox:gs,contentWrapper:As,subjectActs:Ns,buttonWrapper:Cs,content:ws,selectAllButton:Bs,hideSelectAllButton:ks,transparent:ys},$s="_showActDesc_ozrv6_1",Ds="_hideActDesc_ozrv6_29",Ps="_showActDescBox_ozrv6_37",Ws="_right_ozrv6_73",Ms="_stateWrapper_ozrv6_81",Es="_showButton_ozrv6_95",qs="_choices_ozrv6_103",zs="_hideChoices_ozrv6_105",Ts="_showInfo_ozrv6_115",Is="_highlight_ozrv6_141",Os="_unhighlight_ozrv6_161",Qs="_hideButton_ozrv6_173",M={showActDesc:$s,hideActDesc:Ds,showActDescBox:Ps,right:Ws,stateWrapper:Ms,showButton:Es,choices:qs,hideChoices:zs,showInfo:Ts,highlight:Is,unhighlight:Os,hideButton:Qs},Fs="_infoBox_xvtjn_1",Rs="_showInfoBox_xvtjn_21",Ls="_hideInfoBox_xvtjn_31",Hs="_animHideInfo_xvtjn_41",E={infoBox:Fs,showInfoBox:Rs,hideInfoBox:Ls,animHideInfo:Hs};function Us({showInfo:t,setShowInfo:o}){const{actDesc:c}=s.useContext(q);function i(l){const n=l.currentTarget.classList;n.contains(E.hideInfoBox)?(n.replace(`${E.hideInfoBox}`,`${E.animHideInfo}`),setTimeout(()=>{n.replace(`${E.animHideInfo}`,`${E.hideInfoBox}`)},1e3)):(n.add(`${E.animHideInfo}`),setTimeout(()=>{n.replace(`${E.animHideInfo}`,`${E.hideInfoBox}`)},1e3)),o(!1)}return e.jsx(e.Fragment,{children:e.jsx("div",{className:t?`${E.infoBox} ${E.showInfoBox}`:`${E.infoBox} ${E.hideInfoBox}`,onMouseLeave:i,children:e.jsxs("ul",{children:[e.jsxs("li",{children:["Created At: ",c?.createdAt]}),e.jsxs("li",{children:["Deadline: ",c?.dueDate]}),e.jsxs("li",{children:["Semester: ",c?.semester," Sem"]}),e.jsxs("li",{children:["Quarter: ",c?.quarter," Quarter"]}),e.jsxs("li",{children:["Type: ",c?.typeOfWork]})]})})})}function Zs(){const{actDesc:t,showActDesc:o,setShowActDesc:c,setActDesc:i,defineTypeOfWork:l}=s.useContext(q),[n,_]=s.useState(!1),[f,x]=s.useState(!1);return e.jsx(e.Fragment,{children:e.jsx("div",{className:o?M.showActDesc:M.hideActDesc,children:e.jsxs("div",{className:o?M.showActDescBox:M.hideActDescBox,children:[e.jsxs("h2",{children:["Description",e.jsxs("div",{className:M.right,children:[e.jsxs("div",{className:M.stateWrapper,children:[e.jsx("button",{className:M.showButton,onClick:()=>{_(!n)},children:e.jsx("i",{className:"fa fa-navicon"})}),e.jsxs("div",{className:n?M.choices:M.hideChoices,children:[e.jsx("button",{className:t?.status=="completed"?M.highlight:M.unhighlight,onClick:()=>{t&&l(!1,"completed",t)},children:"Finish"}),e.jsx("button",{className:t?.status=="pending"?M.highlight:M.unhighlight,onClick:()=>{t&&l(!1,"pending",t)},children:"Pending"}),e.jsxs("button",{className:M.showInfo,onClick:()=>{x(!f)},children:[e.jsx("i",{className:"fa fa-list-alt"}),e.jsx(Us,{showInfo:f,setShowInfo:x})]})]})]}),e.jsx("button",{onClick:()=>{c(!1),i(null)},className:M.hideButton,children:"X"})]})]}),e.jsx("h3",{children:t?.title}),e.jsx("p",{children:t?.description})]})})})}const Vs="_addSubjectWrapper_55ez4_1",Xs="_addSubjectBox_55ez4_29",Ys="_closeButton_55ez4_53",Gs="_top_55ez4_123",Js="_submit_55ez4_189",Y={addSubjectWrapper:Vs,addSubjectBox:Xs,closeButton:Ys,top:Gs,submit:Js},Ks="_subjectBox_1p62z_1",et="_choices_1p62z_51",st="_show_1p62z_87",tt="_subject_1p62z_1",ct="_status_1p62z_99",$={subjectBox:Ks,choices:et,show:st,subject:tt,status:ct};function nt({subject:t,setSubject:o}){const[c]=s.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[i,l]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:$.subName,children:"Subject"}),e.jsxs("button",{className:$.subjectBox,onClick:()=>{l(!i)},children:[t,e.jsx("i",{className:i?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:i?`${$.choices} ${$.show}`:$.choices,children:c.map(n=>e.jsx("li",{className:$.subject,onClick:()=>{o(n)},children:n},Math.random()*1))})]})]})}function at(){const{quarterAndSemChoices:t,quarter:o,setQuarter:c,semester:i,setSemester:l}=s.useContext(q),[n,_]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:$.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:$.subjectBox,onClick:()=>{_(!n)},children:[i+" Sem: "+o+" Quarter",e.jsx("i",{className:n?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:n?`${$.choices} ${$.show}`:$.choices,children:t.map(f=>e.jsx("li",{className:$.subject,onClick:()=>{c(f.quarter),l(f.sem)},children:f.sem+" Sem: "+f.quarter+" Quarter"},Math.random()*1))})]})]})}function it({status:t,setStatus:o}){const[c]=s.useState(["pending","completed"]),[i,l]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:$.subName,children:"Subject"}),e.jsxs("button",{className:$.subjectBox,onClick:()=>{l(!i)},children:[t,e.jsx("i",{className:i?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:i?`${$.choices} ${$.show}`:$.choices,children:c.map(n=>e.jsx("li",{className:$.status,onClick:()=>{o(n=="pending"?"pending":"completed")},children:n},Math.random()*1))})]})]})}function ot(){const{typeOfWork:t,showAddPrompt:o,setShowAddPrompt:c,setTypeOfWork:i,params:l,quarter:n,semester:_}=s.useContext(q),{userData:f}=s.useContext(J),[x,h]=s.useState(""),[S,m]=s.useState(""),[g,p]=s.useState(null),[w,k]=s.useState(l?.toUpperCase()),[v,y]=s.useState("pending");async function z(){const B=new Date,W={id:Math.random()*1,title:x,description:S,typeOfWork:t,status:v,createdBy:"Pajarillaga, Bryan",createdAt:`${B?.getFullYear()}-${B?.getMonth()}-${B?.getDate()}`,dueDate:g,subject:w,semester:_,quarter:n,isSelected:!1,timeCreated:Date.now()};try{const A=je(xe,"Main_Database","School_Activities");(await $e(A)).exists()?await re(A,{[t]:ke(W)}):await Oe(A,{[t]:ke(W)}),h(""),m(""),p(null),i(""),c(!1)}catch(A){A instanceof Qe&&console.log(A)}}if(s.useEffect(()=>{k(l)},[l]),o&&f?.user.status=="Owner")return e.jsx("div",{className:Y.addSubjectWrapper,children:e.jsxs("div",{className:Y.addSubjectBox,children:[e.jsx("button",{className:Y.closeButton,onClick:()=>{i(""),c(!1)},children:"X"}),e.jsxs("h1",{children:["Create ",t]}),e.jsxs("div",{className:Y.top,children:[e.jsx(nt,{subject:w,setSubject:k}),e.jsx(at,{}),e.jsx(it,{status:v,setStatus:y}),e.jsx("h2",{className:Y.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:B=>{console.log(B.currentTarget.value),p(B.currentTarget.value)}}),e.jsxs("h2",{className:Y.actTitle,children:[t," Title"]}),e.jsx("input",{type:"text",value:x,onChange:B=>{h(B.currentTarget.value)}}),e.jsxs("h2",{className:Y.actDesc,children:[t," Description"]}),e.jsx("textarea",{rows:5,value:S,onChange:B=>{m(B.currentTarget.value)}})]}),e.jsx("button",{className:Y.submit,onClick:z,children:"Submit"})]})})}const rt="_noActivities_1k7v8_1",lt="_showMenu_1k7v8_13",ut="_hideMenu_1k7v8_71",dt="_addActivity_1k7v8_79",ht="_hamWrapper_1k7v8_145",mt="_dropDownMenus_1k7v8_185",ft="_hideDropDown_1k7v8_237",ce={noActivities:rt,showMenu:lt,hideMenu:ut,addActivity:dt,hamWrapper:ht,dropDownMenus:mt,hideDropDown:ft};function jt({task:t}){const{setShowActDesc:o,setCanSelect:c,defineTypeOfWork:i,actDesc:l,menu:n,showMenu:_,menuPos:f,canSelect:x,handleRightClick:h,setActivities:S,setAssignments:m,setProjects:g,handleSelectAll:p,setShowEdit:w}=s.useContext(q),{userData:k}=s.useContext(J);function v(W){if(x)switch(t?.typeOfWork){case"Activity":S(A=>A?A.map(b=>b.id==t?.id?{...b,isSelected:W}:b):[]);break;case"Assignment":m(A=>A?A.map(b=>b.id==t?.id?{...b,isSelected:W}:b):[]);break;case"Project":g(A=>A?A.map(b=>b.id==t?.id?{...b,isSelected:W}:b):[]);break}}function y(W){switch(W){case 1:o(!0);break;case 2:c(!x),x&&(v(!1),p("All",!1));break;case 3:l&&i(!0,"pending",l);break;case 4:l&&i(!0,"completed",l);break;case 5:t?.isSelected?v(!1):v(!0);break;case 6:w(!0);break}}function z(){if(x)return e.jsxs("button",{onClick:()=>y(5),children:[e.jsx("i",{className:"fa fa-hand-o-up"}),l?.isSelected?"Unselect":"Select"]})}function B(){if(k?.user.status=="Owner")return e.jsxs("button",{onClick:()=>y(6),children:[e.jsx("i",{className:"	fa fa-edit"}),"Edit"]})}return e.jsxs("div",{ref:n,onClick:W=>h(W,null,!1),className:_?ce.showMenu:ce.hideMenu,style:{left:f.x,top:f.y},children:[e.jsxs("button",{onClick:()=>y(1),children:[e.jsx("i",{className:"fa fa-envelope-open"}),"Open"]}),e.jsx(B,{}),e.jsxs("button",{onClick:()=>y(2),children:[e.jsx("i",{className:x?"fa fa-close":"fa fa-hand-o-up"}),x?"Cancel":"Select"]}),e.jsx(z,{}),e.jsxs("button",{onClick:()=>y(3),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Pending"]}),e.jsxs("button",{onClick:()=>y(4),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Finish"]})]})}function xt(){const{setSortingType:t}=s.useContext(q),[o,c]=s.useState(!1),[i,l]=s.useState([{classname:"fa fa-ellipsis-h",functionName:"Pending"},{classname:"fa fa-check",functionName:"Completed"},{classname:"fa fa-sort-numeric-asc",functionName:"Newest-Oldest"},{classname:"fa fa-sort-numeric-desc",functionName:"Oldest-Newest"},{classname:"fa fa-sort-alpha-asc",functionName:"A-Z"},{classname:"fa fa-sort-alpha-desc",functionName:"Z-A"}]),[n,_]=s.useState({classname:"fa fa-sort-alpha-asc",functionName:"A-Z"});return s.useEffect(()=>{n&&t(n?.functionName)},[n]),e.jsxs("button",{className:ce.hamWrapper,onClick:()=>{c(!o)},children:[e.jsxs("p",{children:["Sort",e.jsx("i",{className:n?.classname}),e.jsx("i",{className:o?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("ul",{className:o?ce.dropDownMenus:ce.hideDropDown,children:i.map(f=>e.jsxs("li",{onClick:()=>{l(x=>x.map(h=>(f.functionName==h.functionName&&_(h),h)))},children:[e.jsx("i",{className:f.classname}),e.jsx("p",{children:f.functionName})]},f.functionName))})]})}function le({type:t}){const{userData:o}=s.useContext(J),{setTypeOfWork:c,setShowAddPrompt:i}=s.useContext(q);if(o?.user?.status=="Owner")return e.jsx("div",{className:ce.addActivity,onClick:()=>{c(t),i(!0)},children:e.jsx("h1",{children:"+"})})}const pt="_activity_19w5l_1",bt="_pendingActivity_19w5l_3",_t="_selected_19w5l_69",St="_notSelected_19w5l_71",ue={activity:pt,pendingActivity:bt,selected:_t,notSelected:St};function vt({task:t,handleRightClick:o,setActDesc:c}){const{canSelect:i,setActivities:l,setAssignments:n,setProjects:_}=s.useContext(q),f=()=>{if(i)return e.jsx("input",{type:"checkbox",checked:t?.isSelected,onChange:()=>{x(null)},className:t?.isSelected?ue.selected:ue.notSelected})};function x(h){i&&(l(S=>S?S.map(m=>m.id==h?.id?{...m,isSelected:!m.isSelected}:m):[]),n(S=>S?S.map(m=>m.id==h?.id?{...m,isSelected:!m.isSelected}:m):[]),_(S=>S?S.map(m=>m.id==h?.id?{...m,isSelected:!m.isSelected}:m):[]))}return e.jsxs("div",{id:`${t?.id}`,className:t?.status=="completed"?ue.activity:ue.pendingActivity,onContextMenu:h=>o(h,t,!1),onDoubleClick:h=>o(h,t,!0),onClick:()=>{c(t),x(t)},children:[e.jsx("h2",{children:t?.title}),e.jsx("p",{children:t?.description}),e.jsx(f,{})]})}const gt="_activitySkeleton_o3c77_1",At={activitySkeleton:gt};function Nt({count:t}){return e.jsx(e.Fragment,{children:Array.from({length:t}).map((o,c)=>e.jsx("div",{className:At.activitySkeleton},c))})}function de({typeOfWork:t,sortingType:o}){const{activities:c,assignments:i,projects:l,selectedChoice:n,handleRightClick:_,setActDesc:f,exams:x}=s.useContext(q),{userData:h}=s.useContext(J),S=t==="Activity"?c||[]:t==="Assignment"?i||[]:t==="Project"?l||[]:x||[],m=s.useMemo(()=>{let g=[...S];return o==="Newest-Oldest"?g.sort((p,w)=>w.timeCreated-p.timeCreated):o==="Oldest-Newest"?g.sort((p,w)=>p.timeCreated-w.timeCreated):o==="A-Z"?g.sort((p,w)=>(p.title||"").localeCompare(w.title||"")):o==="Z-A"?g.sort((p,w)=>(w.title||"").localeCompare(p.title||"")):o==="Pending"?g=g.filter(p=>p.status==="pending"):o==="Completed"&&(g=g.filter(p=>p.status==="completed")),g.filter(p=>p.quarter===n.quarter&&p.semester===n.sem)},[S,o,n]);if(h){if(h&&m.length!=0)return e.jsx(e.Fragment,{children:m.map(g=>e.jsx(vt,{task:g,handleRightClick:_,setActDesc:f},g.id||g.timeCreated))});if(h&&m.length==0)return e.jsxs("h2",{className:ce.noActivities,children:[t==="Activity"&&"There are no Activities!",t==="Assignment"&&"There are no Assignments!",t==="Project"&&"There are no Projects!",t==="Exam"&&"There are no Exam!"]})}else return e.jsx(Nt,{count:6})}const Ct="_addSubjectWrapper_55ez4_1",wt="_addSubjectBox_55ez4_29",Bt="_closeButton_55ez4_53",kt="_top_55ez4_123",yt="_submit_55ez4_189",G={addSubjectWrapper:Ct,addSubjectBox:wt,closeButton:Bt,top:kt,submit:yt},$t="_subjectBox_1p62z_1",Dt="_choices_1p62z_51",Pt="_show_1p62z_87",Wt="_subject_1p62z_1",Mt="_status_1p62z_99",D={subjectBox:$t,choices:Dt,show:Pt,subject:Wt,status:Mt};function Et({subject:t,setSubject:o}){const[c]=s.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[i,l]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:D.subName,children:"Subject"}),e.jsxs("button",{className:D.subjectBox,onClick:()=>{l(!i)},children:[t,e.jsx("i",{className:i?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:i?`${D.choices} ${D.show}`:D.choices,children:c.map(n=>e.jsx("li",{className:D.subject,onClick:()=>{o(n)},children:n},Math.random()*1))})]})]})}function qt(){const{quarterAndSemChoices:t,quarter:o,setQuarter:c,semester:i,setSemester:l}=s.useContext(q),[n,_]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:D.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:D.subjectBox,onClick:()=>{_(!n)},children:[i+" Sem: "+o+" Quarter",e.jsx("i",{className:n?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:n?`${D.choices} ${D.show}`:D.choices,children:t.map(f=>e.jsx("li",{className:D.subject,onClick:()=>{c(f.quarter),l(f.sem)},children:f.sem+" Sem: "+f.quarter+" Quarter"},Math.random()*1))})]})]})}function zt({status:t,setStatus:o}){const[c]=s.useState(["pending","completed"]),[i,l]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:D.subName,children:"Subject"}),e.jsxs("button",{className:D.subjectBox,onClick:()=>{l(!i)},children:[t,e.jsx("i",{className:i?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:i?`${D.choices} ${D.show}`:D.choices,children:c.map(n=>e.jsx("li",{className:D.status,onClick:()=>{o(n=="pending"?"pending":"completed")},children:n},Math.random()*1))})]})]})}function Tt(){const{typeOfWork:t,setTypeOfWork:o,params:c,quarter:i,semester:l,actDesc:n,showEdit:_,setShowEdit:f}=s.useContext(q),{userData:x}=s.useContext(J),[h,S]=s.useState(""),[m,g]=s.useState(""),[p,w]=s.useState(""),[k,v]=s.useState(c?.toUpperCase()),[y,z]=s.useState("pending"),[B,W]=s.useState("");async function A(){const b=new Date,T={id:B,title:h,description:m,typeOfWork:t,status:y,createdBy:"Pajarillaga, Bryan",createdAt:`${b?.getFullYear()}-${b?.getMonth()}-${b?.getDate()}`,dueDate:p,subject:k,semester:l,quarter:i,isSelected:!1,timeCreated:Date.now()},R=je(xe,"Main_Database","School_Activities"),H=(await $e(R)).data();if(H)switch(t){case"Activity":const U=H.Activity.map(j=>j.id==B?{...T,id:Math.random()*1}:{...j});await re(R,{[t]:U});break;case"Assignment":const I=H.Assignment.map(j=>j.id==B?{...T,id:Math.random()*1}:{...j});await re(R,{[t]:I});break;case"Project":const se=H.Project.map(j=>j.id==B?{...T,id:Math.random()*1}:{...j});await re(R,{[t]:se});break}f(!1)}if(s.useEffect(()=>{v(c)},[c]),s.useEffect(()=>{n&&(S(n.title),g(n.description),w(n.dueDate),z(n.status),W(n.id))},[n]),_&&x?.user.status=="Owner")return e.jsx("div",{className:G.addSubjectWrapper,children:e.jsxs("div",{className:G.addSubjectBox,children:[e.jsx("button",{className:G.closeButton,onClick:()=>{o(""),f(!1)},children:"X"}),e.jsxs("h1",{children:["Edit ",t]}),e.jsxs("div",{className:G.top,children:[e.jsx(Et,{subject:k,setSubject:v}),e.jsx(qt,{}),e.jsx(zt,{status:y,setStatus:z}),e.jsx("h2",{className:G.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:b=>{console.log(b.currentTarget.value),w(b.currentTarget.value)}}),e.jsxs("h2",{className:G.actTitle,children:[t," Title"]}),e.jsx("input",{type:"text",value:h,onChange:b=>{S(b.currentTarget.value)}}),e.jsxs("h2",{className:G.actDescription,children:[t," Description"]}),e.jsx("textarea",{rows:5,value:m,onChange:b=>{g(b.currentTarget.value)}})]}),e.jsx("button",{className:G.submit,onClick:A,children:"Submit"})]})})}const q=s.createContext({});function It({params:t,subjects:o}){const{userData:c,userObject:i,setUserData:l}=s.useContext(J),{selectedQuarter:n,selectedSemester:_}=s.useContext(pe),f=s.useRef(null),x=s.useRef(null),h=s.useRef(null),S=s.useRef(null),m=s.useRef(null),g=Fe(),p=Re(),[w,k]=s.useState(null),[v,y]=s.useState(null),[z,B]=s.useState(null),[W,A]=s.useState(null),[b,T]=s.useState(!1),[R,L]=s.useState(!1),[H,K]=s.useState(!1),[U,ee]=s.useState(!1),[I,ie]=s.useState(!1),[se,j]=s.useState(!1),[De,Pe]=s.useState(!1),[he,be]=s.useState(""),[Z,_e]=s.useState("2nd"),[We,Se]=s.useState("1st"),[oe,Me]=s.useState("Pending"),[ve,me]=s.useState(null),[Ee,ge]=s.useState({x:0,y:0}),[ne,ae]=s.useState({quarter:"2nd",sem:"1st"}),[V,O]=s.useState({Activity:!1,Assignment:!1,Project:!1,Exam:!1,Groupings:!1}),[Ae,Ne]=s.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]);function qe(r,N,a){a&&r.preventDefault(),L(!0),ge({x:r.clientX,y:r.clientY}),N&&(be(N.typeOfWork),me(N))}function ze(r,N,a){switch(he){case"Activity":u("activities");break;case"Assignment":u("assignments");break;case"Project":u("petas");break;case"Exam":u("exams");break}function u(P){l(fe=>{if(!fe)return null;const we=fe[P]?.map(F=>{if(a&&a.id===F.id)return{...a,status:N};const Be=w?.find(Ie=>Ie.id===F.id);return Be?.isSelected?(console.log(Be),{...F,status:N}):F})||[];return me(F=>!F||r?(console.log(a),null):{...F,status:N}),Ce(we,P),O(F=>({...F,[he]:!1})),{...fe,[P]:we}})}}function Q(r,N){if(I)switch(r){case"Activity":k(a=>a?a?.map(u=>({...u,isSelected:u.quarter==Z?N:!1})):[]);break;case"Assignment":y(a=>a?a?.map(u=>({...u,isSelected:u.quarter==Z?N:!1})):[]);break;case"Project":B(a=>a?a?.map(u=>({...u,isSelected:u.quarter==Z?N:!1})):[]);break;case"Exam":A(a=>a?a?.map(u=>({...u,isSelected:u.quarter==Z?N:!1})):[]);break;case"All":k(a=>a?a?.map(u=>({...u,isSelected:u.quarter==Z?N:!1})):[]),y(a=>a?a?.map(u=>({...u,isSelected:u.quarter==Z?N:!1})):[]),B(a=>a?a?.map(u=>({...u,isSelected:u.quarter==Z?N:!1})):[]);break}}async function Ce(r,N){try{if(r&&N){const a=je(xe,"McCarthy",`${i?.uid}`);await re(a,{[N]:r})}}catch{}}function X(r,N){switch(N){case"Activity":var a=x.current,u=208;a&&(r==!1?a.scrollBy({left:u,behavior:"smooth"}):a.scrollBy({left:-u,behavior:"smooth"}));break;case"Assignment":var a=h.current,u=208;a&&(r==!1?a.scrollBy({left:u,behavior:"smooth"}):a.scrollBy({left:-u,behavior:"smooth"}));break;case"Project":var a=S.current,u=208;a&&(r==!1?a.scrollBy({left:u,behavior:"smooth"}):a.scrollBy({left:-u,behavior:"smooth"}));break;case"Exam":var a=m.current,u=208;a&&(r==!1?a.scrollBy({left:u,behavior:"smooth"}):a.scrollBy({left:-u,behavior:"smooth"}));break}}s.useEffect(()=>{(c?.activities!=null||c?.assignments!=null||c?.petas!=null)&&(k(c.activities.filter(r=>r.subject===t)),y(c.assignments.filter(r=>r.subject===t)),B(c.petas.filter(r=>r.subject===t)),A(c.exams.filter(r=>r.subject===t)))},[c,t]),s.useEffect(()=>{_e(ne.quarter),Se(ne.sem)},[ne]),s.useEffect(()=>{ae({quarter:n,sem:_})},[n,_]),s.useEffect(()=>{if(p.hash&&w!=null){const r=p.hash.substring(1).split("#"),[N,a]=r;if(N&&document.getElementById(N)?.scrollIntoView({behavior:"smooth"}),a){const u=document.getElementById(a);switch(u?.scrollIntoView({behavior:"smooth"}),N){case"Activity":w?.map(P=>{P.id==a&&ae({quarter:P.quarter,sem:P.semester})});break;case"Assignment":v?.map(P=>{P.id==a&&ae({quarter:P.quarter,sem:P.semester})});break;case"Project":console.log("Project"),z?.map(P=>{P.id==a&&(console.log("Project"),ae({quarter:P.quarter,sem:P.semester}))});break}u&&setTimeout(()=>{g(`/subjects/${t}`)},1e3)}}},[p,w]);const Te={canSelect:I,setCanSelect:ie,showMenu:R,setShowMenu:L,showActDesc:H,showAddPrompt:U,setShowAddPrompt:ee,showEdit:De,setShowEdit:Pe,typeOfWork:he,setTypeOfWork:be,selectedChoice:ne,setSelectedChoice:ae,setShowActDesc:K,actDesc:ve,setActDesc:me,activities:w,setActivities:k,assignments:v,setAssignments:y,projects:z,setProjects:B,exams:W,setExams:A,quarterAndSemChoices:Ae,setQuarterAndSemChoices:Ne,quarter:Z,setQuarter:_e,semester:We,setSemester:Se,params:t,sortingType:oe,setSortingType:Me,menuPos:Ee,setMenuPos:ge,defineTypeOfWork:ze,handleRightClick:qe,handleSelectAll:Q,saveToDatabase:Ce,menu:f};if(t)return e.jsx(q.Provider,{value:Te,children:e.jsxs("div",{className:d.subConWrapper,onClick:()=>{L(!1)},children:[e.jsx(jt,{task:ve}),e.jsx(Zs,{}),e.jsx(ot,{}),e.jsx(Tt,{}),e.jsxs("div",{className:d.topComponent,children:[e.jsx(ye,{to:"/subjects",id:d.backButt,children:"Back"}),e.jsx("h1",{children:o.map(r=>r.subjectNameAbbreviation.toLowerCase()==t.toLowerCase()?r.subjectNameAbbreviation:"")}),e.jsxs("div",{className:d.right,children:[e.jsx("button",{className:d.wrapMenusButton,onClick:()=>{j(!se)},children:e.jsx("i",{className:"fa fa-bars"})}),e.jsxs("div",{className:se?d.wrap:d.hideWrap,children:[e.jsxs("div",{className:d.selectedChoice,children:[e.jsxs("button",{onClick:()=>{T(!b)},children:[ne.sem," Sem: ",ne.quarter," Quarter",e.jsx("i",{className:b?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("div",{className:b?`${d.choicesBox} ${d.showChoices}`:`${d.choicesBox} ${d.hideChoices}`,children:Ae.map((r,N)=>e.jsxs("button",{onClick:()=>{Ne(a=>a.map((u,P)=>(N==P&&ae(u),u))),T(!1)},children:[r.sem," Sem: ",r.quarter," Quarter"]},Math.random()*1))})]}),e.jsx(xt,{})]})]})]}),e.jsxs("div",{className:d.contentWrapper,children:[e.jsxs("div",{className:`${d.subjectActs} ${d.subjectActivities}`,id:"Activity",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Activities"}),e.jsxs("div",{className:d.buttonWrapper,children:[e.jsx("button",{onClick:()=>{X(!0,"Activity")},children:e.jsx("i",{className:"	fa fa-angle-left"})}),e.jsx("button",{onClick:()=>{X(!1,"Activity")},children:e.jsx("i",{className:"	fa fa-angle-right"})})]})]}),e.jsxs("div",{ref:x,className:d.content,children:[e.jsx(le,{type:"Activity"},Math.random()*1),e.jsx("button",{className:I?d.selectAllButton:d.hideSelectAllButton,onClick:()=>{V.Activity?(Q("Activity",!1),O(r=>({...r,Activity:!1}))):(Q("Activity",!0),O(r=>({...r,Activity:!0})))},children:e.jsx("i",{className:V.Activity?"fa fa-check":d.transparent})}),e.jsx(de,{typeOfWork:"Activity",sortingType:oe})]})]}),e.jsxs("div",{className:`${d.subjectActs} ${d.subjectAssignments}`,id:"Assignment",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Assignment"}),e.jsxs("div",{className:d.buttonWrapper,children:[e.jsx("button",{onClick:()=>{X(!0,"Assignment")},children:e.jsx("i",{className:"	fa fa-angle-left"})}),e.jsx("button",{onClick:()=>{X(!1,"Assignment")},children:e.jsx("i",{className:"	fa fa-angle-right"})})]})]}),e.jsxs("div",{ref:h,className:d.content,children:[e.jsx(le,{type:"Assignment"},Math.random()*1),e.jsx("button",{className:I?d.selectAllButton:d.hideSelectAllButton,onClick:()=>{V.Assignment?(Q("Assignment",!1),O(r=>({...r,Assignment:!1}))):(Q("Assignment",!0),O(r=>({...r,Assignment:!0})))},children:e.jsx("i",{className:V.Assignment?"fa fa-check":d.transparent})}),e.jsx(de,{typeOfWork:"Assignment",sortingType:oe})]})]}),e.jsxs("div",{className:`${d.subjectActs} ${d.subjectProjects}`,id:"Project",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Performance Tasks"}),e.jsxs("div",{className:d.buttonWrapper,children:[e.jsx("button",{onClick:()=>{X(!0,"Project")},children:e.jsx("i",{className:"	fa fa-angle-left"})}),e.jsx("button",{onClick:()=>{X(!1,"Project")},children:e.jsx("i",{className:"	fa fa-angle-right"})})]})]}),e.jsxs("div",{ref:S,className:d.content,children:[e.jsx(le,{type:"Project"},Math.random()*1),e.jsx("button",{className:I?d.selectAllButton:d.hideSelectAllButton,onClick:()=>{V.Project?(Q("Project",!1),O(r=>({...r,Project:!1}))):(Q("Project",!0),O(r=>({...r,Project:!0})))},children:e.jsx("i",{className:V.Project?"fa fa-check":d.transparent})}),e.jsx(de,{typeOfWork:"Project",sortingType:oe})]})]}),e.jsxs("div",{className:`${d.subjectActs} ${d.subjectActivities}`,id:"Exam",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Exams And Quizes"}),e.jsxs("div",{className:d.buttonWrapper,children:[e.jsx("button",{onClick:()=>{X(!0,"Exam")},children:e.jsx("i",{className:"	fa fa-angle-left"})}),e.jsx("button",{onClick:()=>{X(!1,"Exam")},children:e.jsx("i",{className:"	fa fa-angle-right"})})]})]}),e.jsxs("div",{ref:m,className:d.content,children:[e.jsx(le,{type:"Exam"},Math.random()*1),e.jsx("button",{className:I?d.selectAllButton:d.hideSelectAllButton,onClick:()=>{V.Exam?(Q("Exam",!1),O(r=>({...r,Exam:!1}))):(Q("Exam",!0),O(r=>({...r,Exam:!0})))},children:e.jsx("i",{className:V.Exam?"fa fa-check":d.transparent})}),e.jsx(de,{typeOfWork:"Exam",sortingType:oe})]})]})]})]})})}const pe=s.createContext(null);function Ft(){const{pageDetector:t,userObject:o}=s.useContext(J),{subjectName:c}=Le(),[i,l]=s.useState(!1),[n,_]=s.useState("2nd"),[f,x]=s.useState("1st"),[h]=s.useState(He),[S,m]=s.useState({quarter:"2nd",sem:"1st"}),[g]=s.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]),p=s.useRef(null),w=s.useRef(null);s.useEffect(()=>{t(null,1,!1)},[c]),s.useEffect(()=>{o?.uid?t(null,1,!1):t(0,null,!0)},[o]);const k={selectedQuarter:n,setSelectedQuarter:_,selectedSemester:f,setSelectedSemester:x};return e.jsx(pe.Provider,{value:k,children:c?e.jsx(It,{params:c,subjects:h}):e.jsxs("div",{ref:p,className:`${te.subjectsWrapper}`,children:[e.jsxs("header",{ref:w,id:"SubjectNavigation",className:`${te.top}`,children:[e.jsx("h1",{children:"Subjects"}),e.jsxs("div",{className:te.dropDownButton,onClick:()=>l(v=>!v),children:[S.sem," Semester: ",S.quarter," Quarter",e.jsx("i",{className:i?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("div",{className:i?`${te.choicesBox} ${te.showChoices}`:`${te.choicesBox} ${te.hideChoices}`,children:g.map(v=>e.jsxs("button",{onClick:()=>{m(v),_(v.quarter),x(v.sem)},children:[v.sem," Sem: ",v.quarter," Quarter"]},`${v.sem}-${v.quarter}`))})]})]}),e.jsx("section",{children:h.map(v=>e.jsx(ds,{subData:v},v.subjectTeacher))})]})})}export{pe as SubjectsContext,Ft as default};
