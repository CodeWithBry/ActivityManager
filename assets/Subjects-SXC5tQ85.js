import{r as s,c as ee,j as e,L as je,d as pe,f as xe,g as Ne,s as ge,a as fe,b as _e,F as we,u as Be,e as $e,h as De}from"./index-soPtUMsU.js";import{s as Pe}from"./subjects-Qvdm7Wki.js";const ke="_subjectsWrapper_1bbtx_1",qe="_top_1bbtx_31",ye="_dropDownButton_1bbtx_69",We="_showChoices_1bbtx_119",Me="_hideChoices_1bbtx_127",ze="_choicesBox_1bbtx_135",H={subjectsWrapper:ke,top:qe,dropDownButton:ye,showChoices:We,hideChoices:Me,choicesBox:ze},Oe="_subjectBox_1xvju_1",Ie="_topWrapper_1xvju_95",Fe="_subjectName_1xvju_217",Ee="_progressWrapper_1xvju_261",Qe="_progresses_1xvju_279",Te="_top_1xvju_95",Re="_bottom_1xvju_305",He="_barWrapper_1xvju_329",Le="_bar_1xvju_329",Ze="_openSubject_1xvju_357",b={subjectBox:Oe,topWrapper:Ie,subjectName:Fe,progressWrapper:Ee,progresses:Qe,top:Te,bottom:Re,barWrapper:He,bar:Le,openSubject:Ze};function Ue({subData:n}){const{userData:a}=s.useContext(ee),{selectedQuarter:i}=s.useContext(ue),[h,m]=s.useState(0),[o,_]=s.useState(0),[f,c]=s.useState(0),[t,u]=s.useState(0),[w,y]=s.useState(0),[P,$]=s.useState(0),[v,S]=s.useState(0),[g,D]=s.useState(0),[p,L]=s.useState(0),[k,te]=s.useState(),[X,F]=s.useState(),[Y,se]=s.useState();return s.useEffect(()=>{const E=h>0?o/h*100:0,Q=t>0?w/t*100:0,T=v>0?g/v*100:0;c(E),$(Q),L(T)},[h,o,t,w,v,g]),s.useEffect(()=>{if(i){const E=k?.filter(A=>A.subject==n.subjectNameAbbreviation&&i==A.quarter)?.length,Q=X?.filter(A=>A.subject==n.subjectNameAbbreviation&&i==A.quarter)?.length,T=Y?.filter(A=>A.subject==n.subjectNameAbbreviation&&i==A.quarter)?.length,W=k?.filter(A=>A.status=="completed"&&A.subject==n.subjectNameAbbreviation&&i==A.quarter)?.length,G=X?.filter(A=>A.status=="completed"&&A.subject==n.subjectNameAbbreviation&&i==A.quarter)?.length,ne=Y?.filter(A=>A.status=="completed"&&A.subject==n.subjectNameAbbreviation&&i==A.quarter)?.length;console.log(k),m(E||0),_(W||0),u(Q||0),y(G||0),S(T||0),D(ne||0)}},[i,k,X,Y]),s.useEffect(()=>{a&&(te(a.activities),F(a.assignments),se(a.petas))},[a]),e.jsxs("div",{className:`${b.subjectBox}`,children:[e.jsx("div",{className:b.topWrapper,children:e.jsx("h1",{className:b.subjectName,children:n.subjectNameAbbreviation})}),e.jsxs("div",{className:b.progressWrapper,children:[e.jsxs("div",{className:`${b.actWrapper} ${b.progresses}`,children:[e.jsxs("div",{className:b.top,children:[e.jsx("p",{children:"Activities:"}),e.jsxs("p",{className:b.completed,children:[o," Completed"]})]}),e.jsx("div",{className:b.bottom,children:e.jsx("div",{className:b.barWrapper,children:e.jsx("div",{className:b.bar,style:{width:`${f}%`}})})})]}),e.jsxs("div",{className:`${b.assignWrapper} ${b.progresses}`,children:[e.jsxs("div",{className:b.top,children:[e.jsx("p",{children:"Assignments:"}),e.jsxs("p",{className:b.completed,children:[w," Completed"]})]}),e.jsx("div",{className:b.bottom,children:e.jsx("div",{className:b.barWrapper,children:e.jsx("div",{className:b.bar,style:{width:`${P}%`}})})})]}),e.jsxs("div",{className:`${b.projWrapper} ${b.progresses}`,children:[e.jsxs("div",{className:b.top,children:[e.jsx("p",{children:"Performance Tasks:"}),e.jsxs("p",{className:b.completed,children:[g," Completed"]})]}),e.jsx("div",{className:b.bottom,children:e.jsx("div",{className:b.barWrapper,children:e.jsx("div",{className:b.bar,style:{width:`${p}%`}})})})]})]}),e.jsx(je,{to:"/subjects/"+n.subjectNameAbbreviation,className:b.openSubject,children:"Open Subject"})]})}const Ve="_subConWrapper_1fnzp_1",Xe="_topComponent_1fnzp_23",Ye="_backButt_1fnzp_1",Ge="_right_1fnzp_77",Je="_wrapMenusButton_1fnzp_89",Ke="_wrap_1fnzp_89",et="_hideWrap_1fnzp_99",tt="_selectedChoice_1fnzp_109",st="_showChoices_1fnzp_149",nt="_hideChoices_1fnzp_157",ct="_choicesBox_1fnzp_165",at="_contentWrapper_1fnzp_223",it="_subjectActs_1fnzp_267",ot="_content_1fnzp_223",rt="_selectAllButton_1fnzp_339",lt="_hideSelectAllButton_1fnzp_355",ut="_transparent_1fnzp_385",j={subConWrapper:Ve,topComponent:Xe,backButt:Ye,right:Ge,wrapMenusButton:Je,wrap:Ke,hideWrap:et,selectedChoice:tt,showChoices:st,hideChoices:nt,choicesBox:ct,contentWrapper:at,subjectActs:it,content:ot,selectAllButton:rt,hideSelectAllButton:lt,transparent:ut},dt="_showActDesc_ozrv6_1",ht="_hideActDesc_ozrv6_29",mt="_showActDescBox_ozrv6_37",ft="_right_ozrv6_73",jt="_stateWrapper_ozrv6_81",pt="_showButton_ozrv6_95",xt="_choices_ozrv6_103",_t="_hideChoices_ozrv6_105",bt="_showInfo_ozrv6_115",St="_highlight_ozrv6_141",At="_unhighlight_ozrv6_161",Ct="_hideButton_ozrv6_173",B={showActDesc:dt,hideActDesc:ht,showActDescBox:mt,right:ft,stateWrapper:jt,showButton:pt,choices:xt,hideChoices:_t,showInfo:bt,highlight:St,unhighlight:At,hideButton:Ct},vt="_infoBox_xvtjn_1",Nt="_showInfoBox_xvtjn_21",gt="_hideInfoBox_xvtjn_31",wt="_animHideInfo_xvtjn_41",q={infoBox:vt,showInfoBox:Nt,hideInfoBox:gt,animHideInfo:wt};function Bt({showInfo:n,setShowInfo:a}){const{actDesc:i}=s.useContext(M);function h(m){const o=m.currentTarget.classList;o.contains(q.hideInfoBox)?(o.replace(`${q.hideInfoBox}`,`${q.animHideInfo}`),setTimeout(()=>{o.replace(`${q.animHideInfo}`,`${q.hideInfoBox}`)},1e3)):(o.add(`${q.animHideInfo}`),setTimeout(()=>{o.replace(`${q.animHideInfo}`,`${q.hideInfoBox}`)},1e3)),a(!1)}return e.jsx(e.Fragment,{children:e.jsx("div",{className:n?`${q.infoBox} ${q.showInfoBox}`:`${q.infoBox} ${q.hideInfoBox}`,onMouseLeave:h,children:e.jsxs("ul",{children:[e.jsxs("li",{children:["Created At: ",i?.createdAt]}),e.jsxs("li",{children:["Deadline: ",i?.dueDate]}),e.jsxs("li",{children:["Semester: ",i?.semester," Sem"]}),e.jsxs("li",{children:["Quarter: ",i?.quarter," Quarter"]}),e.jsxs("li",{children:["Type: ",i?.typeOfWork]})]})})})}function $t(){const{actDesc:n,showActDesc:a,setShowActDesc:i,setActDesc:h,defineTypeOfWork:m}=s.useContext(M),[o,_]=s.useState(!1),[f,c]=s.useState(!1);return e.jsx(e.Fragment,{children:e.jsx("div",{className:a?B.showActDesc:B.hideActDesc,children:e.jsxs("div",{className:a?B.showActDescBox:B.hideActDescBox,children:[e.jsxs("h2",{children:["Description",e.jsxs("div",{className:B.right,children:[e.jsxs("div",{className:B.stateWrapper,children:[e.jsx("button",{className:B.showButton,onClick:()=>{_(!o)},children:e.jsx("i",{className:"fa fa-navicon"})}),e.jsxs("div",{className:o?B.choices:B.hideChoices,children:[e.jsx("button",{className:n?.status=="completed"?B.highlight:B.unhighlight,onClick:()=>{n&&m(!1,"completed")},children:"Finish"}),e.jsx("button",{className:n?.status=="pending"?B.highlight:B.unhighlight,onClick:()=>{n&&m(!1,"pending")},children:"Pending"}),e.jsxs("button",{className:B.showInfo,onClick:()=>{c(!f)},children:[e.jsx("i",{className:"fa fa-list-alt"}),e.jsx(Bt,{showInfo:f,setShowInfo:c})]})]})]}),e.jsx("button",{onClick:()=>{i(!1),h(null)},className:B.hideButton,children:"X"})]})]}),e.jsx("h3",{children:n?.title}),e.jsx("p",{children:n?.description})]})})})}const Dt="_addSubjectWrapper_qzsae_1",Pt="_addSubjectBox_qzsae_29",kt="_closeButton_qzsae_57",qt="_top_qzsae_123",yt="_submit_qzsae_189",I={addSubjectWrapper:Dt,addSubjectBox:Pt,closeButton:kt,top:qt,submit:yt},Wt="_subjectBox_1p62z_1",Mt="_choices_1p62z_51",zt="_show_1p62z_87",Ot="_subject_1p62z_1",It="_status_1p62z_99",N={subjectBox:Wt,choices:Mt,show:zt,subject:Ot,status:It};function Ft({subject:n,setSubject:a}){const[i]=s.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[h,m]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:N.subName,children:"Subject"}),e.jsxs("button",{className:N.subjectBox,onClick:()=>{m(!h)},children:[n,e.jsx("i",{className:h?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:h?`${N.choices} ${N.show}`:N.choices,children:i.map(o=>e.jsx("li",{className:N.subject,onClick:()=>{a(o)},children:o},Math.random()*1))})]})]})}function Et(){const{quarterAndSemChoices:n,quarter:a,setQuarter:i,semester:h,setSemester:m}=s.useContext(M),[o,_]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:N.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:N.subjectBox,onClick:()=>{_(!o)},children:[h+" Sem: "+a+" Quarter",e.jsx("i",{className:o?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:o?`${N.choices} ${N.show}`:N.choices,children:n.map(f=>e.jsx("li",{className:N.subject,onClick:()=>{i(f.quarter),m(f.sem)},children:f.sem+" Sem: "+f.quarter+" Quarter"},Math.random()*1))})]})]})}function Qt({status:n,setStatus:a}){const[i]=s.useState(["pending","completed"]),[h,m]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:N.subName,children:"Subject"}),e.jsxs("button",{className:N.subjectBox,onClick:()=>{m(!h)},children:[n,e.jsx("i",{className:h?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:h?`${N.choices} ${N.show}`:N.choices,children:i.map(o=>e.jsx("li",{className:N.status,onClick:()=>{a(o=="pending"?"pending":"completed")},children:o},Math.random()*1))})]})]})}function Tt(){const{typeOfWork:n,showAddPrompt:a,setShowAddPrompt:i,setTypeOfWork:h,params:m,quarter:o,semester:_}=s.useContext(M),{userData:f}=s.useContext(ee),[c,t]=s.useState(""),[u,w]=s.useState(""),[y,P]=s.useState(null),[$,v]=s.useState(m?.toUpperCase()),[S,g]=s.useState("pending");async function D(){const p=new Date,L={id:Math.random()*1,title:c,description:u,typeOfWork:n,status:S,createdBy:"Pajarillaga, Bryan",createdAt:`${p?.getFullYear()}-${p?.getMonth()}-${p?.getDate()}`,dueDate:y,subject:$,semester:_,quarter:o,isSelected:!1,timeCreated:Date.now()};try{const k=pe(xe,"Main_Database","School_Activities");(await Ne(k)).exists()?await _e(k,{[n]:fe(L)}):await ge(k,{[n]:fe(L)}),t(""),w(""),P(null),h(""),i(!1)}catch(k){k instanceof we&&console.log(k)}}if(s.useEffect(()=>{v(m)},[m]),a&&f?.user.status=="Owner")return e.jsx("div",{className:I.addSubjectWrapper,children:e.jsxs("div",{className:I.addSubjectBox,children:[e.jsx("button",{className:I.closeButton,onClick:()=>{h(""),i(!1)},children:"X"}),e.jsxs("h1",{children:["Create ",n]}),e.jsxs("div",{className:I.top,children:[e.jsx(Ft,{subject:$,setSubject:v}),e.jsx(Et,{}),e.jsx(Qt,{status:S,setStatus:g}),e.jsx("h2",{className:I.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:p=>{console.log(p.currentTarget.value),P(p.currentTarget.value)}}),e.jsxs("h2",{className:I.actTitle,children:[n," Title"]}),e.jsx("input",{type:"text",value:c,onChange:p=>{t(p.currentTarget.value)}}),e.jsxs("h2",{className:I.actDesc,children:[n," Description"]}),e.jsx("textarea",{rows:5,value:u,onChange:p=>{w(p.currentTarget.value)}})]}),e.jsx("button",{className:I.submit,onClick:D,children:"Submit"})]})})}const Rt="_noActivities_1bced_1",Ht="_showMenu_1bced_11",Lt="_hideMenu_1bced_69",Zt="_addActivity_1bced_77",Ut="_hamWrapper_1bced_143",Vt="_dropDownMenus_1bced_183",Xt="_hideDropDown_1bced_235",O={noActivities:Rt,showMenu:Ht,hideMenu:Lt,addActivity:Zt,hamWrapper:Ut,dropDownMenus:Vt,hideDropDown:Xt};function Yt({task:n}){const{setShowActDesc:a,setCanSelect:i,defineTypeOfWork:h,actDesc:m,menu:o,showMenu:_,menuPos:f,canSelect:c,handleRightClick:t,setActivities:u,setAssignments:w,setProjects:y,handleSelectAll:P}=s.useContext(M);function $(g){if(c)switch(n?.typeOfWork){case"Activity":u(D=>D?D.map(p=>p.id==n?.id?{...p,isSelected:g}:p):[]);break;case"Assignment":w(D=>D?D.map(p=>p.id==n?.id?{...p,isSelected:g}:p):[]);break;case"Project":y(D=>D?D.map(p=>p.id==n?.id?{...p,isSelected:g}:p):[]);break}}function v(g){switch(g){case 1:a(!0);break;case 2:i(!c),c&&($(!1),P("All",!1));break;case 3:m&&h(!0,"pending");break;case 4:m&&h(!0,"completed");break;case 5:n?.isSelected?$(!1):$(!0);break}}function S(){if(c)return e.jsxs("button",{onClick:()=>v(5),children:[e.jsx("i",{className:"fa fa-hand-o-up"}),m?.isSelected?"Unselect":"Select"]})}return e.jsxs("div",{ref:o,onClick:g=>t(g,null,!1),className:_?O.showMenu:O.hideMenu,style:{left:f.x,top:f.y},children:[e.jsxs("button",{onClick:()=>v(1),children:[e.jsx("i",{className:"fa fa-envelope-open"}),"Open"]}),e.jsxs("button",{onClick:()=>v(2),children:[e.jsx("i",{className:c?"fa fa-close":"fa fa-hand-o-up"}),c?"Cancel":"Select"]}),e.jsx(S,{}),e.jsxs("button",{onClick:()=>v(3),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Pending"]}),e.jsxs("button",{onClick:()=>v(4),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Finish"]})]})}function Gt(){const{setSortingType:n}=s.useContext(M),[a,i]=s.useState(!1),[h,m]=s.useState([{classname:"fa fa-ellipsis-h",functionName:"Pending"},{classname:"fa fa-check",functionName:"Completed"},{classname:"fa fa-sort-numeric-asc",functionName:"Newest-Oldest"},{classname:"fa fa-sort-numeric-desc",functionName:"Oldest-Newest"},{classname:"fa fa-sort-alpha-asc",functionName:"A-Z"},{classname:"fa fa-sort-alpha-desc",functionName:"Z-A"}]),[o,_]=s.useState({classname:"fa fa-sort-alpha-asc",functionName:"A-Z"});return s.useEffect(()=>{o&&(console.log(o.functionName),n(o?.functionName))},[o]),e.jsxs("button",{className:O.hamWrapper,onClick:()=>{i(!a)},children:[e.jsxs("p",{children:["Sort",e.jsx("i",{className:o?.classname}),e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("ul",{className:a?O.dropDownMenus:O.hideDropDown,children:h.map(f=>e.jsxs("li",{onClick:()=>{m(c=>c.map(t=>(f.functionName==t.functionName&&_(t),t)))},children:[e.jsx("i",{className:f.classname}),e.jsx("p",{children:f.functionName})]},f.functionName))})]})}function oe({type:n}){const{userData:a}=s.useContext(ee),{setTypeOfWork:i,setShowAddPrompt:h}=s.useContext(M);if(a?.user?.status=="Owner")return e.jsx("div",{className:O.addActivity,onClick:()=>{i(n),h(!0)},children:e.jsx("h1",{children:"+"})})}const Jt="_activity_8kmf6_1",Kt="_pendingActivity_8kmf6_3",es="_selected_8kmf6_47",ts="_notSelected_8kmf6_49",ae={activity:Jt,pendingActivity:Kt,selected:es,notSelected:ts};function re({task:n,handleRightClick:a,setActDesc:i}){const{canSelect:h,setActivities:m}=s.useContext(M),o=()=>{if(h)return e.jsx("input",{type:"checkbox",checked:n?.isSelected,onChange:()=>{_(null)},className:n?.isSelected?ae.selected:ae.notSelected})};function _(f){h&&m(c=>c?c.map(t=>t.id==f?.id?{...t,isSelected:!t.isSelected}:t):[])}return e.jsxs("div",{id:`${n?.id}`,className:n?.status=="completed"?ae.activity:ae.pendingActivity,onContextMenu:f=>a(f,n,!1),onDoubleClick:f=>a(f,n,!0),onClick:()=>{i(n),_(n)},children:[e.jsx("h2",{children:n?.title}),e.jsx("p",{children:n?.description}),e.jsx(o,{})]})}function le({typeOfWork:n,sortingType:a}){const{activities:i,assignments:h,projects:m,selectedChoice:o,handleRightClick:_,setActDesc:f}=s.useContext(M);if(n=="Activity"){let c=[...i||[]];return a==="Newest-Oldest"?c.sort((t,u)=>u.timeCreated-t.timeCreated):a==="Oldest-Newest"?c.sort((t,u)=>t.timeCreated-u.timeCreated):a==="A-Z"?c.sort((t,u)=>(t.title||"").localeCompare(u.title||"")):a==="Z-A"?c.sort((t,u)=>(u.title||"").localeCompare(t.title||"")):a=="Pending"?c=c.filter(t=>t.status=="pending"):a=="Completed"&&(c=c.filter(t=>t.status=="completed")),c=c.filter(t=>t.quarter==o.quarter),console.log(c),c.length!=0?e.jsx(e.Fragment,{children:c.filter(t=>t.quarter===o.quarter&&t.semester===o.sem).map(t=>e.jsx(re,{task:t,handleRightClick:_,setActDesc:f},t.id||t.timeCreated))}):e.jsx("h2",{className:O.noActivities,children:"There are no Activites!"})}else if(n=="Assignment"){let c=[...h||[]];return a==="Newest-Oldest"?c.sort((t,u)=>u.timeCreated-t.timeCreated):a==="Oldest-Newest"?c.sort((t,u)=>t.timeCreated-u.timeCreated):a==="A-Z"?c.sort((t,u)=>t.title.localeCompare(u.title)):a==="Z-A"?c.sort((t,u)=>u.title.localeCompare(t.title)):a=="Pending"?c=c.filter(t=>t.status=="pending"):a=="Completed"&&(c=c.filter(t=>t.status=="completed")),c=c.filter(t=>t.quarter==o.quarter),c.length!=0?e.jsx(e.Fragment,{children:c.filter(t=>t.quarter===o.quarter&&t.semester===o.sem).map(t=>(console.log(t.timeCreated),e.jsx(re,{task:t,handleRightClick:_,setActDesc:f},t.id||t.timeCreated)))}):e.jsx("h2",{className:O.noActivities,children:"There are no Assignments!"})}else if(n=="Project"){let c=[...m||[]];return a==="Newest-Oldest"?c.sort((t,u)=>u.timeCreated-t.timeCreated):a==="Oldest-Newest"?c.sort((t,u)=>t.timeCreated-u.timeCreated):a==="A-Z"?c.sort((t,u)=>(t.title||"").localeCompare(u.title||"")):a==="Z-A"?c.sort((t,u)=>(u.title||"").localeCompare(t.title||"")):a=="Pending"?c=c.filter(t=>t.status=="pending"):a=="Completed"&&(c=c.filter(t=>t.status=="completed")),c=c.filter(t=>t.quarter==o.quarter),c.length!=0?e.jsx(e.Fragment,{children:c.filter(t=>t.quarter===o.quarter&&t.semester===o.sem).map(t=>e.jsx(re,{task:t,handleRightClick:_,setActDesc:f},t.id||t.timeCreated))}):e.jsx("h2",{className:O.noActivities,children:"There are no Projects!"})}}const M=s.createContext({});function ss({params:n,subjects:a}){const{userData:i,userObject:h,setUserData:m}=s.useContext(ee),{selectedQuarter:o,selectedSemester:_}=s.useContext(ue),f=s.useRef(null),c=Be(),t=$e(),[u,w]=s.useState(null),[y,P]=s.useState(null),[$,v]=s.useState(null),[S,g]=s.useState(!1),[D,p]=s.useState(!1),[L,k]=s.useState(!1),[te,X]=s.useState(!1),[F,Y]=s.useState(!1),[se,E]=s.useState(!1),[Q,T]=s.useState(""),[W,G]=s.useState("2nd"),[ne,A]=s.useState("1st"),[J,K]=s.useState(null),[be,de]=s.useState({x:0,y:0}),[he,me]=s.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]),[Z,U]=s.useState({quarter:"2nd",sem:"1st"}),[V,z]=s.useState({Activity:!1,Assignment:!1,Project:!1}),[ce,Se]=s.useState("Pending");function Ae(d,C,r){r&&d.preventDefault(),p(!0),de({x:d.clientX,y:d.clientY}),C&&(console.log(r),T(C.typeOfWork),K(C))}function Ce(d,C){switch(Q){case"Activity":m(r=>r?(r?.activities.map(l=>(u?.map(x=>{l.id==x.id&&(x.isSelected||J?.id==x.id)&&(l.status=C,K(d?null:x))}),l)),ie(r.activities,"activities"),z(l=>({...l,Activity:!1})),r):null);break;case"Assignment":m(r=>r?(r?.assignments.map(l=>(y?.map(x=>{l.id==x.id&&(x.isSelected||J?.id==x.id)&&(l.status=C,K(d?null:x))}),l)),ie(r.assignments,"petas"),z(l=>({...l,Assignment:!1})),r):null);break;case"Project":m(r=>r?(r?.petas.map(l=>($?.map(x=>{l.id==x.id&&(x.isSelected||J?.id==x.id)&&(l.status=C,K(d?null:x))}),l)),ie(r.petas,"petas"),z(l=>({...l,Project:!1})),r):null);break}}function R(d,C){if(F)switch(d){case"Activity":w(r=>r?r?.map(l=>({...l,isSelected:l.quarter==W?C:!1})):[]);break;case"Assignment":P(r=>r?r?.map(l=>({...l,isSelected:l.quarter==W?C:!1})):[]);break;case"Project":v(r=>r?r?.map(l=>({...l,isSelected:l.quarter==W?C:!1})):[]);break;case"All":w(r=>r?r?.map(l=>({...l,isSelected:l.quarter==W?C:!1})):[]),P(r=>r?r?.map(l=>({...l,isSelected:l.quarter==W?C:!1})):[]),v(r=>r?r?.map(l=>({...l,isSelected:l.quarter==W?C:!1})):[]);break}}async function ie(d,C){try{if(d&&C){const r=pe(xe,"McCarthy",`${h?.uid}`);await _e(r,{[C]:d})}}catch{}}s.useEffect(()=>{(i?.activities!=null||i?.assignments!=null||i?.petas!=null)&&(w(i.activities.filter(d=>d.subject===n)),P(i.assignments.filter(d=>d.subject===n)),v(i.petas.filter(d=>d.subject===n)))},[i,n]),s.useEffect(()=>{G(Z.quarter),A(Z.sem)},[Z]),s.useEffect(()=>{U({quarter:o,sem:_})},[o,_]),s.useEffect(()=>{if(t.hash&&u!=null){const d=t.hash.substring(1).split("#"),[C,r]=d;if(C&&document.getElementById(C)?.scrollIntoView({behavior:"smooth"}),r){const l=document.getElementById(r);switch(l?.scrollIntoView({behavior:"smooth"}),C){case"Activity":u?.map(x=>{x.id==r&&U({quarter:x.quarter,sem:x.semester})});break;case"Assignment":y?.map(x=>{x.id==r&&U({quarter:x.quarter,sem:x.semester})});break;case"Project":console.log("Project"),$?.map(x=>{x.id==r&&(console.log("Project"),U({quarter:x.quarter,sem:x.semester}))});break}l&&setTimeout(()=>{c(`/subjects/${n}`)},1e3)}}},[t,u]);const ve={canSelect:F,setCanSelect:Y,showMenu:D,setShowMenu:p,showActDesc:L,showAddPrompt:te,setShowAddPrompt:X,typeOfWork:Q,setTypeOfWork:T,selectedChoice:Z,setSelectedChoice:U,setShowActDesc:k,actDesc:J,setActDesc:K,activities:u,setActivities:w,assignments:y,setAssignments:P,projects:$,setProjects:v,quarterAndSemChoices:he,setQuarterAndSemChoices:me,quarter:W,setQuarter:G,semester:ne,setSemester:A,params:n,sortingType:ce,setSortingType:Se,menuPos:be,setMenuPos:de,defineTypeOfWork:Ce,handleRightClick:Ae,handleSelectAll:R,menu:f};if(n)return e.jsx(M.Provider,{value:ve,children:e.jsxs("div",{className:j.subConWrapper,onClick:()=>{p(!1)},children:[e.jsx(Yt,{task:J}),e.jsx($t,{}),e.jsx(Tt,{}),e.jsxs("div",{className:j.topComponent,children:[e.jsx(je,{to:"/subjects",id:j.backButt,children:"Back"}),e.jsx("h1",{children:a.map(d=>d.subjectNameAbbreviation.toLowerCase()==n.toLowerCase()?d.subjectNameAbbreviation:"")}),e.jsxs("div",{className:j.right,children:[e.jsx("button",{className:j.wrapMenusButton,onClick:()=>{E(!se)},children:e.jsx("i",{className:"fa fa-bars"})}),e.jsxs("div",{className:se?j.wrap:j.hideWrap,children:[e.jsxs("div",{className:j.selectedChoice,children:[e.jsxs("button",{onClick:()=>{g(!S)},children:[Z.sem," Sem: ",Z.quarter," Quarter",e.jsx("i",{className:S?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("div",{className:S?`${j.choicesBox} ${j.showChoices}`:`${j.choicesBox} ${j.hideChoices}`,children:he.map((d,C)=>e.jsxs("button",{onClick:()=>{me(r=>r.map((l,x)=>(C==x&&U(l),l))),g(!1)},children:[d.sem," Sem: ",d.quarter," Quarter"]},Math.random()*1))})]}),e.jsx(Gt,{})]})]})]}),e.jsxs("div",{className:j.contentWrapper,children:[e.jsxs("div",{className:`${j.subjectActs} ${j.subjectActivities}`,id:"Activity",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Activities"})]}),e.jsxs("div",{className:j.content,children:[e.jsx(oe,{type:"Activity"},Math.random()*1),e.jsx("button",{className:F?j.selectAllButton:j.hideSelectAllButton,onClick:()=>{V.Activity?(R("Activity",!1),z(d=>({...d,Activity:!1}))):(R("Activity",!0),z(d=>({...d,Activity:!0})))},children:e.jsx("i",{className:V.Activity?"fa fa-check":j.transparent})}),e.jsx(le,{typeOfWork:"Activity",sortingType:ce})]})]}),e.jsxs("div",{className:`${j.subjectActs} ${j.subjectAssignments}`,id:"Assignment",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Assignment"})]}),e.jsxs("div",{className:j.content,children:[e.jsx(oe,{type:"Assignment"},Math.random()*1),e.jsx("button",{className:F?j.selectAllButton:j.hideSelectAllButton,onClick:()=>{V.Assignment?(R("Assignment",!1),z(d=>({...d,Assignment:!1}))):(R("Assignment",!0),z(d=>({...d,Assignment:!0})))},children:e.jsx("i",{className:V.Assignment?"fa fa-check":j.transparent})}),e.jsx(le,{typeOfWork:"Assignment",sortingType:ce})]})]}),e.jsxs("div",{className:`${j.subjectActs} ${j.subjectProjects}`,id:"Project",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Performance Tasks"})]}),e.jsxs("div",{className:j.content,children:[e.jsx(oe,{type:"Project"},Math.random()*1),e.jsx("button",{className:F?j.selectAllButton:j.hideSelectAllButton,onClick:()=>{V.Project?(R("Project",!1),z(d=>({...d,Project:!1}))):(R("Project",!0),z(d=>({...d,Project:!0})))},children:e.jsx("i",{className:V.Project?"fa fa-check":j.transparent})}),e.jsx(le,{typeOfWork:"Project",sortingType:ce})]})]})]})]})})}const ue=s.createContext(null);function as(){const{pageDetector:n,userObject:a}=s.useContext(ee),{subjectName:i}=De(),[h,m]=s.useState(!1),[o,_]=s.useState("2nd"),[f,c]=s.useState("1st"),[t]=s.useState(Pe),[u,w]=s.useState({quarter:"2nd",sem:"1st"}),[y]=s.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]),P=s.useRef(null),$=s.useRef(null);s.useEffect(()=>{n(null,1,!1)},[i]),s.useEffect(()=>{a?.uid?n(null,1,!1):n(0,null,!0)},[a]);const v={selectedQuarter:o,setSelectedQuarter:_,selectedSemester:f,setSelectedSemester:c};return e.jsx(ue.Provider,{value:v,children:i?e.jsx(ss,{params:i,subjects:t}):e.jsxs("div",{ref:P,className:`${H.subjectsWrapper}`,children:[e.jsxs("header",{ref:$,id:"SubjectNavigation",className:`${H.top}`,children:[e.jsx("h1",{children:"Subjects"}),e.jsxs("div",{className:H.dropDownButton,onClick:()=>m(S=>!S),children:[u.sem," Semester: ",u.quarter," Quarter",e.jsx("i",{className:h?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("div",{className:h?`${H.choicesBox} ${H.showChoices}`:`${H.choicesBox} ${H.hideChoices}`,children:y.map(S=>e.jsxs("button",{onClick:()=>{w(S),_(S.quarter),c(S.sem)},children:[S.sem," Sem: ",S.quarter," Quarter"]},`${S.sem}-${S.quarter}`))})]})]}),e.jsx("section",{children:t.map(S=>e.jsx(Ue,{subData:S},S.subjectTeacher))})]})})}export{ue as SubjectsContext,as as default};
