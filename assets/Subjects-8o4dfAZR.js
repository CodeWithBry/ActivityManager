import{j as e,r as s,c as J,L as ye,d as xe,f as pe,g as $e,s as Re,a as ke,b as le,F as He,u as Le,e as Ue,h as Xe}from"./index-BIip9yxd.js";import{s as Ye}from"./subjects-Qvdm7Wki.js";const Ve="_subjectsWrapper_ceua6_1",Ze="_top_ceua6_23",Ge="_dropDownButton_ceua6_61",Je="_showChoices_ceua6_111",Ke="_hideChoices_ceua6_119",es="_choicesBox_ceua6_127",ce={subjectsWrapper:Ve,top:Ze,dropDownButton:Ge,showChoices:Je,hideChoices:Ke,choicesBox:es},ss="_subjectBox_1xvju_1",ts="_topWrapper_1xvju_95",ns="_subjectName_1xvju_217",cs="_progressWrapper_1xvju_261",as="_progresses_1xvju_279",is="_top_1xvju_95",os="_bottom_1xvju_305",rs="_barWrapper_1xvju_329",ls="_bar_1xvju_329",us="_openSubject_1xvju_357",w={subjectBox:ss,topWrapper:ts,subjectName:ns,progressWrapper:cs,progresses:as,top:is,bottom:os,barWrapper:rs,bar:ls,openSubject:us},ds="_subjectSkeletonBox_bnzn5_1",hs={subjectSkeletonBox:ds};function ms(){return e.jsx("div",{className:`${hs.subjectSkeletonBox}`})}function fs({subData:t}){const{userData:l}=s.useContext(J),{selectedQuarter:c}=s.useContext(be),[i,d]=s.useState(0),[a,b]=s.useState(0),[f,j]=s.useState(0),[_,S]=s.useState(0),[m,u]=s.useState(0),[P,x]=s.useState(0),[v,N]=s.useState(0),[k,E]=s.useState(0),[B,y]=s.useState(0),[C,g]=s.useState(),[z,R]=s.useState(),[H,L]=s.useState();return s.useEffect(()=>{const K=i>0?a/i*100:0,U=_>0?m/_*100:0,ee=v>0?k/v*100:0;j(K),x(U),y(ee)},[i,a,_,m,v,k]),s.useEffect(()=>{if(c){const K=C?.filter(p=>p.subject==t.subjectNameAbbreviation&&c==p.quarter)?.length,U=z?.filter(p=>p.subject==t.subjectNameAbbreviation&&c==p.quarter)?.length,ee=H?.filter(p=>p.subject==t.subjectNameAbbreviation&&c==p.quarter)?.length,O=C?.filter(p=>p.status=="completed"&&p.subject==t.subjectNameAbbreviation&&c==p.quarter)?.length,oe=z?.filter(p=>p.status=="completed"&&p.subject==t.subjectNameAbbreviation&&c==p.quarter)?.length,se=H?.filter(p=>p.status=="completed"&&p.subject==t.subjectNameAbbreviation&&c==p.quarter)?.length;d(K||0),b(O||0),S(U||0),u(oe||0),N(ee||0),E(se||0)}},[c,C,z,H]),s.useEffect(()=>{l&&(g(l.activities),R(l.assignments),L(l.petas))},[l]),C?e.jsxs("div",{className:`${w.subjectBox}`,children:[e.jsx("div",{className:w.topWrapper,children:e.jsx("h1",{className:w.subjectName,children:t.subjectNameAbbreviation})}),e.jsxs("div",{className:w.progressWrapper,children:[e.jsxs("div",{className:`${w.actWrapper} ${w.progresses}`,children:[e.jsxs("div",{className:w.top,children:[e.jsx("p",{children:"Activities:"}),e.jsx("p",{className:w.completed,children:i>=a&&i!=0?a+" out of "+i+" is Completed":"No Activity"})]}),e.jsx("div",{className:w.bottom,children:e.jsx("div",{className:w.barWrapper,children:e.jsx("div",{className:w.bar,style:{width:`${f}%`}})})})]}),e.jsxs("div",{className:`${w.assignWrapper} ${w.progresses}`,children:[e.jsxs("div",{className:w.top,children:[e.jsx("p",{children:"Assignments:"}),e.jsx("p",{className:w.completed,children:_>=m&&_!=0?m+" out of "+_+" is Completed":"No Assignment"})]}),e.jsx("div",{className:w.bottom,children:e.jsx("div",{className:w.barWrapper,children:e.jsx("div",{className:w.bar,style:{width:`${P}%`}})})})]}),e.jsxs("div",{className:`${w.projWrapper} ${w.progresses}`,children:[e.jsxs("div",{className:w.top,children:[e.jsx("p",{children:"Performance Tasks:"}),e.jsx("p",{className:w.completed,children:v>=k&&v!=0?k+" out of "+v+" is Completed":"No Projects"})]}),e.jsx("div",{className:w.bottom,children:e.jsx("div",{className:w.barWrapper,children:e.jsx("div",{className:w.bar,style:{width:`${B}%`}})})})]})]}),e.jsx(ye,{to:"/subjects/"+t.subjectNameAbbreviation,className:w.openSubject,children:"Open Subject"})]}):e.jsx(ms,{})}const js="_subConWrapper_faeli_1",xs="_topComponent_faeli_21",ps="_backButt_faeli_1",bs="_right_faeli_75",Ss="_wrapMenusButton_faeli_87",_s="_wrap_faeli_87",vs="_hideWrap_faeli_97",gs="_selectedChoice_faeli_107",Ns="_showChoices_faeli_147",As="_hideChoices_faeli_155",Cs="_choicesBox_faeli_163",ws="_contentWrapper_faeli_221",Bs="_subjectActs_faeli_257",ks="_buttonWrapper_faeli_297",ys="_content_faeli_221",$s="_selectAllButton_faeli_383",Ds="_hideSelectAllButton_faeli_399",Ps="_transparent_faeli_429",h={subConWrapper:js,topComponent:xs,backButt:ps,right:bs,wrapMenusButton:Ss,wrap:_s,hideWrap:vs,selectedChoice:gs,showChoices:Ns,hideChoices:As,choicesBox:Cs,contentWrapper:ws,subjectActs:Bs,buttonWrapper:ks,content:ys,selectAllButton:$s,hideSelectAllButton:Ds,transparent:Ps},Ws="_showActDesc_ozrv6_1",Ms="_hideActDesc_ozrv6_29",Es="_showActDescBox_ozrv6_37",qs="_right_ozrv6_73",Ts="_stateWrapper_ozrv6_81",zs="_showButton_ozrv6_95",Os="_choices_ozrv6_103",Is="_hideChoices_ozrv6_105",Qs="_showInfo_ozrv6_115",Fs="_highlight_ozrv6_141",Rs="_unhighlight_ozrv6_161",Hs="_hideButton_ozrv6_173",M={showActDesc:Ws,hideActDesc:Ms,showActDescBox:Es,right:qs,stateWrapper:Ts,showButton:zs,choices:Os,hideChoices:Is,showInfo:Qs,highlight:Fs,unhighlight:Rs,hideButton:Hs},Ls="_infoBox_xvtjn_1",Us="_showInfoBox_xvtjn_21",Xs="_hideInfoBox_xvtjn_31",Ys="_animHideInfo_xvtjn_41",q={infoBox:Ls,showInfoBox:Us,hideInfoBox:Xs,animHideInfo:Ys};function Vs({showInfo:t,setShowInfo:l}){const{actDesc:c}=s.useContext(T);function i(d){const a=d.currentTarget.classList;a.contains(q.hideInfoBox)?(a.replace(`${q.hideInfoBox}`,`${q.animHideInfo}`),setTimeout(()=>{a.replace(`${q.animHideInfo}`,`${q.hideInfoBox}`)},1e3)):(a.add(`${q.animHideInfo}`),setTimeout(()=>{a.replace(`${q.animHideInfo}`,`${q.hideInfoBox}`)},1e3)),l(!1)}return e.jsx(e.Fragment,{children:e.jsx("div",{className:t?`${q.infoBox} ${q.showInfoBox}`:`${q.infoBox} ${q.hideInfoBox}`,onMouseLeave:i,children:e.jsxs("ul",{children:[e.jsxs("li",{children:["Created At: ",c?.createdAt]}),e.jsxs("li",{children:["Deadline: ",c?.dueDate]}),e.jsxs("li",{children:["Semester: ",c?.semester," Sem"]}),e.jsxs("li",{children:["Quarter: ",c?.quarter," Quarter"]}),e.jsxs("li",{children:["Type: ",c?.typeOfWork]})]})})})}function Zs(){const{actDesc:t,showActDesc:l,setShowActDesc:c,setActDesc:i,defineTypeOfWork:d}=s.useContext(T),[a,b]=s.useState(!1),[f,j]=s.useState(!1);return e.jsx(e.Fragment,{children:e.jsx("div",{className:l?M.showActDesc:M.hideActDesc,children:e.jsxs("div",{className:l?M.showActDescBox:M.hideActDescBox,children:[e.jsxs("h2",{children:["Description",e.jsxs("div",{className:M.right,children:[e.jsxs("div",{className:M.stateWrapper,children:[e.jsx("button",{className:M.showButton,onClick:()=>{b(!a)},children:e.jsx("i",{className:"fa fa-navicon"})}),e.jsxs("div",{className:a?M.choices:M.hideChoices,children:[e.jsx("button",{className:t?.status=="completed"?M.highlight:M.unhighlight,onClick:()=>{t&&d(!1,"completed",t)},children:"Finish"}),e.jsx("button",{className:t?.status=="pending"?M.highlight:M.unhighlight,onClick:()=>{t&&d(!1,"pending",t)},children:"Pending"}),e.jsxs("button",{className:M.showInfo,onClick:()=>{j(!f)},children:[e.jsx("i",{className:"fa fa-list-alt"}),e.jsx(Vs,{showInfo:f,setShowInfo:j})]})]})]}),e.jsx("button",{onClick:()=>{c(!1),i(null)},className:M.hideButton,children:"X"})]})]}),e.jsx("h3",{children:t?.title}),e.jsx("p",{children:t?.description})]})})})}const Gs="_addSubjectWrapper_55ez4_1",Js="_addSubjectBox_55ez4_29",Ks="_closeButton_55ez4_53",et="_top_55ez4_123",st="_submit_55ez4_189",Z={addSubjectWrapper:Gs,addSubjectBox:Js,closeButton:Ks,top:et,submit:st},tt="_subjectBox_1p62z_1",nt="_choices_1p62z_51",ct="_show_1p62z_87",at="_subject_1p62z_1",it="_status_1p62z_99",$={subjectBox:tt,choices:nt,show:ct,subject:at,status:it};function ot({subject:t,setSubject:l}){const[c]=s.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[i,d]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:$.subName,children:"Subject"}),e.jsxs("button",{className:$.subjectBox,onClick:()=>{d(!i)},children:[t,e.jsx("i",{className:i?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:i?`${$.choices} ${$.show}`:$.choices,children:c.map(a=>e.jsx("li",{className:$.subject,onClick:()=>{l(a)},children:a},Math.random()*1))})]})]})}function rt(){const{quarterAndSemChoices:t,quarter:l,setQuarter:c,semester:i,setSemester:d}=s.useContext(T),[a,b]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:$.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:$.subjectBox,onClick:()=>{b(!a)},children:[i+" Sem: "+l+" Quarter",e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:a?`${$.choices} ${$.show}`:$.choices,children:t.map(f=>e.jsx("li",{className:$.subject,onClick:()=>{c(f.quarter),d(f.sem)},children:f.sem+" Sem: "+f.quarter+" Quarter"},Math.random()*1))})]})]})}function lt({status:t,setStatus:l}){const[c]=s.useState(["pending","completed"]),[i,d]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:$.subName,children:"Subject"}),e.jsxs("button",{className:$.subjectBox,onClick:()=>{d(!i)},children:[t,e.jsx("i",{className:i?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:i?`${$.choices} ${$.show}`:$.choices,children:c.map(a=>e.jsx("li",{className:$.status,onClick:()=>{l(a=="pending"?"pending":"completed")},children:a},Math.random()*1))})]})]})}function ut(){const{typeOfWork:t,showAddPrompt:l,setShowAddPrompt:c,setTypeOfWork:i,params:d,quarter:a,semester:b}=s.useContext(T),{userData:f}=s.useContext(J),[j,_]=s.useState(""),[S,m]=s.useState(""),[u,P]=s.useState(null),[x,v]=s.useState(d?.toUpperCase()),[N,k]=s.useState("pending");async function E(){const B=new Date,y={id:Math.random()*1,title:j,description:S,typeOfWork:t,status:N,createdBy:"Pajarillaga, Bryan",createdAt:`${B?.getFullYear()}-${B?.getMonth()}-${B?.getDate()}`,dueDate:u,subject:x,semester:b,quarter:a,isSelected:!1,timeCreated:Date.now()};try{const C=xe(pe,"Main_Database","School_Activities");(await $e(C)).exists()?await le(C,{[t]:ke(y)}):await Re(C,{[t]:ke(y)}),_(""),m(""),P(null),i(""),c(!1)}catch(C){C instanceof He&&console.log(C)}}if(s.useEffect(()=>{v(d)},[d]),l&&f?.user.status=="Owner")return e.jsx("div",{className:Z.addSubjectWrapper,children:e.jsxs("div",{className:Z.addSubjectBox,children:[e.jsx("button",{className:Z.closeButton,onClick:()=>{i(""),c(!1)},children:"X"}),e.jsxs("h1",{children:["Create ",t]}),e.jsxs("div",{className:Z.top,children:[e.jsx(ot,{subject:x,setSubject:v}),e.jsx(rt,{}),e.jsx(lt,{status:N,setStatus:k}),e.jsx("h2",{className:Z.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:B=>{console.log(B.currentTarget.value),P(B.currentTarget.value)}}),e.jsxs("h2",{className:Z.actTitle,children:[t," Title"]}),e.jsx("input",{type:"text",value:j,onChange:B=>{_(B.currentTarget.value)}}),e.jsxs("h2",{className:Z.actDesc,children:[t," Description"]}),e.jsx("textarea",{rows:5,value:S,onChange:B=>{m(B.currentTarget.value)}})]}),e.jsx("button",{className:Z.submit,onClick:E,children:"Submit"})]})})}const dt="_noActivities_u5p8f_1",ht="_showMenu_u5p8f_13",mt="_hideMenu_u5p8f_71",ft="_addActivity_u5p8f_79",jt="_hamWrapper_u5p8f_145",xt="_dropDownMenus_u5p8f_185",pt="_hideDropDown_u5p8f_237",ae={noActivities:dt,showMenu:ht,hideMenu:mt,addActivity:ft,hamWrapper:jt,dropDownMenus:xt,hideDropDown:pt};function bt({task:t}){const{setShowActDesc:l,setCanSelect:c,defineTypeOfWork:i,actDesc:d,menu:a,showMenu:b,menuPos:f,canSelect:j,handleRightClick:_,setActivities:S,setAssignments:m,setProjects:u,handleSelectAll:P,setShowEdit:x}=s.useContext(T),{userData:v}=s.useContext(J);function N(y){if(j)switch(t?.typeOfWork){case"Activity":S(C=>C?C.map(g=>g.id==t?.id?{...g,isSelected:y}:g):[]);break;case"Assignment":m(C=>C?C.map(g=>g.id==t?.id?{...g,isSelected:y}:g):[]);break;case"Project":u(C=>C?C.map(g=>g.id==t?.id?{...g,isSelected:y}:g):[]);break}}function k(y){switch(y){case 1:l(!0);break;case 2:c(!j),j&&(N(!1),P("All",!1));break;case 3:d&&i(!0,"pending",d);break;case 4:d&&i(!0,"completed",d);break;case 5:t?.isSelected?N(!1):N(!0);break;case 6:x(!0);break}}function E(){if(j)return e.jsxs("button",{onClick:()=>k(5),children:[e.jsx("i",{className:"fa fa-hand-o-up"}),d?.isSelected?"Unselect":"Select"]})}function B(){if(v?.user.status=="Owner")return e.jsxs("button",{onClick:()=>k(6),children:[e.jsx("i",{className:"	fa fa-edit"}),"Edit"]})}return e.jsxs("div",{ref:a,onClick:y=>_(y,null,!1),className:b?ae.showMenu:ae.hideMenu,style:{left:f.x,top:f.y},children:[e.jsxs("button",{onClick:()=>k(1),children:[e.jsx("i",{className:"fa fa-envelope-open"}),"Open"]}),e.jsx(B,{}),e.jsxs("button",{onClick:()=>k(2),children:[e.jsx("i",{className:j?"fa fa-close":"fa fa-hand-o-up"}),j?"Cancel":"Select"]}),e.jsx(E,{}),e.jsxs("button",{onClick:()=>k(3),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Pending"]}),e.jsxs("button",{onClick:()=>k(4),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Finish"]})]})}function St(){const{setSortingType:t,sortingType:l}=s.useContext(T),[c,i]=s.useState(!1),[d,a]=s.useState([{classname:"fa fa-ellipsis-h",functionName:"Pending"},{classname:"fa fa-check",functionName:"Completed"},{classname:"fa fa-sort-numeric-asc",functionName:"Newest-Oldest"},{classname:"fa fa-sort-numeric-desc",functionName:"Oldest-Newest"},{classname:"fa fa-sort-alpha-asc",functionName:"A-Z"},{classname:"fa fa-sort-alpha-desc",functionName:"Z-A"}]),[b,f]=s.useState({classname:"fa fa-sort-numeric-asc",functionName:l});return s.useEffect(()=>{b&&t(b?.functionName)},[b]),e.jsxs("button",{className:ae.hamWrapper,onClick:()=>{i(!c)},children:[e.jsxs("p",{children:["Sort",e.jsx("i",{className:b?.classname}),e.jsx("i",{className:c?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("ul",{className:c?ae.dropDownMenus:ae.hideDropDown,children:d.map(j=>e.jsxs("li",{onClick:()=>{a(_=>_.map(S=>(j.functionName==S.functionName&&f(S),S)))},children:[e.jsx("i",{className:j.classname}),e.jsx("p",{children:j.functionName})]},j.functionName))})]})}function ue({type:t}){const{userData:l}=s.useContext(J),{setTypeOfWork:c,setShowAddPrompt:i}=s.useContext(T);if(l?.user?.status=="Owner")return e.jsx("div",{className:ae.addActivity,onClick:()=>{c(t),i(!0)},children:e.jsx("h1",{children:"+"})})}const _t="_activity_1u0xz_1",vt="_pendingActivity_1u0xz_3",gt="_selected_1u0xz_67",Nt="_notSelected_1u0xz_69",de={activity:_t,pendingActivity:vt,selected:gt,notSelected:Nt};function At({task:t,handleRightClick:l,setActDesc:c}){const{canSelect:i,setActivities:d,setAssignments:a,setProjects:b,setExams:f}=s.useContext(T),j=()=>{if(i)return e.jsx("input",{type:"checkbox",checked:t?.isSelected,onChange:()=>{_(null)},className:t?.isSelected?de.selected:de.notSelected})};function _(S){i&&(d(m=>m?m.map(u=>u.id==S?.id?{...u,isSelected:!u.isSelected}:u):[]),a(m=>m?m.map(u=>u.id==S?.id?{...u,isSelected:!u.isSelected}:u):[]),b(m=>m?m.map(u=>u.id==S?.id?{...u,isSelected:!u.isSelected}:u):[]),f(m=>m?m.map(u=>u.id==S?.id?{...u,isSelected:!u.isSelected}:u):[]))}return e.jsxs("div",{id:`${t?.id}`,className:t?.status=="completed"?de.activity:de.pendingActivity,onContextMenu:S=>l(S,t,!1),onDoubleClick:S=>l(S,t,!0),onClick:()=>{c(t),_(t)},children:[e.jsx("h2",{children:t?.title}),e.jsx("p",{children:t?.description}),e.jsx(j,{})]})}const Ct="_activitySkeleton_o3c77_1",wt={activitySkeleton:Ct};function Bt({count:t}){return e.jsx(e.Fragment,{children:Array.from({length:t}).map((l,c)=>e.jsx("div",{className:wt.activitySkeleton},c))})}function he({typeOfWork:t,sortingType:l}){const{activities:c,assignments:i,projects:d,selectedChoice:a,handleRightClick:b,setActDesc:f,exams:j}=s.useContext(T),{userData:_}=s.useContext(J),S=t==="Activity"?c||[]:t==="Assignment"?i||[]:t==="Project"?d||[]:j||[],m=s.useMemo(()=>{let u=[...S];return l==="Newest-Oldest"?u.sort((x,v)=>v.timeCreated-x.timeCreated):l==="Oldest-Newest"?u.sort((x,v)=>x.timeCreated-v.timeCreated):l==="A-Z"?u.sort((x,v)=>(x.title||"").localeCompare(v.title||"")):l==="Z-A"?u.sort((x,v)=>(v.title||"").localeCompare(x.title||"")):l==="Pending"?u=u.filter(x=>x.status==="pending"):l==="Completed"&&(u=u.filter(x=>x.status==="completed")),u.filter(x=>x.quarter===a.quarter&&x.semester===a.sem)},[S,l,a]);if(_){if(_&&m.length!=0)return e.jsx(e.Fragment,{children:m.map(u=>e.jsx(At,{task:u,handleRightClick:b,setActDesc:f},u.id||u.timeCreated))});if(_&&m.length==0)return e.jsxs("h2",{className:ae.noActivities,children:[t==="Activity"&&"There are no Activities!",t==="Assignment"&&"There are no Assignments!",t==="Project"&&"There are no Projects!",t==="Exam"&&"There are no Exam!"]})}else return e.jsx(Bt,{count:6})}const kt="_addSubjectWrapper_55ez4_1",yt="_addSubjectBox_55ez4_29",$t="_closeButton_55ez4_53",Dt="_top_55ez4_123",Pt="_submit_55ez4_189",G={addSubjectWrapper:kt,addSubjectBox:yt,closeButton:$t,top:Dt,submit:Pt},Wt="_subjectBox_1p62z_1",Mt="_choices_1p62z_51",Et="_show_1p62z_87",qt="_subject_1p62z_1",Tt="_status_1p62z_99",D={subjectBox:Wt,choices:Mt,show:Et,subject:qt,status:Tt};function zt({subject:t,setSubject:l}){const[c]=s.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[i,d]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:D.subName,children:"Subject"}),e.jsxs("button",{className:D.subjectBox,onClick:()=>{d(!i)},children:[t,e.jsx("i",{className:i?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:i?`${D.choices} ${D.show}`:D.choices,children:c.map(a=>e.jsx("li",{className:D.subject,onClick:()=>{l(a)},children:a},Math.random()*1))})]})]})}function Ot(){const{quarterAndSemChoices:t,quarter:l,setQuarter:c,semester:i,setSemester:d}=s.useContext(T),[a,b]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:D.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:D.subjectBox,onClick:()=>{b(!a)},children:[i+" Sem: "+l+" Quarter",e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:a?`${D.choices} ${D.show}`:D.choices,children:t.map(f=>e.jsx("li",{className:D.subject,onClick:()=>{c(f.quarter),d(f.sem)},children:f.sem+" Sem: "+f.quarter+" Quarter"},Math.random()*1))})]})]})}function It({status:t,setStatus:l}){const[c]=s.useState(["pending","completed"]),[i,d]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:D.subName,children:"Subject"}),e.jsxs("button",{className:D.subjectBox,onClick:()=>{d(!i)},children:[t,e.jsx("i",{className:i?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:i?`${D.choices} ${D.show}`:D.choices,children:c.map(a=>e.jsx("li",{className:D.status,onClick:()=>{l(a=="pending"?"pending":"completed")},children:a},Math.random()*1))})]})]})}function Qt(){const{typeOfWork:t,setTypeOfWork:l,params:c,quarter:i,semester:d,actDesc:a,showEdit:b,setShowEdit:f}=s.useContext(T),{userData:j}=s.useContext(J),[_,S]=s.useState(""),[m,u]=s.useState(""),[P,x]=s.useState(""),[v,N]=s.useState(c?.toUpperCase()),[k,E]=s.useState("pending"),[B,y]=s.useState("");async function C(){const g=new Date,z={id:B,title:_,description:m,typeOfWork:t,status:k,createdBy:"Pajarillaga, Bryan",createdAt:`${g?.getFullYear()}-${g?.getMonth()}-${g?.getDate()}`,dueDate:P,subject:v,semester:d,quarter:i,isSelected:!1,timeCreated:Date.now()},R=xe(pe,"Main_Database","School_Activities"),L=(await $e(R)).data();if(L)switch(t){case"Activity":const U=L.Activity.map(p=>p.id==B?{...z,id:Math.random()*1}:{...p});await le(R,{[t]:U});break;case"Assignment":const O=L.Assignment.map(p=>p.id==B?{...z,id:Math.random()*1}:{...p});await le(R,{[t]:O});break;case"Project":const se=L.Project.map(p=>p.id==B?{...z,id:Math.random()*1}:{...p});await le(R,{[t]:se});break}f(!1)}if(s.useEffect(()=>{N(c)},[c]),s.useEffect(()=>{a&&(S(a.title),u(a.description),x(a.dueDate),E(a.status),y(a.id))},[a]),b&&j?.user.status=="Owner")return e.jsx("div",{className:G.addSubjectWrapper,children:e.jsxs("div",{className:G.addSubjectBox,children:[e.jsx("button",{className:G.closeButton,onClick:()=>{l(""),f(!1)},children:"X"}),e.jsxs("h1",{children:["Edit ",t]}),e.jsxs("div",{className:G.top,children:[e.jsx(zt,{subject:v,setSubject:N}),e.jsx(Ot,{}),e.jsx(It,{status:k,setStatus:E}),e.jsx("h2",{className:G.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:g=>{console.log(g.currentTarget.value),x(g.currentTarget.value)}}),e.jsxs("h2",{className:G.actTitle,children:[t," Title"]}),e.jsx("input",{type:"text",value:_,onChange:g=>{S(g.currentTarget.value)}}),e.jsxs("h2",{className:G.actDescription,children:[t," Description"]}),e.jsx("textarea",{rows:5,value:m,onChange:g=>{u(g.currentTarget.value)}})]}),e.jsx("button",{className:G.submit,onClick:C,children:"Submit"})]})})}const T=s.createContext({});function Ft({params:t,subjects:l}){const{userData:c,userObject:i,setUserData:d}=s.useContext(J),{selectedQuarter:a,selectedSemester:b}=s.useContext(be),f=s.useRef(null),j=s.useRef(null),_=s.useRef(null),S=s.useRef(null),m=s.useRef(null),u=Le(),P=Ue(),[x,v]=s.useState(null),[N,k]=s.useState(null),[E,B]=s.useState(null),[y,C]=s.useState(null),[g,z]=s.useState(!1),[R,H]=s.useState(!1),[L,K]=s.useState(!1),[U,ee]=s.useState(!1),[O,oe]=s.useState(!1),[se,p]=s.useState(!1),[De,Pe]=s.useState(!1),[me,Se]=s.useState(""),[X,_e]=s.useState("2nd"),[We,ve]=s.useState("1st"),[re,Me]=s.useState("Newest-Oldest"),[ge,fe]=s.useState(null),[Ee,Ne]=s.useState({x:0,y:0}),[ie,te]=s.useState({quarter:"2nd",sem:"1st"}),[Y,I]=s.useState({Activity:!1,Assignment:!1,Project:!1,Exam:!1,Groupings:!1}),[Ae,Ce]=s.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]);function qe(r,A,o){o&&r.preventDefault();const n=window.innerWidth,F=window.innerHeight;H(!0),Ne({x:r.clientX+160>n?r.clientX-(r.clientX+160-n):r.clientX,y:r.clientY+162.86>F?r.clientY-(r.clientY+162.86-F):r.clientY}),A&&(Se(A.typeOfWork),fe(A))}function Te(r,A,o){switch(me){case"Activity":n("activities");break;case"Assignment":n("assignments");break;case"Project":n("petas");break;case"Exam":n("exams");break}function n(F){d(je=>{if(!je)return null;const Be=je[F]?.map(W=>{if(o&&o.id===W.id)return{...o,status:A,isSelected:!1};const Oe=x?.find(ne=>ne.id===W.id),Ie=N?.find(ne=>ne.id===W.id),Qe=E?.find(ne=>ne.id===W.id),Fe=y?.find(ne=>ne.id===W.id);switch(F){case"activities":if(Oe?.isSelected)return{...W,status:A,isSelected:!1};break;case"assignments":if(Ie?.isSelected)return{...W,status:A,isSelected:!1};break;case"petas":if(Qe?.isSelected)return{...W,status:A,isSelected:!1};break;case"exams":if(Fe?.isSelected)return{...W,status:A,isSelected:!1};break}return W});return fe(W=>!W||r?null:{...W,status:A}),we(Be,F),I(W=>({...W,[me]:!1})),{...je,[F]:Be}})}}function Q(r,A){if(O)switch(r){case"Activity":v(o=>o?o?.map(n=>({...n,isSelected:n.quarter==X?A:!1})):[]);break;case"Assignment":k(o=>o?o?.map(n=>({...n,isSelected:n.quarter==X?A:!1})):[]);break;case"Project":B(o=>o?o?.map(n=>({...n,isSelected:n.quarter==X?A:!1})):[]);break;case"Exam":C(o=>o?o?.map(n=>({...n,isSelected:n.quarter==X?A:!1})):[]);break;case"All":v(o=>o?o?.map(n=>({...n,isSelected:n.quarter==X?A:!1})):[]),k(o=>o?o?.map(n=>({...n,isSelected:n.quarter==X?A:!1})):[]),B(o=>o?o?.map(n=>({...n,isSelected:n.quarter==X?A:!1})):[]);break}}async function we(r,A){const o=xe(pe,"McCarthy",`${i?.uid}`);await le(o,{[A]:r})}function V(r,A){switch(A){case"Activity":var o=j.current,n=208;o&&(r==!1?o.scrollBy({left:n,behavior:"smooth"}):o.scrollBy({left:-n,behavior:"smooth"}));break;case"Assignment":var o=_.current,n=208;o&&(r==!1?o.scrollBy({left:n,behavior:"smooth"}):o.scrollBy({left:-n,behavior:"smooth"}));break;case"Project":var o=S.current,n=208;o&&(r==!1?o.scrollBy({left:n,behavior:"smooth"}):o.scrollBy({left:-n,behavior:"smooth"}));break;case"Exam":var o=m.current,n=208;o&&(r==!1?o.scrollBy({left:n,behavior:"smooth"}):o.scrollBy({left:-n,behavior:"smooth"}));break}}s.useEffect(()=>{(c?.activities!=null||c?.assignments!=null||c?.petas!=null)&&(v(c.activities.filter(r=>r.subject===t)),k(c.assignments.filter(r=>r.subject===t)),B(c.petas.filter(r=>r.subject===t)),C(c.exams.filter(r=>r.subject===t)),console.log(c))},[c,t]),s.useEffect(()=>{_e(ie.quarter),ve(ie.sem)},[ie]),s.useEffect(()=>{te({quarter:a,sem:b})},[a,b]),s.useEffect(()=>{if(P.hash&&x!=null){const r=P.hash.substring(1).split("#"),[A,o]=r;if(A&&document.getElementById(A)?.scrollIntoView({behavior:"smooth"}),o){switch(A){case"Activity":x?.map(n=>{n.id==o&&te({quarter:n.quarter,sem:n.semester})});break;case"Assignment":N?.map(n=>{n.id==o&&te({quarter:n.quarter,sem:n.semester})});break;case"Project":E?.map(n=>{n.id==o&&te({quarter:n.quarter,sem:n.semester})});break;case"Exam":y?.map(n=>{n.id==o&&te({quarter:n.quarter,sem:n.semester})});break}setTimeout(()=>{const n=document.getElementById(o);n&&(n?.scrollIntoView({behavior:"smooth"}),n.style.backgroundColor="rgb(223, 223, 223)",n.style.scale="1.2"),n&&setTimeout(()=>{u(`/subjects/${t}`),n&&(n?.scrollIntoView({behavior:"smooth"}),n.style.backgroundColor="white",n.style.scale="1")},1e3)},500)}}},[P,x]);const ze={canSelect:O,setCanSelect:oe,showMenu:R,setShowMenu:H,showActDesc:L,showAddPrompt:U,setShowAddPrompt:ee,showEdit:De,setShowEdit:Pe,typeOfWork:me,setTypeOfWork:Se,selectedChoice:ie,setSelectedChoice:te,setShowActDesc:K,actDesc:ge,setActDesc:fe,activities:x,setActivities:v,assignments:N,setAssignments:k,projects:E,setProjects:B,exams:y,setExams:C,quarterAndSemChoices:Ae,setQuarterAndSemChoices:Ce,quarter:X,setQuarter:_e,semester:We,setSemester:ve,params:t,sortingType:re,setSortingType:Me,menuPos:Ee,setMenuPos:Ne,defineTypeOfWork:Te,handleRightClick:qe,handleSelectAll:Q,saveToDatabase:we,menu:f};if(t)return e.jsx(T.Provider,{value:ze,children:e.jsxs("div",{className:h.subConWrapper,onClick:()=>{H(!1)},children:[e.jsx(bt,{task:ge}),e.jsx(Zs,{}),e.jsx(ut,{}),e.jsx(Qt,{}),e.jsxs("div",{className:h.topComponent,children:[e.jsx(ye,{to:"/subjects",id:h.backButt,children:"Back"}),e.jsx("h1",{children:l.map(r=>r.subjectNameAbbreviation.toLowerCase()==t.toLowerCase()?r.subjectNameAbbreviation:"")}),e.jsxs("div",{className:h.right,children:[e.jsx("button",{className:h.wrapMenusButton,onClick:()=>{p(!se)},children:e.jsx("i",{className:"fa fa-bars"})}),e.jsxs("div",{className:se?h.wrap:h.hideWrap,children:[e.jsxs("div",{className:h.selectedChoice,children:[e.jsxs("button",{onClick:()=>{z(!g)},children:[ie.sem," Sem: ",ie.quarter," Quarter",e.jsx("i",{className:g?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("div",{className:g?`${h.choicesBox} ${h.showChoices}`:`${h.choicesBox} ${h.hideChoices}`,children:Ae.map((r,A)=>e.jsxs("button",{onClick:()=>{Ce(o=>o.map((n,F)=>(A==F&&te(n),n))),z(!1)},children:[r.sem," Sem: ",r.quarter," Quarter"]},Math.random()*1))})]}),e.jsx(St,{})]})]})]}),e.jsxs("div",{className:h.contentWrapper,children:[e.jsxs("div",{className:`${h.subjectActs} ${h.subjectActivities}`,id:"Activity",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Activities"}),e.jsxs("div",{className:h.buttonWrapper,children:[e.jsx("button",{onClick:()=>{V(!0,"Activity")},children:e.jsx("i",{className:"	fa fa-angle-left"})}),e.jsx("button",{onClick:()=>{V(!1,"Activity")},children:e.jsx("i",{className:"	fa fa-angle-right"})})]})]}),e.jsxs("div",{ref:j,className:h.content,children:[e.jsx(ue,{type:"Activity"},Math.random()*1),e.jsx("button",{className:O?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{Y.Activity?(Q("Activity",!1),I(r=>({...r,Activity:!1}))):(Q("Activity",!0),I(r=>({...r,Activity:!0})))},children:e.jsx("i",{className:Y.Activity?"fa fa-check":h.transparent})}),e.jsx(he,{typeOfWork:"Activity",sortingType:re})]})]}),e.jsxs("div",{className:`${h.subjectActs} ${h.subjectAssignments}`,id:"Assignment",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Assignment"}),e.jsxs("div",{className:h.buttonWrapper,children:[e.jsx("button",{onClick:()=>{V(!0,"Assignment")},children:e.jsx("i",{className:"	fa fa-angle-left"})}),e.jsx("button",{onClick:()=>{V(!1,"Assignment")},children:e.jsx("i",{className:"	fa fa-angle-right"})})]})]}),e.jsxs("div",{ref:_,className:h.content,children:[e.jsx(ue,{type:"Assignment"},Math.random()*1),e.jsx("button",{className:O?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{Y.Assignment?(Q("Assignment",!1),I(r=>({...r,Assignment:!1}))):(Q("Assignment",!0),I(r=>({...r,Assignment:!0})))},children:e.jsx("i",{className:Y.Assignment?"fa fa-check":h.transparent})}),e.jsx(he,{typeOfWork:"Assignment",sortingType:re})]})]}),e.jsxs("div",{className:`${h.subjectActs} ${h.subjectProjects}`,id:"Project",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Performance Tasks"}),e.jsxs("div",{className:h.buttonWrapper,children:[e.jsx("button",{onClick:()=>{V(!0,"Project")},children:e.jsx("i",{className:"	fa fa-angle-left"})}),e.jsx("button",{onClick:()=>{V(!1,"Project")},children:e.jsx("i",{className:"	fa fa-angle-right"})})]})]}),e.jsxs("div",{ref:S,className:h.content,children:[e.jsx(ue,{type:"Project"},Math.random()*1),e.jsx("button",{className:O?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{Y.Project?(Q("Project",!1),I(r=>({...r,Project:!1}))):(Q("Project",!0),I(r=>({...r,Project:!0})))},children:e.jsx("i",{className:Y.Project?"fa fa-check":h.transparent})}),e.jsx(he,{typeOfWork:"Project",sortingType:re})]})]}),e.jsxs("div",{className:`${h.subjectActs} ${h.subjectActivities}`,id:"Exam",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Exams And Quizes"}),e.jsxs("div",{className:h.buttonWrapper,children:[e.jsx("button",{onClick:()=>{V(!0,"Exam")},children:e.jsx("i",{className:"	fa fa-angle-left"})}),e.jsx("button",{onClick:()=>{V(!1,"Exam")},children:e.jsx("i",{className:"	fa fa-angle-right"})})]})]}),e.jsxs("div",{ref:m,className:h.content,children:[e.jsx(ue,{type:"Exam"},Math.random()*1),e.jsx("button",{className:O?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{Y.Exam?(Q("Exam",!1),I(r=>({...r,Exam:!1}))):(Q("Exam",!0),I(r=>({...r,Exam:!0})))},children:e.jsx("i",{className:Y.Exam?"fa fa-check":h.transparent})}),e.jsx(he,{typeOfWork:"Exam",sortingType:re})]})]})]})]})})}const be=s.createContext(null);function Lt(){const{pageDetector:t,userObject:l}=s.useContext(J),{subjectName:c}=Xe(),[i,d]=s.useState(!1),[a,b]=s.useState("2nd"),[f,j]=s.useState("1st"),[_]=s.useState(Ye),[S,m]=s.useState({quarter:"2nd",sem:"1st"}),[u]=s.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]),P=s.useRef(null),x=s.useRef(null);s.useEffect(()=>{t(null,1,!1)},[c]),s.useEffect(()=>{l?.uid?t(null,1,!1):t(0,null,!0)},[l]);const v={selectedQuarter:a,setSelectedQuarter:b,selectedSemester:f,setSelectedSemester:j};return e.jsx(be.Provider,{value:v,children:c?e.jsx(Ft,{params:c,subjects:_}):e.jsxs("div",{ref:P,className:`${ce.subjectsWrapper}`,children:[e.jsxs("header",{ref:x,id:"SubjectNavigation",className:`${ce.top}`,children:[e.jsx("h1",{children:"Subjects"}),e.jsxs("div",{className:ce.dropDownButton,onClick:()=>d(N=>!N),children:[S.sem," Semester: ",S.quarter," Quarter",e.jsx("i",{className:i?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("div",{className:i?`${ce.choicesBox} ${ce.showChoices}`:`${ce.choicesBox} ${ce.hideChoices}`,children:u.map(N=>e.jsxs("button",{onClick:()=>{m(N),b(N.quarter),j(N.sem)},children:[N.sem," Sem: ",N.quarter," Quarter"]},`${N.sem}-${N.quarter}`))})]})]}),e.jsx("section",{children:_.map(N=>e.jsx(fs,{subData:N},N.subjectTeacher))})]})})}export{be as SubjectsContext,Lt as default};
