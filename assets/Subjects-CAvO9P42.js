import{j as e,r as s,c as G,L as ye,d as xe,f as pe,g as $e,s as Re,a as ke,b as le,F as Le,u as He,e as Ue,h as Ve}from"./index-ChPyY7Br.js";import{s as Ze}from"./subjects-Qvdm7Wki.js";const Xe="_subjectsWrapper_ceua6_1",Ye="_top_ceua6_23",Ge="_dropDownButton_ceua6_61",Je="_showChoices_ceua6_111",Ke="_hideChoices_ceua6_119",es="_choicesBox_ceua6_127",ae={subjectsWrapper:Xe,top:Ye,dropDownButton:Ge,showChoices:Je,hideChoices:Ke,choicesBox:es},ss="_subjectBox_1xvju_1",ts="_topWrapper_1xvju_95",as="_subjectName_1xvju_217",ns="_progressWrapper_1xvju_261",cs="_progresses_1xvju_279",is="_top_1xvju_95",os="_bottom_1xvju_305",rs="_barWrapper_1xvju_329",ls="_bar_1xvju_329",us="_openSubject_1xvju_357",C={subjectBox:ss,topWrapper:ts,subjectName:as,progressWrapper:ns,progresses:cs,top:is,bottom:os,barWrapper:rs,bar:ls,openSubject:us},ds="_subjectSkeletonBox_bnzn5_1",hs={subjectSkeletonBox:ds};function ms(){return e.jsx("div",{className:`${hs.subjectSkeletonBox}`})}function fs({subData:t}){const{userData:r}=s.useContext(G),{selectedQuarter:n}=s.useContext(be),[o,d]=s.useState(0),[c,v]=s.useState(0),[m,x]=s.useState(0),[p,N]=s.useState(0),[f,u]=s.useState(0),[b,w]=s.useState(0),[k,g]=s.useState(0),[y,E]=s.useState(0),[B,$]=s.useState(0),[A,S]=s.useState(),[T,F]=s.useState(),[R,L]=s.useState();return s.useEffect(()=>{const J=o>0?c/o*100:0,H=p>0?f/p*100:0,K=k>0?y/k*100:0;x(J),w(H),$(K)},[o,c,p,f,k,y]),s.useEffect(()=>{if(n){const J=A?.filter(j=>j.subject==t.subjectNameAbbreviation&&n==j.quarter)?.length,H=T?.filter(j=>j.subject==t.subjectNameAbbreviation&&n==j.quarter)?.length,K=R?.filter(j=>j.subject==t.subjectNameAbbreviation&&n==j.quarter)?.length,I=A?.filter(j=>j.status=="completed"&&j.subject==t.subjectNameAbbreviation&&n==j.quarter)?.length,oe=T?.filter(j=>j.status=="completed"&&j.subject==t.subjectNameAbbreviation&&n==j.quarter)?.length,ee=R?.filter(j=>j.status=="completed"&&j.subject==t.subjectNameAbbreviation&&n==j.quarter)?.length;d(J||0),v(I||0),N(H||0),u(oe||0),g(K||0),E(ee||0)}},[n,A,T,R]),s.useEffect(()=>{r&&(S(r.activities),F(r.assignments),L(r.petas))},[r]),A?e.jsxs("div",{className:`${C.subjectBox}`,children:[e.jsx("div",{className:C.topWrapper,children:e.jsx("h1",{className:C.subjectName,children:t.subjectNameAbbreviation})}),e.jsxs("div",{className:C.progressWrapper,children:[e.jsxs("div",{className:`${C.actWrapper} ${C.progresses}`,children:[e.jsxs("div",{className:C.top,children:[e.jsx("p",{children:"Activities:"}),e.jsx("p",{className:C.completed,children:o>=c&&o!=0?c+" out of "+o+" is Completed":"No Activity"})]}),e.jsx("div",{className:C.bottom,children:e.jsx("div",{className:C.barWrapper,children:e.jsx("div",{className:C.bar,style:{width:`${m}%`}})})})]}),e.jsxs("div",{className:`${C.assignWrapper} ${C.progresses}`,children:[e.jsxs("div",{className:C.top,children:[e.jsx("p",{children:"Assignments:"}),e.jsx("p",{className:C.completed,children:p>=f&&p!=0?f+" out of "+p+" is Completed":"No Assignment"})]}),e.jsx("div",{className:C.bottom,children:e.jsx("div",{className:C.barWrapper,children:e.jsx("div",{className:C.bar,style:{width:`${b}%`}})})})]}),e.jsxs("div",{className:`${C.projWrapper} ${C.progresses}`,children:[e.jsxs("div",{className:C.top,children:[e.jsx("p",{children:"Performance Tasks:"}),e.jsx("p",{className:C.completed,children:k>=y&&k!=0?y+" out of "+k+" is Completed":"No Projects"})]}),e.jsx("div",{className:C.bottom,children:e.jsx("div",{className:C.barWrapper,children:e.jsx("div",{className:C.bar,style:{width:`${B}%`}})})})]})]}),e.jsx(ye,{to:"/subjects/"+t.subjectNameAbbreviation,className:C.openSubject,children:"Open Subject"})]}):e.jsx(ms,{})}const js="_subConWrapper_1loaj_1",xs="_topComponent_1loaj_21",ps="_backButt_1loaj_1",bs="_right_1loaj_75",Ss="_wrapMenusButton_1loaj_87",_s="_wrap_1loaj_87",vs="_hideWrap_1loaj_97",gs="_selectedChoice_1loaj_107",Ns="_showChoices_1loaj_147",As="_hideChoices_1loaj_155",Cs="_choicesBox_1loaj_163",ws="_contentWrapper_1loaj_221",Bs="_subjectActs_1loaj_257",ks="_buttonWrapper_1loaj_297",ys="_content_1loaj_221",$s="_selectAllButton_1loaj_383",Ds="_hideSelectAllButton_1loaj_399",Ps="_transparent_1loaj_429",h={subConWrapper:js,topComponent:xs,backButt:ps,right:bs,wrapMenusButton:Ss,wrap:_s,hideWrap:vs,selectedChoice:gs,showChoices:Ns,hideChoices:As,choicesBox:Cs,contentWrapper:ws,subjectActs:Bs,buttonWrapper:ks,content:ys,selectAllButton:$s,hideSelectAllButton:Ds,transparent:Ps},Ws="_showActDesc_ozrv6_1",Ms="_hideActDesc_ozrv6_29",Es="_showActDescBox_ozrv6_37",qs="_right_ozrv6_73",zs="_stateWrapper_ozrv6_81",Ts="_showButton_ozrv6_95",Is="_choices_ozrv6_103",Qs="_hideChoices_ozrv6_105",Os="_showInfo_ozrv6_115",Fs="_highlight_ozrv6_141",Rs="_unhighlight_ozrv6_161",Ls="_hideButton_ozrv6_173",M={showActDesc:Ws,hideActDesc:Ms,showActDescBox:Es,right:qs,stateWrapper:zs,showButton:Ts,choices:Is,hideChoices:Qs,showInfo:Os,highlight:Fs,unhighlight:Rs,hideButton:Ls},Hs="_infoBox_xvtjn_1",Us="_showInfoBox_xvtjn_21",Vs="_hideInfoBox_xvtjn_31",Zs="_animHideInfo_xvtjn_41",q={infoBox:Hs,showInfoBox:Us,hideInfoBox:Vs,animHideInfo:Zs};function Xs({showInfo:t,setShowInfo:r}){const{actDesc:n}=s.useContext(z);function o(d){const c=d.currentTarget.classList;c.contains(q.hideInfoBox)?(c.replace(`${q.hideInfoBox}`,`${q.animHideInfo}`),setTimeout(()=>{c.replace(`${q.animHideInfo}`,`${q.hideInfoBox}`)},1e3)):(c.add(`${q.animHideInfo}`),setTimeout(()=>{c.replace(`${q.animHideInfo}`,`${q.hideInfoBox}`)},1e3)),r(!1)}return e.jsx(e.Fragment,{children:e.jsx("div",{className:t?`${q.infoBox} ${q.showInfoBox}`:`${q.infoBox} ${q.hideInfoBox}`,onMouseLeave:o,children:e.jsxs("ul",{children:[e.jsxs("li",{children:["Created At: ",n?.createdAt]}),e.jsxs("li",{children:["Deadline: ",n?.dueDate]}),e.jsxs("li",{children:["Semester: ",n?.semester," Sem"]}),e.jsxs("li",{children:["Quarter: ",n?.quarter," Quarter"]}),e.jsxs("li",{children:["Type: ",n?.typeOfWork]})]})})})}function Ys(){const{actDesc:t,showActDesc:r,setShowActDesc:n,setActDesc:o,defineTypeOfWork:d}=s.useContext(z),[c,v]=s.useState(!1),[m,x]=s.useState(!1);return e.jsx(e.Fragment,{children:e.jsx("div",{className:r?M.showActDesc:M.hideActDesc,children:e.jsxs("div",{className:r?M.showActDescBox:M.hideActDescBox,children:[e.jsxs("h2",{children:["Description",e.jsxs("div",{className:M.right,children:[e.jsxs("div",{className:M.stateWrapper,children:[e.jsx("button",{className:M.showButton,onClick:()=>{v(!c)},children:e.jsx("i",{className:"fa fa-navicon"})}),e.jsxs("div",{className:c?M.choices:M.hideChoices,children:[e.jsx("button",{className:t?.status=="completed"?M.highlight:M.unhighlight,onClick:()=>{t&&d(!1,"completed",t)},children:"Finish"}),e.jsx("button",{className:t?.status=="pending"?M.highlight:M.unhighlight,onClick:()=>{t&&d(!1,"pending",t)},children:"Pending"}),e.jsxs("button",{className:M.showInfo,onClick:()=>{x(!m)},children:[e.jsx("i",{className:"fa fa-list-alt"}),e.jsx(Xs,{showInfo:m,setShowInfo:x})]})]})]}),e.jsx("button",{onClick:()=>{n(!1),o(null)},className:M.hideButton,children:"X"})]})]}),e.jsx("h3",{children:t?.title}),e.jsx("p",{children:t?.description})]})})})}const Gs="_addSubjectWrapper_55ez4_1",Js="_addSubjectBox_55ez4_29",Ks="_closeButton_55ez4_53",et="_top_55ez4_123",st="_submit_55ez4_189",X={addSubjectWrapper:Gs,addSubjectBox:Js,closeButton:Ks,top:et,submit:st},tt="_subjectBox_1p62z_1",at="_choices_1p62z_51",nt="_show_1p62z_87",ct="_subject_1p62z_1",it="_status_1p62z_99",D={subjectBox:tt,choices:at,show:nt,subject:ct,status:it};function ot({subject:t,setSubject:r}){const[n]=s.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[o,d]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:D.subName,children:"Subject"}),e.jsxs("button",{className:D.subjectBox,onClick:()=>{d(!o)},children:[t,e.jsx("i",{className:o?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:o?`${D.choices} ${D.show}`:D.choices,children:n.map(c=>e.jsx("li",{className:D.subject,onClick:()=>{r(c)},children:c},Math.random()*1))})]})]})}function rt(){const{quarterAndSemChoices:t,quarter:r,setQuarter:n,semester:o,setSemester:d}=s.useContext(z),[c,v]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:D.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:D.subjectBox,onClick:()=>{v(!c)},children:[o+" Sem: "+r+" Quarter",e.jsx("i",{className:c?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:c?`${D.choices} ${D.show}`:D.choices,children:t.map(m=>e.jsx("li",{className:D.subject,onClick:()=>{n(m.quarter),d(m.sem)},children:m.sem+" Sem: "+m.quarter+" Quarter"},Math.random()*1))})]})]})}function lt({status:t,setStatus:r}){const[n]=s.useState(["pending","completed"]),[o,d]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:D.subName,children:"Subject"}),e.jsxs("button",{className:D.subjectBox,onClick:()=>{d(!o)},children:[t,e.jsx("i",{className:o?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:o?`${D.choices} ${D.show}`:D.choices,children:n.map(c=>e.jsx("li",{className:D.status,onClick:()=>{r(c=="pending"?"pending":"completed")},children:c},Math.random()*1))})]})]})}function ut(){const{typeOfWork:t,showAddPrompt:r,setShowAddPrompt:n,setTypeOfWork:o,params:d,quarter:c,semester:v}=s.useContext(z),{userData:m}=s.useContext(G),[x,p]=s.useState(""),[N,f]=s.useState(""),[u,b]=s.useState(null),[w,k]=s.useState(d?.toUpperCase()),[g,y]=s.useState("pending");async function E(){const B=new Date,$={id:Math.random()*1,title:x,description:N,typeOfWork:t,status:g,createdBy:"Pajarillaga, Bryan",createdAt:`${B?.getFullYear()}-${B?.getMonth()}-${B?.getDate()}`,dueDate:u,subject:w,semester:v,quarter:c,isSelected:!1,timeCreated:Date.now()};try{const A=xe(pe,"Main_Database","School_Activities");(await $e(A)).exists()?await le(A,{[t]:ke($)}):await Re(A,{[t]:ke($)}),p(""),f(""),b(null),o(""),n(!1)}catch(A){A instanceof Le&&console.log(A)}}if(s.useEffect(()=>{k(d)},[d]),r&&m?.user.status=="Owner")return e.jsx("div",{className:X.addSubjectWrapper,children:e.jsxs("div",{className:X.addSubjectBox,children:[e.jsx("button",{className:X.closeButton,onClick:()=>{o(""),n(!1)},children:"X"}),e.jsxs("h1",{children:["Create ",t]}),e.jsxs("div",{className:X.top,children:[e.jsx(ot,{subject:w,setSubject:k}),e.jsx(rt,{}),e.jsx(lt,{status:g,setStatus:y}),e.jsx("h2",{className:X.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:B=>{console.log(B.currentTarget.value),b(B.currentTarget.value)}}),e.jsxs("h2",{className:X.actTitle,children:[t," Title"]}),e.jsx("input",{type:"text",value:x,onChange:B=>{p(B.currentTarget.value)}}),e.jsxs("h2",{className:X.actDesc,children:[t," Description"]}),e.jsx("textarea",{rows:5,value:N,onChange:B=>{f(B.currentTarget.value)}})]}),e.jsx("button",{className:X.submit,onClick:E,children:"Submit"})]})})}const dt="_noActivities_1k7v8_1",ht="_showMenu_1k7v8_13",mt="_hideMenu_1k7v8_71",ft="_addActivity_1k7v8_79",jt="_hamWrapper_1k7v8_145",xt="_dropDownMenus_1k7v8_185",pt="_hideDropDown_1k7v8_237",ne={noActivities:dt,showMenu:ht,hideMenu:mt,addActivity:ft,hamWrapper:jt,dropDownMenus:xt,hideDropDown:pt};function bt({task:t}){const{setShowActDesc:r,setCanSelect:n,defineTypeOfWork:o,actDesc:d,menu:c,showMenu:v,menuPos:m,canSelect:x,handleRightClick:p,setActivities:N,setAssignments:f,setProjects:u,handleSelectAll:b,setShowEdit:w}=s.useContext(z),{userData:k}=s.useContext(G);function g($){if(x)switch(t?.typeOfWork){case"Activity":N(A=>A?A.map(S=>S.id==t?.id?{...S,isSelected:$}:S):[]);break;case"Assignment":f(A=>A?A.map(S=>S.id==t?.id?{...S,isSelected:$}:S):[]);break;case"Project":u(A=>A?A.map(S=>S.id==t?.id?{...S,isSelected:$}:S):[]);break}}function y($){switch($){case 1:r(!0);break;case 2:n(!x),x&&(g(!1),b("All",!1));break;case 3:d&&o(!0,"pending",d);break;case 4:d&&o(!0,"completed",d);break;case 5:t?.isSelected?g(!1):g(!0);break;case 6:w(!0);break}}function E(){if(x)return e.jsxs("button",{onClick:()=>y(5),children:[e.jsx("i",{className:"fa fa-hand-o-up"}),d?.isSelected?"Unselect":"Select"]})}function B(){if(k?.user.status=="Owner")return e.jsxs("button",{onClick:()=>y(6),children:[e.jsx("i",{className:"	fa fa-edit"}),"Edit"]})}return e.jsxs("div",{ref:c,onClick:$=>p($,null,!1),className:v?ne.showMenu:ne.hideMenu,style:{left:m.x,top:m.y},children:[e.jsxs("button",{onClick:()=>y(1),children:[e.jsx("i",{className:"fa fa-envelope-open"}),"Open"]}),e.jsx(B,{}),e.jsxs("button",{onClick:()=>y(2),children:[e.jsx("i",{className:x?"fa fa-close":"fa fa-hand-o-up"}),x?"Cancel":"Select"]}),e.jsx(E,{}),e.jsxs("button",{onClick:()=>y(3),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Pending"]}),e.jsxs("button",{onClick:()=>y(4),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Finish"]})]})}function St(){const{setSortingType:t}=s.useContext(z),[r,n]=s.useState(!1),[o,d]=s.useState([{classname:"fa fa-ellipsis-h",functionName:"Pending"},{classname:"fa fa-check",functionName:"Completed"},{classname:"fa fa-sort-numeric-asc",functionName:"Newest-Oldest"},{classname:"fa fa-sort-numeric-desc",functionName:"Oldest-Newest"},{classname:"fa fa-sort-alpha-asc",functionName:"A-Z"},{classname:"fa fa-sort-alpha-desc",functionName:"Z-A"}]),[c,v]=s.useState({classname:"fa fa-sort-alpha-asc",functionName:"A-Z"});return s.useEffect(()=>{c&&t(c?.functionName)},[c]),e.jsxs("button",{className:ne.hamWrapper,onClick:()=>{n(!r)},children:[e.jsxs("p",{children:["Sort",e.jsx("i",{className:c?.classname}),e.jsx("i",{className:r?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("ul",{className:r?ne.dropDownMenus:ne.hideDropDown,children:o.map(m=>e.jsxs("li",{onClick:()=>{d(x=>x.map(p=>(m.functionName==p.functionName&&v(p),p)))},children:[e.jsx("i",{className:m.classname}),e.jsx("p",{children:m.functionName})]},m.functionName))})]})}function ue({type:t}){const{userData:r}=s.useContext(G),{setTypeOfWork:n,setShowAddPrompt:o}=s.useContext(z);if(r?.user?.status=="Owner")return e.jsx("div",{className:ne.addActivity,onClick:()=>{n(t),o(!0)},children:e.jsx("h1",{children:"+"})})}const _t="_activity_1u0xz_1",vt="_pendingActivity_1u0xz_3",gt="_selected_1u0xz_67",Nt="_notSelected_1u0xz_69",de={activity:_t,pendingActivity:vt,selected:gt,notSelected:Nt};function At({task:t,handleRightClick:r,setActDesc:n}){const{canSelect:o,setActivities:d,setAssignments:c,setProjects:v,setExams:m}=s.useContext(z),x=()=>{if(o)return e.jsx("input",{type:"checkbox",checked:t?.isSelected,onChange:()=>{p(null)},className:t?.isSelected?de.selected:de.notSelected})};function p(N){o&&(d(f=>f?f.map(u=>u.id==N?.id?{...u,isSelected:!u.isSelected}:u):[]),c(f=>f?f.map(u=>u.id==N?.id?{...u,isSelected:!u.isSelected}:u):[]),v(f=>f?f.map(u=>u.id==N?.id?{...u,isSelected:!u.isSelected}:u):[]),m(f=>f?f.map(u=>u.id==N?.id?{...u,isSelected:!u.isSelected}:u):[]))}return e.jsxs("div",{id:`${t?.id}`,className:t?.status=="completed"?de.activity:de.pendingActivity,onContextMenu:N=>r(N,t,!1),onDoubleClick:N=>r(N,t,!0),onClick:()=>{n(t),p(t)},children:[e.jsx("h2",{children:t?.title}),e.jsx("p",{children:t?.description}),e.jsx(x,{})]})}const Ct="_activitySkeleton_o3c77_1",wt={activitySkeleton:Ct};function Bt({count:t}){return e.jsx(e.Fragment,{children:Array.from({length:t}).map((r,n)=>e.jsx("div",{className:wt.activitySkeleton},n))})}function he({typeOfWork:t,sortingType:r}){const{activities:n,assignments:o,projects:d,selectedChoice:c,handleRightClick:v,setActDesc:m,exams:x}=s.useContext(z),{userData:p}=s.useContext(G),N=t==="Activity"?n||[]:t==="Assignment"?o||[]:t==="Project"?d||[]:x||[],f=s.useMemo(()=>{let u=[...N];return r==="Newest-Oldest"?u.sort((b,w)=>w.timeCreated-b.timeCreated):r==="Oldest-Newest"?u.sort((b,w)=>b.timeCreated-w.timeCreated):r==="A-Z"?u.sort((b,w)=>(b.title||"").localeCompare(w.title||"")):r==="Z-A"?u.sort((b,w)=>(w.title||"").localeCompare(b.title||"")):r==="Pending"?u=u.filter(b=>b.status==="pending"):r==="Completed"&&(u=u.filter(b=>b.status==="completed")),u.filter(b=>b.quarter===c.quarter&&b.semester===c.sem)},[N,r,c]);if(s.useEffect(()=>{t&&console.log(t,x)},[t,x]),p){if(p&&f.length!=0)return e.jsx(e.Fragment,{children:f.map(u=>e.jsx(At,{task:u,handleRightClick:v,setActDesc:m},u.id||u.timeCreated))});if(p&&f.length==0)return e.jsxs("h2",{className:ne.noActivities,children:[t==="Activity"&&"There are no Activities!",t==="Assignment"&&"There are no Assignments!",t==="Project"&&"There are no Projects!",t==="Exam"&&"There are no Exam!"]})}else return e.jsx(Bt,{count:6})}const kt="_addSubjectWrapper_55ez4_1",yt="_addSubjectBox_55ez4_29",$t="_closeButton_55ez4_53",Dt="_top_55ez4_123",Pt="_submit_55ez4_189",Y={addSubjectWrapper:kt,addSubjectBox:yt,closeButton:$t,top:Dt,submit:Pt},Wt="_subjectBox_1p62z_1",Mt="_choices_1p62z_51",Et="_show_1p62z_87",qt="_subject_1p62z_1",zt="_status_1p62z_99",P={subjectBox:Wt,choices:Mt,show:Et,subject:qt,status:zt};function Tt({subject:t,setSubject:r}){const[n]=s.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[o,d]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:P.subName,children:"Subject"}),e.jsxs("button",{className:P.subjectBox,onClick:()=>{d(!o)},children:[t,e.jsx("i",{className:o?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:o?`${P.choices} ${P.show}`:P.choices,children:n.map(c=>e.jsx("li",{className:P.subject,onClick:()=>{r(c)},children:c},Math.random()*1))})]})]})}function It(){const{quarterAndSemChoices:t,quarter:r,setQuarter:n,semester:o,setSemester:d}=s.useContext(z),[c,v]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:P.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:P.subjectBox,onClick:()=>{v(!c)},children:[o+" Sem: "+r+" Quarter",e.jsx("i",{className:c?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:c?`${P.choices} ${P.show}`:P.choices,children:t.map(m=>e.jsx("li",{className:P.subject,onClick:()=>{n(m.quarter),d(m.sem)},children:m.sem+" Sem: "+m.quarter+" Quarter"},Math.random()*1))})]})]})}function Qt({status:t,setStatus:r}){const[n]=s.useState(["pending","completed"]),[o,d]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:P.subName,children:"Subject"}),e.jsxs("button",{className:P.subjectBox,onClick:()=>{d(!o)},children:[t,e.jsx("i",{className:o?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:o?`${P.choices} ${P.show}`:P.choices,children:n.map(c=>e.jsx("li",{className:P.status,onClick:()=>{r(c=="pending"?"pending":"completed")},children:c},Math.random()*1))})]})]})}function Ot(){const{typeOfWork:t,setTypeOfWork:r,params:n,quarter:o,semester:d,actDesc:c,showEdit:v,setShowEdit:m}=s.useContext(z),{userData:x}=s.useContext(G),[p,N]=s.useState(""),[f,u]=s.useState(""),[b,w]=s.useState(""),[k,g]=s.useState(n?.toUpperCase()),[y,E]=s.useState("pending"),[B,$]=s.useState("");async function A(){const S=new Date,T={id:B,title:p,description:f,typeOfWork:t,status:y,createdBy:"Pajarillaga, Bryan",createdAt:`${S?.getFullYear()}-${S?.getMonth()}-${S?.getDate()}`,dueDate:b,subject:k,semester:d,quarter:o,isSelected:!1,timeCreated:Date.now()},F=xe(pe,"Main_Database","School_Activities"),L=(await $e(F)).data();if(L)switch(t){case"Activity":const H=L.Activity.map(j=>j.id==B?{...T,id:Math.random()*1}:{...j});await le(F,{[t]:H});break;case"Assignment":const I=L.Assignment.map(j=>j.id==B?{...T,id:Math.random()*1}:{...j});await le(F,{[t]:I});break;case"Project":const ee=L.Project.map(j=>j.id==B?{...T,id:Math.random()*1}:{...j});await le(F,{[t]:ee});break}m(!1)}if(s.useEffect(()=>{g(n)},[n]),s.useEffect(()=>{c&&(N(c.title),u(c.description),w(c.dueDate),E(c.status),$(c.id))},[c]),v&&x?.user.status=="Owner")return e.jsx("div",{className:Y.addSubjectWrapper,children:e.jsxs("div",{className:Y.addSubjectBox,children:[e.jsx("button",{className:Y.closeButton,onClick:()=>{r(""),m(!1)},children:"X"}),e.jsxs("h1",{children:["Edit ",t]}),e.jsxs("div",{className:Y.top,children:[e.jsx(Tt,{subject:k,setSubject:g}),e.jsx(It,{}),e.jsx(Qt,{status:y,setStatus:E}),e.jsx("h2",{className:Y.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:S=>{console.log(S.currentTarget.value),w(S.currentTarget.value)}}),e.jsxs("h2",{className:Y.actTitle,children:[t," Title"]}),e.jsx("input",{type:"text",value:p,onChange:S=>{N(S.currentTarget.value)}}),e.jsxs("h2",{className:Y.actDescription,children:[t," Description"]}),e.jsx("textarea",{rows:5,value:f,onChange:S=>{u(S.currentTarget.value)}})]}),e.jsx("button",{className:Y.submit,onClick:A,children:"Submit"})]})})}const z=s.createContext({});function Ft({params:t,subjects:r}){const{userData:n,userObject:o,setUserData:d}=s.useContext(G),{selectedQuarter:c,selectedSemester:v}=s.useContext(be),m=s.useRef(null),x=s.useRef(null),p=s.useRef(null),N=s.useRef(null),f=s.useRef(null),u=He(),b=Ue(),[w,k]=s.useState(null),[g,y]=s.useState(null),[E,B]=s.useState(null),[$,A]=s.useState(null),[S,T]=s.useState(!1),[F,R]=s.useState(!1),[L,J]=s.useState(!1),[H,K]=s.useState(!1),[I,oe]=s.useState(!1),[ee,j]=s.useState(!1),[De,Pe]=s.useState(!1),[me,Se]=s.useState(""),[U,_e]=s.useState("2nd"),[We,ve]=s.useState("1st"),[re,Me]=s.useState("Pending"),[ge,fe]=s.useState(null),[Ee,Ne]=s.useState({x:0,y:0}),[ce,se]=s.useState({quarter:"2nd",sem:"1st"}),[V,Q]=s.useState({Activity:!1,Assignment:!1,Project:!1,Exam:!1,Groupings:!1}),[Ae,Ce]=s.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]);function qe(l,_,i){i&&l.preventDefault(),R(!0),Ne({x:l.clientX,y:l.clientY}),_&&(Se(_.typeOfWork),fe(_))}function ze(l,_,i){switch(me){case"Activity":a("activities");break;case"Assignment":a("assignments");break;case"Project":a("petas");break;case"Exam":a("exams");break}function a(ie){d(je=>{if(!je)return null;const Be=je[ie]?.map(W=>{if(i&&i.id===W.id)return{...i,status:_,isSelected:!1};const Ie=w?.find(te=>te.id===W.id),Qe=g?.find(te=>te.id===W.id),Oe=E?.find(te=>te.id===W.id),Fe=$?.find(te=>te.id===W.id);switch(ie){case"activities":if(Ie?.isSelected)return{...W,status:_,isSelected:!1};break;case"assignments":if(Qe?.isSelected)return{...W,status:_,isSelected:!1};break;case"petas":if(Oe?.isSelected)return{...W,status:_,isSelected:!1};break;case"exams":if(Fe?.isSelected)return{...W,status:_,isSelected:!1};break}return W})||[];return fe(W=>!W||l?null:{...W,status:_}),we(Be,ie),Q(W=>({...W,[me]:!1})),{...je,[ie]:Be}})}}function O(l,_){if(I)switch(l){case"Activity":k(i=>i?i?.map(a=>({...a,isSelected:a.quarter==U?_:!1})):[]);break;case"Assignment":y(i=>i?i?.map(a=>({...a,isSelected:a.quarter==U?_:!1})):[]);break;case"Project":B(i=>i?i?.map(a=>({...a,isSelected:a.quarter==U?_:!1})):[]);break;case"Exam":A(i=>i?i?.map(a=>({...a,isSelected:a.quarter==U?_:!1})):[]);break;case"All":k(i=>i?i?.map(a=>({...a,isSelected:a.quarter==U?_:!1})):[]),y(i=>i?i?.map(a=>({...a,isSelected:a.quarter==U?_:!1})):[]),B(i=>i?i?.map(a=>({...a,isSelected:a.quarter==U?_:!1})):[]);break}}async function we(l,_){try{if(l&&_){const i=xe(pe,"McCarthy",`${o?.uid}`);await le(i,{[_]:l})}}catch{}}function Z(l,_){switch(_){case"Activity":var i=x.current,a=208;i&&(l==!1?i.scrollBy({left:a,behavior:"smooth"}):i.scrollBy({left:-a,behavior:"smooth"}));break;case"Assignment":var i=p.current,a=208;i&&(l==!1?i.scrollBy({left:a,behavior:"smooth"}):i.scrollBy({left:-a,behavior:"smooth"}));break;case"Project":var i=N.current,a=208;i&&(l==!1?i.scrollBy({left:a,behavior:"smooth"}):i.scrollBy({left:-a,behavior:"smooth"}));break;case"Exam":var i=f.current,a=208;i&&(l==!1?i.scrollBy({left:a,behavior:"smooth"}):i.scrollBy({left:-a,behavior:"smooth"}));break}}s.useEffect(()=>{(n?.activities!=null||n?.assignments!=null||n?.petas!=null)&&(k(n.activities.filter(l=>l.subject===t)),y(n.assignments.filter(l=>l.subject===t)),B(n.petas.filter(l=>l.subject===t)),A(n.exams.filter(l=>l.subject===t)))},[n,t]),s.useEffect(()=>{_e(ce.quarter),ve(ce.sem)},[ce]),s.useEffect(()=>{se({quarter:c,sem:v})},[c,v]),s.useEffect(()=>{if(b.hash&&w!=null){const l=b.hash.substring(1).split("#"),[_,i]=l;if(_&&document.getElementById(_)?.scrollIntoView({behavior:"smooth"}),i){switch(_){case"Activity":w?.map(a=>{a.id==i&&se({quarter:a.quarter,sem:a.semester})});break;case"Assignment":g?.map(a=>{a.id==i&&se({quarter:a.quarter,sem:a.semester})});break;case"Project":E?.map(a=>{a.id==i&&se({quarter:a.quarter,sem:a.semester})});break;case"Exam":$?.map(a=>{a.id==i&&se({quarter:a.quarter,sem:a.semester})});break}setTimeout(()=>{const a=document.getElementById(i);a&&(a?.scrollIntoView({behavior:"smooth"}),a.style.backgroundColor="rgb(223, 223, 223)",a.style.scale="1.2"),a&&setTimeout(()=>{u(`/subjects/${t}`),a&&(a?.scrollIntoView({behavior:"smooth"}),a.style.backgroundColor="white",a.style.scale="1")},1e3)},500)}}},[b,w]);const Te={canSelect:I,setCanSelect:oe,showMenu:F,setShowMenu:R,showActDesc:L,showAddPrompt:H,setShowAddPrompt:K,showEdit:De,setShowEdit:Pe,typeOfWork:me,setTypeOfWork:Se,selectedChoice:ce,setSelectedChoice:se,setShowActDesc:J,actDesc:ge,setActDesc:fe,activities:w,setActivities:k,assignments:g,setAssignments:y,projects:E,setProjects:B,exams:$,setExams:A,quarterAndSemChoices:Ae,setQuarterAndSemChoices:Ce,quarter:U,setQuarter:_e,semester:We,setSemester:ve,params:t,sortingType:re,setSortingType:Me,menuPos:Ee,setMenuPos:Ne,defineTypeOfWork:ze,handleRightClick:qe,handleSelectAll:O,saveToDatabase:we,menu:m};if(t)return e.jsx(z.Provider,{value:Te,children:e.jsxs("div",{className:h.subConWrapper,onClick:()=>{R(!1)},children:[e.jsx(bt,{task:ge}),e.jsx(Ys,{}),e.jsx(ut,{}),e.jsx(Ot,{}),e.jsxs("div",{className:h.topComponent,children:[e.jsx(ye,{to:"/subjects",id:h.backButt,children:"Back"}),e.jsx("h1",{children:r.map(l=>l.subjectNameAbbreviation.toLowerCase()==t.toLowerCase()?l.subjectNameAbbreviation:"")}),e.jsxs("div",{className:h.right,children:[e.jsx("button",{className:h.wrapMenusButton,onClick:()=>{j(!ee)},children:e.jsx("i",{className:"fa fa-bars"})}),e.jsxs("div",{className:ee?h.wrap:h.hideWrap,children:[e.jsxs("div",{className:h.selectedChoice,children:[e.jsxs("button",{onClick:()=>{T(!S)},children:[ce.sem," Sem: ",ce.quarter," Quarter",e.jsx("i",{className:S?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("div",{className:S?`${h.choicesBox} ${h.showChoices}`:`${h.choicesBox} ${h.hideChoices}`,children:Ae.map((l,_)=>e.jsxs("button",{onClick:()=>{Ce(i=>i.map((a,ie)=>(_==ie&&se(a),a))),T(!1)},children:[l.sem," Sem: ",l.quarter," Quarter"]},Math.random()*1))})]}),e.jsx(St,{})]})]})]}),e.jsxs("div",{className:h.contentWrapper,children:[e.jsxs("div",{className:`${h.subjectActs} ${h.subjectActivities}`,id:"Activity",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Activities"}),e.jsxs("div",{className:h.buttonWrapper,children:[e.jsx("button",{onClick:()=>{Z(!0,"Activity")},children:e.jsx("i",{className:"	fa fa-angle-left"})}),e.jsx("button",{onClick:()=>{Z(!1,"Activity")},children:e.jsx("i",{className:"	fa fa-angle-right"})})]})]}),e.jsxs("div",{ref:x,className:h.content,children:[e.jsx(ue,{type:"Activity"},Math.random()*1),e.jsx("button",{className:I?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{V.Activity?(O("Activity",!1),Q(l=>({...l,Activity:!1}))):(O("Activity",!0),Q(l=>({...l,Activity:!0})))},children:e.jsx("i",{className:V.Activity?"fa fa-check":h.transparent})}),e.jsx(he,{typeOfWork:"Activity",sortingType:re})]})]}),e.jsxs("div",{className:`${h.subjectActs} ${h.subjectAssignments}`,id:"Assignment",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Assignment"}),e.jsxs("div",{className:h.buttonWrapper,children:[e.jsx("button",{onClick:()=>{Z(!0,"Assignment")},children:e.jsx("i",{className:"	fa fa-angle-left"})}),e.jsx("button",{onClick:()=>{Z(!1,"Assignment")},children:e.jsx("i",{className:"	fa fa-angle-right"})})]})]}),e.jsxs("div",{ref:p,className:h.content,children:[e.jsx(ue,{type:"Assignment"},Math.random()*1),e.jsx("button",{className:I?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{V.Assignment?(O("Assignment",!1),Q(l=>({...l,Assignment:!1}))):(O("Assignment",!0),Q(l=>({...l,Assignment:!0})))},children:e.jsx("i",{className:V.Assignment?"fa fa-check":h.transparent})}),e.jsx(he,{typeOfWork:"Assignment",sortingType:re})]})]}),e.jsxs("div",{className:`${h.subjectActs} ${h.subjectProjects}`,id:"Project",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Performance Tasks"}),e.jsxs("div",{className:h.buttonWrapper,children:[e.jsx("button",{onClick:()=>{Z(!0,"Project")},children:e.jsx("i",{className:"	fa fa-angle-left"})}),e.jsx("button",{onClick:()=>{Z(!1,"Project")},children:e.jsx("i",{className:"	fa fa-angle-right"})})]})]}),e.jsxs("div",{ref:N,className:h.content,children:[e.jsx(ue,{type:"Project"},Math.random()*1),e.jsx("button",{className:I?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{V.Project?(O("Project",!1),Q(l=>({...l,Project:!1}))):(O("Project",!0),Q(l=>({...l,Project:!0})))},children:e.jsx("i",{className:V.Project?"fa fa-check":h.transparent})}),e.jsx(he,{typeOfWork:"Project",sortingType:re})]})]}),e.jsxs("div",{className:`${h.subjectActs} ${h.subjectActivities}`,id:"Exam",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Exams And Quizes"}),e.jsxs("div",{className:h.buttonWrapper,children:[e.jsx("button",{onClick:()=>{Z(!0,"Exam")},children:e.jsx("i",{className:"	fa fa-angle-left"})}),e.jsx("button",{onClick:()=>{Z(!1,"Exam")},children:e.jsx("i",{className:"	fa fa-angle-right"})})]})]}),e.jsxs("div",{ref:f,className:h.content,children:[e.jsx(ue,{type:"Exam"},Math.random()*1),e.jsx("button",{className:I?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{V.Exam?(O("Exam",!1),Q(l=>({...l,Exam:!1}))):(O("Exam",!0),Q(l=>({...l,Exam:!0})))},children:e.jsx("i",{className:V.Exam?"fa fa-check":h.transparent})}),e.jsx(he,{typeOfWork:"Exam",sortingType:re})]})]})]})]})})}const be=s.createContext(null);function Ht(){const{pageDetector:t,userObject:r}=s.useContext(G),{subjectName:n}=Ve(),[o,d]=s.useState(!1),[c,v]=s.useState("2nd"),[m,x]=s.useState("1st"),[p]=s.useState(Ze),[N,f]=s.useState({quarter:"2nd",sem:"1st"}),[u]=s.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]),b=s.useRef(null),w=s.useRef(null);s.useEffect(()=>{t(null,1,!1)},[n]),s.useEffect(()=>{r?.uid?t(null,1,!1):t(0,null,!0)},[r]);const k={selectedQuarter:c,setSelectedQuarter:v,selectedSemester:m,setSelectedSemester:x};return e.jsx(be.Provider,{value:k,children:n?e.jsx(Ft,{params:n,subjects:p}):e.jsxs("div",{ref:b,className:`${ae.subjectsWrapper}`,children:[e.jsxs("header",{ref:w,id:"SubjectNavigation",className:`${ae.top}`,children:[e.jsx("h1",{children:"Subjects"}),e.jsxs("div",{className:ae.dropDownButton,onClick:()=>d(g=>!g),children:[N.sem," Semester: ",N.quarter," Quarter",e.jsx("i",{className:o?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("div",{className:o?`${ae.choicesBox} ${ae.showChoices}`:`${ae.choicesBox} ${ae.hideChoices}`,children:u.map(g=>e.jsxs("button",{onClick:()=>{f(g),v(g.quarter),x(g.sem)},children:[g.sem," Sem: ",g.quarter," Quarter"]},`${g.sem}-${g.quarter}`))})]})]}),e.jsx("section",{children:p.map(g=>e.jsx(fs,{subData:g},g.subjectTeacher))})]})})}export{be as SubjectsContext,Ht as default};
