import{r as s,c as ee,j as e,L as je,d as pe,f as xe,g as Ne,s as ge,a as fe,b as _e,F as we,u as Be,e as $e,h as De}from"./index-DYX0-DKy.js";import{s as Pe}from"./subjects-Qvdm7Wki.js";const qe="_subjectsWrapper_1bbtx_1",ye="_top_1bbtx_31",ke="_dropDownButton_1bbtx_69",We="_showChoices_1bbtx_119",Me="_hideChoices_1bbtx_127",ze="_choicesBox_1bbtx_135",H={subjectsWrapper:qe,top:ye,dropDownButton:ke,showChoices:We,hideChoices:Me,choicesBox:ze},Oe="_subjectBox_1xvju_1",Ie="_topWrapper_1xvju_95",Fe="_subjectName_1xvju_217",Ee="_progressWrapper_1xvju_261",Qe="_progresses_1xvju_279",Te="_top_1xvju_95",Re="_bottom_1xvju_305",He="_barWrapper_1xvju_329",Le="_bar_1xvju_329",Ze="_openSubject_1xvju_357",b={subjectBox:Oe,topWrapper:Ie,subjectName:Fe,progressWrapper:Ee,progresses:Qe,top:Te,bottom:Re,barWrapper:He,bar:Le,openSubject:Ze};function Ue({subData:n}){const{userData:i}=s.useContext(ee),{selectedQuarter:a}=s.useContext(ue),[h,m]=s.useState(0),[o,S]=s.useState(0),[p,c]=s.useState(0),[t,r]=s.useState(0),[j,k]=s.useState(0),[P,$]=s.useState(0),[N,A]=s.useState(0),[w,D]=s.useState(0),[x,L]=s.useState(0),[q,te]=s.useState(),[X,F]=s.useState(),[Y,se]=s.useState();return s.useEffect(()=>{const E=h>0?o/h*100:0,Q=t>0?j/t*100:0,T=N>0?w/N*100:0;c(E),$(Q),L(T)},[h,o,t,j,N,w]),s.useEffect(()=>{if(a){const E=q?.filter(C=>C.subject==n.subjectNameAbbreviation&&a==C.quarter)?.length,Q=X?.filter(C=>C.subject==n.subjectNameAbbreviation&&a==C.quarter)?.length,T=Y?.filter(C=>C.subject==n.subjectNameAbbreviation&&a==C.quarter)?.length,W=q?.filter(C=>C.status=="completed"&&C.subject==n.subjectNameAbbreviation&&a==C.quarter)?.length,G=X?.filter(C=>C.status=="completed"&&C.subject==n.subjectNameAbbreviation&&a==C.quarter)?.length,ne=Y?.filter(C=>C.status=="completed"&&C.subject==n.subjectNameAbbreviation&&a==C.quarter)?.length;console.log(q),m(E||0),S(W||0),r(Q||0),k(G||0),A(T||0),D(ne||0)}},[a,q,X,Y]),s.useEffect(()=>{i&&(te(i.activities),F(i.assignments),se(i.petas))},[i]),e.jsxs("div",{className:`${b.subjectBox}`,children:[e.jsx("div",{className:b.topWrapper,children:e.jsx("h1",{className:b.subjectName,children:n.subjectNameAbbreviation})}),e.jsxs("div",{className:b.progressWrapper,children:[e.jsxs("div",{className:`${b.actWrapper} ${b.progresses}`,children:[e.jsxs("div",{className:b.top,children:[e.jsx("p",{children:"Activities:"}),e.jsxs("p",{className:b.completed,children:[o," Completed"]})]}),e.jsx("div",{className:b.bottom,children:e.jsx("div",{className:b.barWrapper,children:e.jsx("div",{className:b.bar,style:{width:`${p}%`}})})})]}),e.jsxs("div",{className:`${b.assignWrapper} ${b.progresses}`,children:[e.jsxs("div",{className:b.top,children:[e.jsx("p",{children:"Assignments:"}),e.jsxs("p",{className:b.completed,children:[j," Completed"]})]}),e.jsx("div",{className:b.bottom,children:e.jsx("div",{className:b.barWrapper,children:e.jsx("div",{className:b.bar,style:{width:`${P}%`}})})})]}),e.jsxs("div",{className:`${b.projWrapper} ${b.progresses}`,children:[e.jsxs("div",{className:b.top,children:[e.jsx("p",{children:"Performance Tasks:"}),e.jsxs("p",{className:b.completed,children:[w," Completed"]})]}),e.jsx("div",{className:b.bottom,children:e.jsx("div",{className:b.barWrapper,children:e.jsx("div",{className:b.bar,style:{width:`${x}%`}})})})]})]}),e.jsx(je,{to:"/subjects/"+n.subjectNameAbbreviation,className:b.openSubject,children:"Open Subject"})]})}const Ve="_subConWrapper_1fnzp_1",Xe="_topComponent_1fnzp_23",Ye="_backButt_1fnzp_1",Ge="_right_1fnzp_77",Je="_wrapMenusButton_1fnzp_89",Ke="_wrap_1fnzp_89",et="_hideWrap_1fnzp_99",tt="_selectedChoice_1fnzp_109",st="_showChoices_1fnzp_149",nt="_hideChoices_1fnzp_157",ct="_choicesBox_1fnzp_165",it="_contentWrapper_1fnzp_223",at="_subjectActs_1fnzp_267",ot="_content_1fnzp_223",rt="_selectAllButton_1fnzp_339",lt="_hideSelectAllButton_1fnzp_355",ut="_transparent_1fnzp_385",f={subConWrapper:Ve,topComponent:Xe,backButt:Ye,right:Ge,wrapMenusButton:Je,wrap:Ke,hideWrap:et,selectedChoice:tt,showChoices:st,hideChoices:nt,choicesBox:ct,contentWrapper:it,subjectActs:at,content:ot,selectAllButton:rt,hideSelectAllButton:lt,transparent:ut},dt="_showActDesc_ozrv6_1",ht="_hideActDesc_ozrv6_29",mt="_showActDescBox_ozrv6_37",ft="_right_ozrv6_73",jt="_stateWrapper_ozrv6_81",pt="_showButton_ozrv6_95",xt="_choices_ozrv6_103",_t="_hideChoices_ozrv6_105",bt="_showInfo_ozrv6_115",St="_highlight_ozrv6_141",At="_unhighlight_ozrv6_161",Ct="_hideButton_ozrv6_173",B={showActDesc:dt,hideActDesc:ht,showActDescBox:mt,right:ft,stateWrapper:jt,showButton:pt,choices:xt,hideChoices:_t,showInfo:bt,highlight:St,unhighlight:At,hideButton:Ct},vt="_infoBox_xvtjn_1",Nt="_showInfoBox_xvtjn_21",gt="_hideInfoBox_xvtjn_31",wt="_animHideInfo_xvtjn_41",y={infoBox:vt,showInfoBox:Nt,hideInfoBox:gt,animHideInfo:wt};function Bt({showInfo:n,setShowInfo:i}){const{actDesc:a}=s.useContext(M);function h(m){const o=m.currentTarget.classList;o.contains(y.hideInfoBox)?(o.replace(`${y.hideInfoBox}`,`${y.animHideInfo}`),setTimeout(()=>{o.replace(`${y.animHideInfo}`,`${y.hideInfoBox}`)},1e3)):(o.add(`${y.animHideInfo}`),setTimeout(()=>{o.replace(`${y.animHideInfo}`,`${y.hideInfoBox}`)},1e3)),i(!1)}return e.jsx(e.Fragment,{children:e.jsx("div",{className:n?`${y.infoBox} ${y.showInfoBox}`:`${y.infoBox} ${y.hideInfoBox}`,onMouseLeave:h,children:e.jsxs("ul",{children:[e.jsxs("li",{children:["Created At: ",a?.createdAt]}),e.jsxs("li",{children:["Deadline: ",a?.dueDate]}),e.jsxs("li",{children:["Semester: ",a?.semester," Sem"]}),e.jsxs("li",{children:["Quarter: ",a?.quarter," Quarter"]}),e.jsxs("li",{children:["Type: ",a?.typeOfWork]})]})})})}function $t(){const{actDesc:n,showActDesc:i,setShowActDesc:a,setActDesc:h,defineTypeOfWork:m}=s.useContext(M),[o,S]=s.useState(!1),[p,c]=s.useState(!1);return e.jsx(e.Fragment,{children:e.jsx("div",{className:i?B.showActDesc:B.hideActDesc,children:e.jsxs("div",{className:i?B.showActDescBox:B.hideActDescBox,children:[e.jsxs("h2",{children:["Description",e.jsxs("div",{className:B.right,children:[e.jsxs("div",{className:B.stateWrapper,children:[e.jsx("button",{className:B.showButton,onClick:()=>{S(!o)},children:e.jsx("i",{className:"fa fa-navicon"})}),e.jsxs("div",{className:o?B.choices:B.hideChoices,children:[e.jsx("button",{className:n?.status=="completed"?B.highlight:B.unhighlight,onClick:()=>{n&&m(!1,"completed")},children:"Finish"}),e.jsx("button",{className:n?.status=="pending"?B.highlight:B.unhighlight,onClick:()=>{n&&m(!1,"pending")},children:"Pending"}),e.jsxs("button",{className:B.showInfo,onClick:()=>{c(!p)},children:[e.jsx("i",{className:"fa fa-list-alt"}),e.jsx(Bt,{showInfo:p,setShowInfo:c})]})]})]}),e.jsx("button",{onClick:()=>{a(!1),h(null)},className:B.hideButton,children:"X"})]})]}),e.jsx("h3",{children:n?.title}),e.jsx("p",{children:n?.description})]})})})}const Dt="_addSubjectWrapper_qzsae_1",Pt="_addSubjectBox_qzsae_29",qt="_closeButton_qzsae_57",yt="_top_qzsae_123",kt="_submit_qzsae_189",I={addSubjectWrapper:Dt,addSubjectBox:Pt,closeButton:qt,top:yt,submit:kt},Wt="_subjectBox_1p62z_1",Mt="_choices_1p62z_51",zt="_show_1p62z_87",Ot="_subject_1p62z_1",It="_status_1p62z_99",g={subjectBox:Wt,choices:Mt,show:zt,subject:Ot,status:It};function Ft({subject:n,setSubject:i}){const[a]=s.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[h,m]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:g.subName,children:"Subject"}),e.jsxs("button",{className:g.subjectBox,onClick:()=>{m(!h)},children:[n,e.jsx("i",{className:h?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:h?`${g.choices} ${g.show}`:g.choices,children:a.map(o=>e.jsx("li",{className:g.subject,onClick:()=>{i(o)},children:o},Math.random()*1))})]})]})}function Et(){const{quarterAndSemChoices:n,quarter:i,setQuarter:a,semester:h,setSemester:m}=s.useContext(M),[o,S]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:g.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:g.subjectBox,onClick:()=>{S(!o)},children:[h+" Sem: "+i+" Quarter",e.jsx("i",{className:o?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:o?`${g.choices} ${g.show}`:g.choices,children:n.map(p=>e.jsx("li",{className:g.subject,onClick:()=>{a(p.quarter),m(p.sem)},children:p.sem+" Sem: "+p.quarter+" Quarter"},Math.random()*1))})]})]})}function Qt({status:n,setStatus:i}){const[a]=s.useState(["pending","completed"]),[h,m]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:g.subName,children:"Subject"}),e.jsxs("button",{className:g.subjectBox,onClick:()=>{m(!h)},children:[n,e.jsx("i",{className:h?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:h?`${g.choices} ${g.show}`:g.choices,children:a.map(o=>e.jsx("li",{className:g.status,onClick:()=>{i(o=="pending"?"pending":"completed")},children:o},Math.random()*1))})]})]})}function Tt(){const{typeOfWork:n,showAddPrompt:i,setShowAddPrompt:a,setTypeOfWork:h,params:m,quarter:o,semester:S}=s.useContext(M),{userData:p}=s.useContext(ee),[c,t]=s.useState(""),[r,j]=s.useState(""),[k,P]=s.useState(null),[$,N]=s.useState(m?.toUpperCase()),[A,w]=s.useState("pending");async function D(){const x=new Date,L={id:Math.random()*1,title:c,description:r,typeOfWork:n,status:A,createdBy:"Pajarillaga, Bryan",createdAt:`${x?.getFullYear()}-${x?.getMonth()}-${x?.getDate()}`,dueDate:k,subject:$,semester:S,quarter:o,isSelected:!1,timeCreated:Date.now()};try{const q=pe(xe,"Main_Database","School_Activities");(await Ne(q)).exists()?await _e(q,{[n]:fe(L)}):await ge(q,{[n]:fe(L)}),t(""),j(""),P(null),h(""),a(!1)}catch(q){q instanceof we&&console.log(q)}}if(s.useEffect(()=>{N(m)},[m]),i&&p?.user.status=="Owner")return e.jsx("div",{className:I.addSubjectWrapper,children:e.jsxs("div",{className:I.addSubjectBox,children:[e.jsx("button",{className:I.closeButton,onClick:()=>{h(""),a(!1)},children:"X"}),e.jsxs("h1",{children:["Create ",n]}),e.jsxs("div",{className:I.top,children:[e.jsx(Ft,{subject:$,setSubject:N}),e.jsx(Et,{}),e.jsx(Qt,{status:A,setStatus:w}),e.jsx("h2",{className:I.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:x=>{console.log(x.currentTarget.value),P(x.currentTarget.value)}}),e.jsxs("h2",{className:I.actTitle,children:[n," Title"]}),e.jsx("input",{type:"text",value:c,onChange:x=>{t(x.currentTarget.value)}}),e.jsxs("h2",{className:I.actDesc,children:[n," Description"]}),e.jsx("textarea",{rows:5,value:r,onChange:x=>{j(x.currentTarget.value)}})]}),e.jsx("button",{className:I.submit,onClick:D,children:"Submit"})]})})}const Rt="_noActivities_1bced_1",Ht="_showMenu_1bced_11",Lt="_hideMenu_1bced_69",Zt="_addActivity_1bced_77",Ut="_hamWrapper_1bced_143",Vt="_dropDownMenus_1bced_183",Xt="_hideDropDown_1bced_235",O={noActivities:Rt,showMenu:Ht,hideMenu:Lt,addActivity:Zt,hamWrapper:Ut,dropDownMenus:Vt,hideDropDown:Xt};function Yt({task:n}){const{setShowActDesc:i,setCanSelect:a,defineTypeOfWork:h,actDesc:m,menu:o,showMenu:S,menuPos:p,canSelect:c,handleRightClick:t,setActivities:r,setAssignments:j,setProjects:k,handleSelectAll:P}=s.useContext(M);function $(w){if(c)switch(n?.typeOfWork){case"Activity":r(D=>D?D.map(x=>x.id==n?.id?{...x,isSelected:w}:x):[]);break;case"Assignment":j(D=>D?D.map(x=>x.id==n?.id?{...x,isSelected:w}:x):[]);break;case"Project":k(D=>D?D.map(x=>x.id==n?.id?{...x,isSelected:w}:x):[]);break}}function N(w){switch(w){case 1:i(!0);break;case 2:a(!c),c&&($(!1),P("All",!1));break;case 3:m&&h(!0,"pending");break;case 4:m&&h(!0,"completed");break;case 5:n?.isSelected?$(!1):$(!0);break}}function A(){if(c)return e.jsxs("button",{onClick:()=>N(5),children:[e.jsx("i",{className:"fa fa-hand-o-up"}),m?.isSelected?"Unselect":"Select"]})}return e.jsxs("div",{ref:o,onClick:w=>t(w,null,!1),className:S?O.showMenu:O.hideMenu,style:{left:p.x,top:p.y},children:[e.jsxs("button",{onClick:()=>N(1),children:[e.jsx("i",{className:"fa fa-envelope-open"}),"Open"]}),e.jsxs("button",{onClick:()=>N(2),children:[e.jsx("i",{className:c?"fa fa-close":"fa fa-hand-o-up"}),c?"Cancel":"Select"]}),e.jsx(A,{}),e.jsxs("button",{onClick:()=>N(3),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Pending"]}),e.jsxs("button",{onClick:()=>N(4),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Finish"]})]})}function Gt(){const{setSortingType:n}=s.useContext(M),[i,a]=s.useState(!1),[h,m]=s.useState([{classname:"fa fa-ellipsis-h",functionName:"Pending"},{classname:"fa fa-check",functionName:"Completed"},{classname:"fa fa-sort-numeric-asc",functionName:"Newest-Oldest"},{classname:"fa fa-sort-numeric-desc",functionName:"Oldest-Newest"},{classname:"fa fa-sort-alpha-asc",functionName:"A-Z"},{classname:"fa fa-sort-alpha-desc",functionName:"Z-A"}]),[o,S]=s.useState({classname:"fa fa-sort-alpha-asc",functionName:"A-Z"});return s.useEffect(()=>{o&&n(o?.functionName)},[o]),e.jsxs("button",{className:O.hamWrapper,onClick:()=>{a(!i)},children:[e.jsxs("p",{children:["Sort",e.jsx("i",{className:o?.classname}),e.jsx("i",{className:i?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("ul",{className:i?O.dropDownMenus:O.hideDropDown,children:h.map(p=>e.jsxs("li",{onClick:()=>{m(c=>c.map(t=>(p.functionName==t.functionName&&S(t),t)))},children:[e.jsx("i",{className:p.classname}),e.jsx("p",{children:p.functionName})]},p.functionName))})]})}function oe({type:n}){const{userData:i}=s.useContext(ee),{setTypeOfWork:a,setShowAddPrompt:h}=s.useContext(M);if(i?.user?.status=="Owner")return e.jsx("div",{className:O.addActivity,onClick:()=>{a(n),h(!0)},children:e.jsx("h1",{children:"+"})})}const Jt="_activity_19w5l_1",Kt="_pendingActivity_19w5l_3",es="_selected_19w5l_69",ts="_notSelected_19w5l_71",ie={activity:Jt,pendingActivity:Kt,selected:es,notSelected:ts};function re({task:n,handleRightClick:i,setActDesc:a}){const{canSelect:h,setActivities:m,setAssignments:o,setProjects:S}=s.useContext(M),p=()=>{if(h)return e.jsx("input",{type:"checkbox",checked:n?.isSelected,onChange:()=>{c(null)},className:n?.isSelected?ie.selected:ie.notSelected})};function c(t){h&&(m(r=>r?r.map(j=>j.id==t?.id?{...j,isSelected:!j.isSelected}:j):[]),o(r=>r?r.map(j=>j.id==t?.id?{...j,isSelected:!j.isSelected}:j):[]),S(r=>r?r.map(j=>j.id==t?.id?{...j,isSelected:!j.isSelected}:j):[]))}return e.jsxs("div",{id:`${n?.id}`,className:n?.status=="completed"?ie.activity:ie.pendingActivity,onContextMenu:t=>i(t,n,!1),onDoubleClick:t=>i(t,n,!0),onClick:()=>{a(n),c(n)},children:[e.jsx("h2",{children:n?.title}),e.jsx("p",{children:n?.description}),e.jsx(p,{})]})}function le({typeOfWork:n,sortingType:i}){const{activities:a,assignments:h,projects:m,selectedChoice:o,handleRightClick:S,setActDesc:p}=s.useContext(M);if(n=="Activity"){let c=[...a||[]];return i==="Newest-Oldest"?c.sort((t,r)=>r.timeCreated-t.timeCreated):i==="Oldest-Newest"?c.sort((t,r)=>t.timeCreated-r.timeCreated):i==="A-Z"?c.sort((t,r)=>(t.title||"").localeCompare(r.title||"")):i==="Z-A"?c.sort((t,r)=>(r.title||"").localeCompare(t.title||"")):i=="Pending"?c=c.filter(t=>t.status=="pending"):i=="Completed"&&(c=c.filter(t=>t.status=="completed")),c=c.filter(t=>t.quarter==o.quarter),c.length!=0?e.jsx(e.Fragment,{children:c.filter(t=>t.quarter===o.quarter&&t.semester===o.sem).map(t=>e.jsx(re,{task:t,handleRightClick:S,setActDesc:p},t.id||t.timeCreated))}):e.jsx("h2",{className:O.noActivities,children:"There are no Activites!"})}else if(n=="Assignment"){let c=[...h||[]];return i==="Newest-Oldest"?c.sort((t,r)=>r.timeCreated-t.timeCreated):i==="Oldest-Newest"?c.sort((t,r)=>t.timeCreated-r.timeCreated):i==="A-Z"?c.sort((t,r)=>t.title.localeCompare(r.title)):i==="Z-A"?c.sort((t,r)=>r.title.localeCompare(t.title)):i=="Pending"?c=c.filter(t=>t.status=="pending"):i=="Completed"&&(c=c.filter(t=>t.status=="completed")),c=c.filter(t=>t.quarter==o.quarter),c.length!=0?e.jsx(e.Fragment,{children:c.filter(t=>t.quarter===o.quarter&&t.semester===o.sem).map(t=>(console.log(t.timeCreated),e.jsx(re,{task:t,handleRightClick:S,setActDesc:p},t.id||t.timeCreated)))}):e.jsx("h2",{className:O.noActivities,children:"There are no Assignments!"})}else if(n=="Project"){let c=[...m||[]];return i==="Newest-Oldest"?c.sort((t,r)=>r.timeCreated-t.timeCreated):i==="Oldest-Newest"?c.sort((t,r)=>t.timeCreated-r.timeCreated):i==="A-Z"?c.sort((t,r)=>(t.title||"").localeCompare(r.title||"")):i==="Z-A"?c.sort((t,r)=>(r.title||"").localeCompare(t.title||"")):i=="Pending"?c=c.filter(t=>t.status=="pending"):i=="Completed"&&(c=c.filter(t=>t.status=="completed")),c=c.filter(t=>t.quarter==o.quarter),c.length!=0?e.jsx(e.Fragment,{children:c.filter(t=>t.quarter===o.quarter&&t.semester===o.sem).map(t=>e.jsx(re,{task:t,handleRightClick:S,setActDesc:p},t.id||t.timeCreated))}):e.jsx("h2",{className:O.noActivities,children:"There are no Projects!"})}}const M=s.createContext({});function ss({params:n,subjects:i}){const{userData:a,userObject:h,setUserData:m}=s.useContext(ee),{selectedQuarter:o,selectedSemester:S}=s.useContext(ue),p=s.useRef(null),c=Be(),t=$e(),[r,j]=s.useState(null),[k,P]=s.useState(null),[$,N]=s.useState(null),[A,w]=s.useState(!1),[D,x]=s.useState(!1),[L,q]=s.useState(!1),[te,X]=s.useState(!1),[F,Y]=s.useState(!1),[se,E]=s.useState(!1),[Q,T]=s.useState(""),[W,G]=s.useState("2nd"),[ne,C]=s.useState("1st"),[J,K]=s.useState(null),[be,de]=s.useState({x:0,y:0}),[he,me]=s.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]),[Z,U]=s.useState({quarter:"2nd",sem:"1st"}),[V,z]=s.useState({Activity:!1,Assignment:!1,Project:!1}),[ce,Se]=s.useState("Pending");function Ae(d,v,l){l&&d.preventDefault(),x(!0),de({x:d.clientX,y:d.clientY}),v&&(T(v.typeOfWork),K(v))}function Ce(d,v){switch(Q){case"Activity":m(l=>l?(l?.activities.map(u=>(r?.map(_=>{u.id==_.id&&(_.isSelected||J?.id==_.id)&&(u.status=v,K(d?null:_))}),u)),ae(l.activities,"activities"),z(u=>({...u,Activity:!1})),l):null);break;case"Assignment":m(l=>l?(l?.assignments.map(u=>(k?.map(_=>{u.id==_.id&&(_.isSelected||J?.id==_.id)&&(u.status=v,K(d?null:_))}),u)),ae(l.assignments,"petas"),z(u=>({...u,Assignment:!1})),l):null);break;case"Project":m(l=>l?(l?.petas.map(u=>($?.map(_=>{u.id==_.id&&(_.isSelected||J?.id==_.id)&&(u.status=v,K(d?null:_))}),u)),ae(l.petas,"petas"),z(u=>({...u,Project:!1})),l):null);break}}function R(d,v){if(F)switch(d){case"Activity":j(l=>l?l?.map(u=>({...u,isSelected:u.quarter==W?v:!1})):[]);break;case"Assignment":P(l=>l?l?.map(u=>({...u,isSelected:u.quarter==W?v:!1})):[]);break;case"Project":N(l=>l?l?.map(u=>({...u,isSelected:u.quarter==W?v:!1})):[]);break;case"All":j(l=>l?l?.map(u=>({...u,isSelected:u.quarter==W?v:!1})):[]),P(l=>l?l?.map(u=>({...u,isSelected:u.quarter==W?v:!1})):[]),N(l=>l?l?.map(u=>({...u,isSelected:u.quarter==W?v:!1})):[]);break}}async function ae(d,v){try{if(d&&v){const l=pe(xe,"McCarthy",`${h?.uid}`);await _e(l,{[v]:d})}}catch{}}s.useEffect(()=>{(a?.activities!=null||a?.assignments!=null||a?.petas!=null)&&(j(a.activities.filter(d=>d.subject===n)),P(a.assignments.filter(d=>d.subject===n)),N(a.petas.filter(d=>d.subject===n)))},[a,n]),s.useEffect(()=>{G(Z.quarter),C(Z.sem)},[Z]),s.useEffect(()=>{U({quarter:o,sem:S})},[o,S]),s.useEffect(()=>{if(t.hash&&r!=null){const d=t.hash.substring(1).split("#"),[v,l]=d;if(v&&document.getElementById(v)?.scrollIntoView({behavior:"smooth"}),l){const u=document.getElementById(l);switch(u?.scrollIntoView({behavior:"smooth"}),v){case"Activity":r?.map(_=>{_.id==l&&U({quarter:_.quarter,sem:_.semester})});break;case"Assignment":k?.map(_=>{_.id==l&&U({quarter:_.quarter,sem:_.semester})});break;case"Project":console.log("Project"),$?.map(_=>{_.id==l&&(console.log("Project"),U({quarter:_.quarter,sem:_.semester}))});break}u&&setTimeout(()=>{c(`/subjects/${n}`)},1e3)}}},[t,r]);const ve={canSelect:F,setCanSelect:Y,showMenu:D,setShowMenu:x,showActDesc:L,showAddPrompt:te,setShowAddPrompt:X,typeOfWork:Q,setTypeOfWork:T,selectedChoice:Z,setSelectedChoice:U,setShowActDesc:q,actDesc:J,setActDesc:K,activities:r,setActivities:j,assignments:k,setAssignments:P,projects:$,setProjects:N,quarterAndSemChoices:he,setQuarterAndSemChoices:me,quarter:W,setQuarter:G,semester:ne,setSemester:C,params:n,sortingType:ce,setSortingType:Se,menuPos:be,setMenuPos:de,defineTypeOfWork:Ce,handleRightClick:Ae,handleSelectAll:R,menu:p};if(n)return e.jsx(M.Provider,{value:ve,children:e.jsxs("div",{className:f.subConWrapper,onClick:()=>{x(!1)},children:[e.jsx(Yt,{task:J}),e.jsx($t,{}),e.jsx(Tt,{}),e.jsxs("div",{className:f.topComponent,children:[e.jsx(je,{to:"/subjects",id:f.backButt,children:"Back"}),e.jsx("h1",{children:i.map(d=>d.subjectNameAbbreviation.toLowerCase()==n.toLowerCase()?d.subjectNameAbbreviation:"")}),e.jsxs("div",{className:f.right,children:[e.jsx("button",{className:f.wrapMenusButton,onClick:()=>{E(!se)},children:e.jsx("i",{className:"fa fa-bars"})}),e.jsxs("div",{className:se?f.wrap:f.hideWrap,children:[e.jsxs("div",{className:f.selectedChoice,children:[e.jsxs("button",{onClick:()=>{w(!A)},children:[Z.sem," Sem: ",Z.quarter," Quarter",e.jsx("i",{className:A?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("div",{className:A?`${f.choicesBox} ${f.showChoices}`:`${f.choicesBox} ${f.hideChoices}`,children:he.map((d,v)=>e.jsxs("button",{onClick:()=>{me(l=>l.map((u,_)=>(v==_&&U(u),u))),w(!1)},children:[d.sem," Sem: ",d.quarter," Quarter"]},Math.random()*1))})]}),e.jsx(Gt,{})]})]})]}),e.jsxs("div",{className:f.contentWrapper,children:[e.jsxs("div",{className:`${f.subjectActs} ${f.subjectActivities}`,id:"Activity",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Activities"})]}),e.jsxs("div",{className:f.content,children:[e.jsx(oe,{type:"Activity"},Math.random()*1),e.jsx("button",{className:F?f.selectAllButton:f.hideSelectAllButton,onClick:()=>{V.Activity?(R("Activity",!1),z(d=>({...d,Activity:!1}))):(R("Activity",!0),z(d=>({...d,Activity:!0})))},children:e.jsx("i",{className:V.Activity?"fa fa-check":f.transparent})}),e.jsx(le,{typeOfWork:"Activity",sortingType:ce})]})]}),e.jsxs("div",{className:`${f.subjectActs} ${f.subjectAssignments}`,id:"Assignment",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Assignment"})]}),e.jsxs("div",{className:f.content,children:[e.jsx(oe,{type:"Assignment"},Math.random()*1),e.jsx("button",{className:F?f.selectAllButton:f.hideSelectAllButton,onClick:()=>{V.Assignment?(R("Assignment",!1),z(d=>({...d,Assignment:!1}))):(R("Assignment",!0),z(d=>({...d,Assignment:!0})))},children:e.jsx("i",{className:V.Assignment?"fa fa-check":f.transparent})}),e.jsx(le,{typeOfWork:"Assignment",sortingType:ce})]})]}),e.jsxs("div",{className:`${f.subjectActs} ${f.subjectProjects}`,id:"Project",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Performance Tasks"})]}),e.jsxs("div",{className:f.content,children:[e.jsx(oe,{type:"Project"},Math.random()*1),e.jsx("button",{className:F?f.selectAllButton:f.hideSelectAllButton,onClick:()=>{V.Project?(R("Project",!1),z(d=>({...d,Project:!1}))):(R("Project",!0),z(d=>({...d,Project:!0})))},children:e.jsx("i",{className:V.Project?"fa fa-check":f.transparent})}),e.jsx(le,{typeOfWork:"Project",sortingType:ce})]})]})]})]})})}const ue=s.createContext(null);function is(){const{pageDetector:n,userObject:i}=s.useContext(ee),{subjectName:a}=De(),[h,m]=s.useState(!1),[o,S]=s.useState("2nd"),[p,c]=s.useState("1st"),[t]=s.useState(Pe),[r,j]=s.useState({quarter:"2nd",sem:"1st"}),[k]=s.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]),P=s.useRef(null),$=s.useRef(null);s.useEffect(()=>{n(null,1,!1)},[a]),s.useEffect(()=>{i?.uid?n(null,1,!1):n(0,null,!0)},[i]);const N={selectedQuarter:o,setSelectedQuarter:S,selectedSemester:p,setSelectedSemester:c};return e.jsx(ue.Provider,{value:N,children:a?e.jsx(ss,{params:a,subjects:t}):e.jsxs("div",{ref:P,className:`${H.subjectsWrapper}`,children:[e.jsxs("header",{ref:$,id:"SubjectNavigation",className:`${H.top}`,children:[e.jsx("h1",{children:"Subjects"}),e.jsxs("div",{className:H.dropDownButton,onClick:()=>m(A=>!A),children:[r.sem," Semester: ",r.quarter," Quarter",e.jsx("i",{className:h?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("div",{className:h?`${H.choicesBox} ${H.showChoices}`:`${H.choicesBox} ${H.hideChoices}`,children:k.map(A=>e.jsxs("button",{onClick:()=>{j(A),S(A.quarter),c(A.sem)},children:[A.sem," Sem: ",A.quarter," Quarter"]},`${A.sem}-${A.quarter}`))})]})]}),e.jsx("section",{children:t.map(A=>e.jsx(Ue,{subData:A},A.subjectTeacher))})]})})}export{ue as SubjectsContext,is as default};
