import{r as s,c as se,j as e,L as je,d as pe,f as xe,g as Ne,s as ge,a as fe,b as _e,F as we,u as Be,e as ye,h as ke}from"./index-vGQ_B1e1.js";import{s as $e}from"./subjects-Qvdm7Wki.js";const De="_subjectsWrapper_1pvky_1",qe="_stickyNav_1pvky_33",Pe="_top_1pvky_41",We="_fixedNav_1pvky_61",Me="_dropDownButton_1pvky_81",Oe="_showChoices_1pvky_131",Ie="_hideChoices_1pvky_139",Ee="_choicesBox_1pvky_147",P={subjectsWrapper:De,stickyNav:qe,top:Pe,fixedNav:We,dropDownButton:Me,showChoices:Oe,hideChoices:Ie,choicesBox:Ee},Fe="_subjectBox_1xvju_1",ze="_topWrapper_1xvju_95",Te="_subjectName_1xvju_217",Qe="_progressWrapper_1xvju_261",He="_progresses_1xvju_279",Le="_top_1xvju_95",Re="_bottom_1xvju_305",Ze="_barWrapper_1xvju_329",Ue="_bar_1xvju_329",Ve="_openSubject_1xvju_357",S={subjectBox:Fe,topWrapper:ze,subjectName:Te,progressWrapper:Qe,progresses:He,top:Le,bottom:Re,barWrapper:Ze,bar:Ue,openSubject:Ve};function Xe({subData:n}){const{userData:r}=s.useContext(se),{selectedQuarter:i}=s.useContext(ue),[h,j]=s.useState(0),[a,A]=s.useState(0),[m,c]=s.useState(0),[t,u]=s.useState(0),[g,k]=s.useState(0),[y,B]=s.useState(0),[N,$]=s.useState(0),[x,f]=s.useState(0),[b,z]=s.useState(0),[O,Z]=s.useState(),[Y,T]=s.useState(),[G,te]=s.useState();return s.useEffect(()=>{const Q=h>0?a/h*100:0,H=t>0?g/t*100:0,L=N>0?x/N*100:0;c(Q),B(H),z(L)},[h,a,t,g,N,x]),s.useEffect(()=>{if(i){const Q=O?.filter(v=>v.subject==n.subjectNameAbbreviation&&i==v.quarter)?.length,H=Y?.filter(v=>v.subject==n.subjectNameAbbreviation&&i==v.quarter)?.length,L=G?.filter(v=>v.subject==n.subjectNameAbbreviation&&i==v.quarter)?.length,W=O?.filter(v=>v.status=="completed"&&v.subject==n.subjectNameAbbreviation&&i==v.quarter)?.length,J=Y?.filter(v=>v.status=="completed"&&v.subject==n.subjectNameAbbreviation&&i==v.quarter)?.length,ne=G?.filter(v=>v.status=="completed"&&v.subject==n.subjectNameAbbreviation&&i==v.quarter)?.length;console.log(O),j(Q||0),A(W||0),u(H||0),k(J||0),$(L||0),f(ne||0)}},[i,O,Y,G]),s.useEffect(()=>{r&&(Z(r.activities),T(r.assignments),te(r.petas))},[r]),e.jsxs("div",{className:`${S.subjectBox}`,children:[e.jsx("div",{className:S.topWrapper,children:e.jsx("h1",{className:S.subjectName,children:n.subjectNameAbbreviation})}),e.jsxs("div",{className:S.progressWrapper,children:[e.jsxs("div",{className:`${S.actWrapper} ${S.progresses}`,children:[e.jsxs("div",{className:S.top,children:[e.jsx("p",{children:"Activities:"}),e.jsxs("p",{className:S.completed,children:[a," Completed"]})]}),e.jsx("div",{className:S.bottom,children:e.jsx("div",{className:S.barWrapper,children:e.jsx("div",{className:S.bar,style:{width:`${m}%`}})})})]}),e.jsxs("div",{className:`${S.assignWrapper} ${S.progresses}`,children:[e.jsxs("div",{className:S.top,children:[e.jsx("p",{children:"Assignments:"}),e.jsxs("p",{className:S.completed,children:[g," Completed"]})]}),e.jsx("div",{className:S.bottom,children:e.jsx("div",{className:S.barWrapper,children:e.jsx("div",{className:S.bar,style:{width:`${y}%`}})})})]}),e.jsxs("div",{className:`${S.projWrapper} ${S.progresses}`,children:[e.jsxs("div",{className:S.top,children:[e.jsx("p",{children:"Performance Tasks:"}),e.jsxs("p",{className:S.completed,children:[x," Completed"]})]}),e.jsx("div",{className:S.bottom,children:e.jsx("div",{className:S.barWrapper,children:e.jsx("div",{className:S.bar,style:{width:`${b}%`}})})})]})]}),e.jsx(je,{to:"/subjects/"+n.subjectNameAbbreviation,className:S.openSubject,children:"Open Subject"})]})}const Ye="_subConWrapper_1fnzp_1",Ge="_topComponent_1fnzp_23",Je="_backButt_1fnzp_1",Ke="_right_1fnzp_77",es="_wrapMenusButton_1fnzp_89",ss="_wrap_1fnzp_89",ts="_hideWrap_1fnzp_99",ns="_selectedChoice_1fnzp_109",cs="_showChoices_1fnzp_149",is="_hideChoices_1fnzp_157",as="_choicesBox_1fnzp_165",os="_contentWrapper_1fnzp_223",rs="_subjectActs_1fnzp_267",ls="_content_1fnzp_223",us="_selectAllButton_1fnzp_339",ds="_hideSelectAllButton_1fnzp_355",hs="_transparent_1fnzp_385",p={subConWrapper:Ye,topComponent:Ge,backButt:Je,right:Ke,wrapMenusButton:es,wrap:ss,hideWrap:ts,selectedChoice:ns,showChoices:cs,hideChoices:is,choicesBox:as,contentWrapper:os,subjectActs:rs,content:ls,selectAllButton:us,hideSelectAllButton:ds,transparent:hs},ms="_showActDesc_3mluj_1",fs="_hideActDesc_3mluj_29",js="_showActDescBox_3mluj_39",ps="_right_3mluj_77",xs="_stateWrapper_3mluj_85",_s="_showButton_3mluj_99",bs="_choices_3mluj_107",As="_hideChoices_3mluj_107",Ss="_showInfo_3mluj_117",vs="_highlight_3mluj_145",Cs="_unhighlight_3mluj_165",Ns="_hideButton_3mluj_177",w={showActDesc:ms,hideActDesc:fs,showActDescBox:js,right:ps,stateWrapper:xs,showButton:_s,choices:bs,hideChoices:As,showInfo:Ss,highlight:vs,unhighlight:Cs,hideButton:Ns},gs="_infoBox_xvtjn_1",ws="_showInfoBox_xvtjn_21",Bs="_hideInfoBox_xvtjn_31",ys="_animHideInfo_xvtjn_41",D={infoBox:gs,showInfoBox:ws,hideInfoBox:Bs,animHideInfo:ys};function ks({showInfo:n,setShowInfo:r}){const{actDesc:i}=s.useContext(M);function h(j){const a=j.currentTarget.classList;a.contains(D.hideInfoBox)?(a.replace(`${D.hideInfoBox}`,`${D.animHideInfo}`),setTimeout(()=>{a.replace(`${D.animHideInfo}`,`${D.hideInfoBox}`)},1e3)):(a.add(`${D.animHideInfo}`),setTimeout(()=>{a.replace(`${D.animHideInfo}`,`${D.hideInfoBox}`)},1e3)),r(!1)}return e.jsx(e.Fragment,{children:e.jsx("div",{className:n?`${D.infoBox} ${D.showInfoBox}`:`${D.infoBox} ${D.hideInfoBox}`,onMouseLeave:h,children:e.jsxs("ul",{children:[e.jsxs("li",{children:["Created At: ",i?.createdAt]}),e.jsxs("li",{children:["Deadline: ",i?.dueDate]}),e.jsxs("li",{children:["Semester: ",i?.semester," Sem"]}),e.jsxs("li",{children:["Quarter: ",i?.quarter," Quarter"]}),e.jsxs("li",{children:["Type: ",i?.typeOfWork]})]})})})}function $s(){const{actDesc:n,showActDesc:r,setShowActDesc:i,setActDesc:h,defineTypeOfWork:j}=s.useContext(M),[a,A]=s.useState(!1),[m,c]=s.useState(!1);return e.jsx(e.Fragment,{children:e.jsx("div",{className:r?w.showActDesc:w.hideActDesc,children:e.jsxs("div",{className:r?w.showActDescBox:w.hideActDescBox,children:[e.jsxs("h2",{children:["Description",e.jsxs("div",{className:w.right,children:[e.jsxs("div",{className:w.stateWrapper,children:[e.jsx("button",{className:w.showButton,onClick:()=>{A(!a)},children:e.jsx("i",{className:"fa fa-navicon"})}),e.jsxs("div",{className:a?w.choices:w.hideChoices,children:[e.jsx("button",{className:n?.status=="completed"?w.highlight:w.unhighlight,onClick:()=>{n&&j(!1,"completed")},children:"Finish"}),e.jsx("button",{className:n?.status=="pending"?w.highlight:w.unhighlight,onClick:()=>{n&&j(!1,"pending")},children:"Pending"}),e.jsxs("button",{className:w.showInfo,onClick:()=>{c(!m)},children:[e.jsx("i",{className:"fa fa-list-alt"}),e.jsx(ks,{showInfo:m,setShowInfo:c})]})]})]}),e.jsx("button",{onClick:()=>{i(!1),h(null)},className:w.hideButton,children:"X"})]})]}),e.jsx("p",{children:n?.description})]})})})}const Ds="_addSubjectWrapper_qzsae_1",qs="_addSubjectBox_qzsae_29",Ps="_closeButton_qzsae_57",Ws="_top_qzsae_123",Ms="_submit_qzsae_189",F={addSubjectWrapper:Ds,addSubjectBox:qs,closeButton:Ps,top:Ws,submit:Ms},Os="_subjectBox_e3r8s_1",Is="_choices_e3r8s_49",Es="_show_e3r8s_85",Fs="_subject_e3r8s_1",q={subjectBox:Os,choices:Is,show:Es,subject:Fs};function zs({subject:n,setSubject:r}){const[i]=s.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[h,j]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:q.subName,children:"Subject"}),e.jsxs("button",{className:q.subjectBox,onClick:()=>{j(!h)},children:[n,e.jsx("i",{className:h?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:h?`${q.choices} ${q.show}`:q.choices,children:i.map(a=>e.jsx("li",{className:q.subject,onClick:()=>{r(a)},children:a},Math.random()*1))})]})]})}function Ts(){const{quarterAndSemChoices:n,quarter:r,setQuarter:i,semester:h,setSemester:j}=s.useContext(M),[a,A]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:q.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:q.subjectBox,onClick:()=>{A(!a)},children:[h+" Sem: "+r+" Quarter",e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:a?`${q.choices} ${q.show}`:q.choices,children:n.map(m=>e.jsx("li",{className:q.subject,onClick:()=>{i(m.quarter),j(m.sem)},children:m.sem+" Sem: "+m.quarter+" Quarter"},Math.random()*1))})]})]})}function Qs(){const{typeOfWork:n,showAddPrompt:r,setShowAddPrompt:i,setTypeOfWork:h,params:j,quarter:a,semester:A}=s.useContext(M),{userData:m}=s.useContext(se),[c,t]=s.useState(""),[u,g]=s.useState(""),[k,y]=s.useState(null),[B,N]=s.useState(j?.toUpperCase());async function $(){const x=new Date,f={id:Math.random()*1,title:c,description:u,typeOfWork:n,status:"pending",createdBy:"Pajarillaga, Bryan",createdAt:`${x?.getFullYear()}-${x?.getMonth()}-${x?.getDate()}`,dueDate:k,subject:B,semester:A,quarter:a,isSelected:!1,timeCreated:Date.now()};try{const b=pe(xe,"Main_Database","School_Activities");(await Ne(b)).exists()?await _e(b,{[n]:fe(f)}):await ge(b,{[n]:fe(f)}),t(""),g(""),y(null),h(""),i(!1)}catch(b){b instanceof we&&console.log(b)}}if(s.useEffect(()=>{N(j)},[j]),r&&m?.user.status=="Owner")return e.jsx("div",{className:F.addSubjectWrapper,children:e.jsxs("div",{className:F.addSubjectBox,children:[e.jsx("button",{className:F.closeButton,onClick:()=>{h(""),i(!1)},children:"X"}),e.jsxs("h1",{children:["Create ",n]}),e.jsxs("div",{className:F.top,children:[e.jsx(zs,{subject:B,setSubject:N}),e.jsx(Ts,{}),e.jsx("h2",{className:F.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:x=>{console.log(x.currentTarget.value),y(x.currentTarget.value)}}),e.jsxs("h2",{className:F.actTitle,children:[n," Title"]}),e.jsx("input",{type:"text",value:c,onChange:x=>{t(x.currentTarget.value)}}),e.jsxs("h2",{className:F.actDesc,children:[n," Description"]}),e.jsx("textarea",{rows:5,value:u,onChange:x=>{g(x.currentTarget.value)}})]}),e.jsx("button",{className:F.submit,onClick:$,children:"Submit"})]})})}const Hs="_noActivities_1bced_1",Ls="_showMenu_1bced_11",Rs="_hideMenu_1bced_69",Zs="_addActivity_1bced_77",Us="_hamWrapper_1bced_143",Vs="_dropDownMenus_1bced_183",Xs="_hideDropDown_1bced_235",E={noActivities:Hs,showMenu:Ls,hideMenu:Rs,addActivity:Zs,hamWrapper:Us,dropDownMenus:Vs,hideDropDown:Xs};function Ys({task:n}){const{setShowActDesc:r,setCanSelect:i,defineTypeOfWork:h,actDesc:j,menu:a,showMenu:A,menuPos:m,canSelect:c,handleRightClick:t,setActivities:u,setAssignments:g,setProjects:k,handleSelectAll:y}=s.useContext(M);function B(x){if(c)switch(n?.typeOfWork){case"Activity":u(f=>f?f.map(b=>b.id==n?.id?{...b,isSelected:x}:b):[]);break;case"Assignment":g(f=>f?f.map(b=>b.id==n?.id?{...b,isSelected:x}:b):[]);break;case"Project":k(f=>f?f.map(b=>b.id==n?.id?{...b,isSelected:x}:b):[]);break}}function N(x){switch(x){case 1:r(!0);break;case 2:i(!c),c&&(B(!1),y("All",!1));break;case 3:j&&h(!0,"pending");break;case 4:j&&h(!0,"completed");break;case 5:n?.isSelected?B(!1):B(!0);break}}function $(){if(c)return e.jsxs("button",{onClick:()=>N(5),children:[e.jsx("i",{className:"fa fa-hand-o-up"}),j?.isSelected?"Unselect":"Select"]})}return e.jsxs("div",{ref:a,onClick:x=>t(x,null,!1),className:A?E.showMenu:E.hideMenu,style:{left:m.x,top:m.y},children:[e.jsxs("button",{onClick:()=>N(1),children:[e.jsx("i",{className:"fa fa-envelope-open"}),"Open"]}),e.jsxs("button",{onClick:()=>N(2),children:[e.jsx("i",{className:c?"fa fa-close":"fa fa-hand-o-up"}),c?"Cancel":"Select"]}),e.jsx($,{}),e.jsxs("button",{onClick:()=>N(3),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Pending"]}),e.jsxs("button",{onClick:()=>N(4),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Finish"]})]})}function Gs(){const{setSortingType:n}=s.useContext(M),[r,i]=s.useState(!1),[h,j]=s.useState([{classname:"fa fa-sort-numeric-asc",functionName:"Newest-Oldest"},{classname:"fa fa-sort-numeric-desc",functionName:"Oldest-Newest"},{classname:"fa fa-sort-alpha-asc",functionName:"A-Z"},{classname:"fa fa-sort-alpha-desc",functionName:"Z-A"}]),[a,A]=s.useState({classname:"fa fa-sort-alpha-asc",functionName:"A-Z"});return s.useEffect(()=>{a&&n(a?.functionName)},[a]),e.jsxs("button",{className:E.hamWrapper,onClick:()=>{i(!r)},children:[e.jsxs("p",{children:["Sort",e.jsx("i",{className:a?.classname}),e.jsx("i",{className:r?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("ul",{className:r?E.dropDownMenus:E.hideDropDown,children:h.map(m=>e.jsxs("li",{onClick:()=>{j(c=>c.map(t=>(m.classname==t.classname&&A(t),t)))},children:[e.jsx("i",{className:m.classname}),e.jsx("p",{children:m.functionName})]},m.functionName))})]})}function oe({type:n}){const{userData:r}=s.useContext(se),{setTypeOfWork:i,setShowAddPrompt:h}=s.useContext(M);if(r?.user?.status=="Owner")return e.jsx("div",{className:E.addActivity,onClick:()=>{i(n),h(!0)},children:e.jsx("h1",{children:"+"})})}const Js="_activity_8kmf6_1",Ks="_pendingActivity_8kmf6_3",et="_selected_8kmf6_47",st="_notSelected_8kmf6_49",ie={activity:Js,pendingActivity:Ks,selected:et,notSelected:st};function re({task:n,handleRightClick:r,setActDesc:i}){const{canSelect:h,setActivities:j}=s.useContext(M),a=()=>{if(h)return e.jsx("input",{type:"checkbox",checked:n?.isSelected,onChange:()=>{A(null)},className:n?.isSelected?ie.selected:ie.notSelected})};function A(m){h&&j(c=>c?c.map(t=>t.id==m?.id?{...t,isSelected:!t.isSelected}:t):[])}return e.jsxs("div",{id:`${n?.id}`,className:n?.status=="completed"?ie.activity:ie.pendingActivity,onContextMenu:m=>r(m,n,!1),onDoubleClick:m=>r(m,n,!0),onClick:()=>{i(n),A(n)},children:[e.jsx("h2",{children:n?.title}),e.jsx("p",{children:n?.description}),e.jsx(a,{})]})}function le({typeOfWork:n,sortingType:r}){const{activities:i,assignments:h,projects:j,selectedChoice:a,handleRightClick:A,setActDesc:m}=s.useContext(M);if(n=="Activity"){let c=[...i||[]];return r==="Newest-Oldest"?c.sort((t,u)=>u.timeCreated-t.timeCreated):r==="Oldest-Newest"?c.sort((t,u)=>t.timeCreated-u.timeCreated):r==="A-Z"?c.sort((t,u)=>(t.title||"").localeCompare(u.title||"")):r==="Z-A"&&c.sort((t,u)=>(u.title||"").localeCompare(t.title||"")),c=c.filter(t=>t.quarter==a.quarter),console.log(c),c.length!=0?e.jsx(e.Fragment,{children:c.filter(t=>t.quarter===a.quarter&&t.semester===a.sem).map(t=>e.jsx(re,{task:t,handleRightClick:A,setActDesc:m},t.id||t.timeCreated))}):e.jsx("h2",{className:E.noActivities,children:"There are no Activites!"})}else if(n=="Assignment"){let c=[...h||[]];return r==="Newest-Oldest"?c.sort((t,u)=>u.timeCreated-t.timeCreated):r==="Oldest-Newest"?c.sort((t,u)=>t.timeCreated-u.timeCreated):r==="A-Z"?c.sort((t,u)=>t.title.localeCompare(u.title)):r==="Z-A"&&c.sort((t,u)=>u.title.localeCompare(t.title)),c=c.filter(t=>t.quarter==a.quarter),c.length!=0?e.jsx(e.Fragment,{children:c.filter(t=>t.quarter===a.quarter&&t.semester===a.sem).map(t=>(console.log(t.timeCreated),e.jsx(re,{task:t,handleRightClick:A,setActDesc:m},t.id||t.timeCreated)))}):e.jsx("h2",{className:E.noActivities,children:"There are no Assignments!"})}else if(n=="Project"){let c=[...j||[]];return r==="Newest-Oldest"?c.sort((t,u)=>u.timeCreated-t.timeCreated):r==="Oldest-Newest"?c.sort((t,u)=>t.timeCreated-u.timeCreated):r==="A-Z"?c.sort((t,u)=>(t.title||"").localeCompare(u.title||"")):r==="Z-A"&&c.sort((t,u)=>(u.title||"").localeCompare(t.title||"")),c=c.filter(t=>t.quarter==a.quarter),c.length!=0?e.jsx(e.Fragment,{children:c.filter(t=>t.quarter===a.quarter&&t.semester===a.sem).map(t=>e.jsx(re,{task:t,handleRightClick:A,setActDesc:m},t.id||t.timeCreated))}):e.jsx("h2",{className:E.noActivities,children:"There are no Projects!"})}}const M=s.createContext({});function tt({params:n,subjects:r}){const{userData:i,userObject:h,setUserData:j}=s.useContext(se),{selectedQuarter:a,selectedSemester:A}=s.useContext(ue),m=s.useRef(null),c=Be(),t=ye(),[u,g]=s.useState(null),[k,y]=s.useState(null),[B,N]=s.useState(null),[$,x]=s.useState(!1),[f,b]=s.useState(!1),[z,O]=s.useState(!1),[Z,Y]=s.useState(!1),[T,G]=s.useState(!1),[te,Q]=s.useState(!1),[H,L]=s.useState(""),[W,J]=s.useState("2nd"),[ne,v]=s.useState("1st"),[K,ee]=s.useState(null),[be,de]=s.useState({x:0,y:0}),[he,me]=s.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]),[U,V]=s.useState({quarter:"2nd",sem:"1st"}),[X,I]=s.useState({Activity:!1,Assignment:!1,Project:!1}),[ce,Ae]=s.useState("A-Z");function Se(d,C,o){o&&d.preventDefault(),b(!0),de({x:d.clientX,y:d.clientY}),C&&(console.log(o),L(C.typeOfWork),ee(C))}function ve(d,C){switch(H){case"Activity":j(o=>o?(o?.activities.map(l=>(u?.map(_=>{l.id==_.id&&((_.isSelected||K?.id==_.id)&&(l.status=C),ee(d?null:_))}),l)),ae(o.activities,"activities"),I(l=>({...l,Activity:!1})),o):null);break;case"Assignment":j(o=>o?(o?.assignments.map(l=>(k?.map(_=>{l.id==_.id&&((_.isSelected||K?.id==_.id)&&(l.status=C),ee(d?null:_))}),l)),ae(o.assignments,"petas"),I(l=>({...l,Assignment:!1})),o):null);break;case"Project":j(o=>o?(o?.petas.map(l=>(B?.map(_=>{l.id==_.id&&((_.isSelected||K?.id==_.id)&&(l.status=C),ee(d?null:_))}),l)),ae(o.petas,"petas"),I(l=>({...l,Project:!1})),o):null);break}}function R(d,C){if(T)switch(d){case"Activity":g(o=>o?o?.map(l=>({...l,isSelected:l.quarter==W?C:!1})):[]);break;case"Assignment":y(o=>o?o?.map(l=>({...l,isSelected:l.quarter==W?C:!1})):[]);break;case"Project":N(o=>o?o?.map(l=>({...l,isSelected:l.quarter==W?C:!1})):[]);break;case"All":g(o=>o?o?.map(l=>({...l,isSelected:l.quarter==W?C:!1})):[]),y(o=>o?o?.map(l=>({...l,isSelected:l.quarter==W?C:!1})):[]),N(o=>o?o?.map(l=>({...l,isSelected:l.quarter==W?C:!1})):[]);break}}async function ae(d,C){try{if(d&&C){const o=pe(xe,"McCarthy",`${h?.uid}`);await _e(o,{[C]:d})}}catch{}}s.useEffect(()=>{(i?.activities!=null||i?.assignments!=null||i?.petas!=null)&&(console.log(i),g(i.activities.filter(d=>d.subject===n)),y(i.assignments.filter(d=>d.subject===n)),N(i.petas.filter(d=>d.subject===n)))},[i,n]),s.useEffect(()=>{J(U.quarter),v(U.sem)},[U]),s.useEffect(()=>{V({quarter:a,sem:A})},[a,A]),s.useEffect(()=>{if(t.hash&&u!=null){const d=t.hash.substring(1).split("#"),[C,o]=d;if(C&&document.getElementById(C)?.scrollIntoView({behavior:"smooth"}),o){const l=document.getElementById(o);switch(l?.scrollIntoView({behavior:"smooth"}),C){case"Activity":u?.map(_=>{_.id==o&&V({quarter:_.quarter,sem:_.semester})});break;case"Assignment":k?.map(_=>{_.id==o&&V({quarter:_.quarter,sem:_.semester})});break;case"Project":console.log("Project"),B?.map(_=>{_.id==o&&(console.log("Project"),V({quarter:_.quarter,sem:_.semester}))});break}l&&setTimeout(()=>{c(`/subjects/${n}`)},1e3)}}},[t,u]);const Ce={canSelect:T,setCanSelect:G,showMenu:f,setShowMenu:b,showActDesc:z,showAddPrompt:Z,setShowAddPrompt:Y,typeOfWork:H,setTypeOfWork:L,selectedChoice:U,setSelectedChoice:V,setShowActDesc:O,actDesc:K,setActDesc:ee,activities:u,setActivities:g,assignments:k,setAssignments:y,projects:B,setProjects:N,quarterAndSemChoices:he,setQuarterAndSemChoices:me,quarter:W,setQuarter:J,semester:ne,setSemester:v,params:n,sortingType:ce,setSortingType:Ae,menuPos:be,setMenuPos:de,defineTypeOfWork:ve,handleRightClick:Se,handleSelectAll:R,menu:m};if(n)return e.jsx(M.Provider,{value:Ce,children:e.jsxs("div",{className:p.subConWrapper,onClick:()=>{b(!1)},children:[e.jsx(Ys,{task:K}),e.jsx($s,{}),e.jsx(Qs,{}),e.jsxs("div",{className:p.topComponent,children:[e.jsx(je,{to:"/subjects",id:p.backButt,children:"Back"}),e.jsx("h1",{children:r.map(d=>d.subjectNameAbbreviation.toLowerCase()==n.toLowerCase()?d.subjectNameAbbreviation:"")}),e.jsxs("div",{className:p.right,children:[e.jsx("button",{className:p.wrapMenusButton,onClick:()=>{Q(!te)},children:e.jsx("i",{className:"fa fa-bars"})}),e.jsxs("div",{className:te?p.wrap:p.hideWrap,children:[e.jsxs("div",{className:p.selectedChoice,children:[e.jsxs("button",{onClick:()=>{x(!$)},children:[U.sem," Sem: ",U.quarter," Quarter",e.jsx("i",{className:$?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("div",{className:$?`${p.choicesBox} ${p.showChoices}`:`${p.choicesBox} ${p.hideChoices}`,children:he.map((d,C)=>e.jsxs("button",{onClick:()=>{me(o=>o.map((l,_)=>(C==_&&V(l),l))),x(!1)},children:[d.sem," Sem: ",d.quarter," Quarter"]},Math.random()*1))})]}),e.jsx(Gs,{})]})]})]}),e.jsxs("div",{className:p.contentWrapper,children:[e.jsxs("div",{className:`${p.subjectActs} ${p.subjectActivities}`,id:"Activity",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Activities"})]}),e.jsxs("div",{className:p.content,children:[e.jsx(oe,{type:"Activity"},Math.random()*1),e.jsx("button",{className:T?p.selectAllButton:p.hideSelectAllButton,onClick:()=>{X.Activity?(R("Activity",!1),I(d=>({...d,Activity:!1}))):(R("Activity",!0),I(d=>({...d,Activity:!0})))},children:e.jsx("i",{className:X.Activity?"fa fa-check":p.transparent})}),e.jsx(le,{typeOfWork:"Activity",sortingType:ce})]})]}),e.jsxs("div",{className:`${p.subjectActs} ${p.subjectAssignments}`,id:"Assignment",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Assignment"})]}),e.jsxs("div",{className:p.content,children:[e.jsx(oe,{type:"Assignment"},Math.random()*1),e.jsx("button",{className:T?p.selectAllButton:p.hideSelectAllButton,onClick:()=>{X.Assignment?(R("Assignment",!1),I(d=>({...d,Assignment:!1}))):(R("Assignment",!0),I(d=>({...d,Assignment:!0})))},children:e.jsx("i",{className:X.Assignment?"fa fa-check":p.transparent})}),e.jsx(le,{typeOfWork:"Assignment",sortingType:ce})]})]}),e.jsxs("div",{className:`${p.subjectActs} ${p.subjectProjects}`,id:"Project",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Performance Tasks"})]}),e.jsxs("div",{className:p.content,children:[e.jsx(oe,{type:"Project"},Math.random()*1),e.jsx("button",{className:T?p.selectAllButton:p.hideSelectAllButton,onClick:()=>{X.Project?(R("Project",!1),I(d=>({...d,Project:!1}))):(R("Project",!0),I(d=>({...d,Project:!0})))},children:e.jsx("i",{className:X.Project?"fa fa-check":p.transparent})}),e.jsx(le,{typeOfWork:"Project",sortingType:ce})]})]})]})]})})}const ue=s.createContext(null);function it(){const{pageDetector:n,userObject:r}=s.useContext(se),{subjectName:i}=ke(),[h,j]=s.useState(!1),[a,A]=s.useState(!1),[m,c]=s.useState("2nd"),[t,u]=s.useState("1st"),[g]=s.useState($e),[k,y]=s.useState({quarter:"2nd",sem:"1st"}),[B]=s.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]),N=s.useRef(null),$=s.useRef(null);s.useEffect(()=>{const f=N.current,b=$.current;if(!f||!b)return;function z(){const O=f?.scrollTop,Z=b?.scrollHeight;!O||!Z||(O>Z+200?A(!0):A(!1))}return f.addEventListener("scroll",z),()=>f.removeEventListener("scroll",z)},[]),s.useEffect(()=>{n(null,1,!1)},[i]),s.useEffect(()=>{r?.uid?n(null,1,!1):n(0,null,!0)},[r]);const x={selectedQuarter:m,setSelectedQuarter:c,selectedSemester:t,setSelectedSemester:u};return e.jsx(ue.Provider,{value:x,children:i?e.jsx(tt,{params:i,subjects:g}):e.jsxs("div",{ref:N,className:`${P.subjectsWrapper} ${a?P.paddingTop:P.paddingZero}`,children:[e.jsxs("header",{ref:$,id:"SubjectNavigation",className:`${P.top} ${a?P.fixedNav:P.stickyNav}`,children:[e.jsx("h1",{children:"Subjects"}),e.jsxs("div",{className:P.dropDownButton,onClick:()=>j(f=>!f),children:[k.sem," Semester: ",k.quarter," Quarter",e.jsx("i",{className:h?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("div",{className:h?`${P.choicesBox} ${P.showChoices}`:`${P.choicesBox} ${P.hideChoices}`,children:B.map(f=>e.jsxs("button",{onClick:()=>{y(f),c(f.quarter),u(f.sem)},children:[f.sem," Sem: ",f.quarter," Quarter"]},`${f.sem}-${f.quarter}`))})]})]}),e.jsx("section",{children:g.map(f=>e.jsx(Xe,{subData:f},f.subjectTeacher))})]})})}export{ue as SubjectsContext,it as default};
