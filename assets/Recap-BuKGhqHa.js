import{j as s,r as i,d as B,f as T,g as O,b as F,a as G,s as V,F as L,c as q,o as z}from"./index-DVC8VIDQ.js";const H="_recapWrapper_h2f15_1",I="_top_h2f15_37",Q="_weekWrapper_h2f15_69",U="_weekButton_h2f15_85",X="_hideDropDown_h2f15_105",J="_weeksDropdown_h2f15_113",K="_createRecap_h2f15_169",Y="_daysWrapper_h2f15_197",W={recapWrapper:H,top:I,weekWrapper:Q,weekButton:U,hideDropDown:X,weeksDropdown:J,createRecap:K,daysWrapper:Y},Z="_dayCard_zr5t7_1",ss="_dayHeader_zr5t7_35",es="_openDay_zr5t7_37",ts="_dayContent_zr5t7_81",as="_activities_zr5t7_125",ns="_actWrapper_zr5t7_145",_={dayCard:Z,dayHeader:ss,openDay:es,dayContent:ts,activities:as,actWrapper:ns};function cs({day:l}){return s.jsx("div",{className:_.daysWrapper,children:s.jsxs("div",{className:_.dayCard,children:[s.jsx("div",{className:_.dayHeader,children:l.day}),s.jsxs("div",{className:_.dayContent,children:[s.jsxs("div",{className:_.activities,children:[s.jsx("h2",{children:"Activities"}),s.jsx("ul",{className:_.actWrapper,children:l.Activities.length!=0?l.Activities.map(e=>s.jsxs("li",{children:[s.jsx("i",{className:"fa fa-caret-right"})," ",s.jsx("span",{children:e.subject}),": ",e.title+e.status]},e.id)):s.jsx("li",{children:"There are no Activity"})})]}),s.jsxs("div",{className:_.activities,children:[s.jsx("h2",{children:"Group Activity"}),s.jsx("ul",{className:_.actWrapper,children:l.Groupings.length!=0?l.Groupings.map(e=>s.jsxs("li",{children:[s.jsx("i",{className:"fa fa-caret-right"})," ",s.jsx("span",{children:e.subject}),": ",e.title+e.status]},e.id)):s.jsx("li",{children:"There are no Group Activity"})})]}),s.jsxs("div",{className:_.activities,children:[s.jsx("h2",{children:"Assignment"}),s.jsx("ul",{className:_.actWrapper,children:l.Assignment.length!=0?l.Assignment.map(e=>s.jsxs("li",{children:[s.jsx("i",{className:"fa fa-caret-right"})," ",s.jsx("span",{children:e.subject}),": ",e.title+e.status]},e.id)):s.jsx("li",{children:"There are no Assignment"})})]}),s.jsxs("div",{className:_.activities,children:[s.jsx("h2",{children:"Projects"}),s.jsx("ul",{className:_.actWrapper,children:l.Projects.length!=0?l.Projects.map(e=>s.jsxs("li",{children:[s.jsx("i",{className:"fa fa-caret-right"})," ",s.jsx("span",{children:e.subject}),": ",e.title+e.status]},e.id)):s.jsx("li",{children:"There are no Project"})})]}),s.jsxs("div",{className:_.activities,children:[s.jsx("h2",{children:"Exams"}),s.jsx("ul",{className:_.actWrapper,children:l.Exams.length!=0?l.Exams.map(e=>s.jsxs("li",{children:[s.jsx("i",{className:"fa fa-caret-right"})," ",s.jsx("span",{children:e.subject}),": ",e.title+e.status]},e.id)):s.jsx("li",{children:"There are no Exam"})})]})]}),s.jsx("button",{className:_.openDay,children:"Open"})]})})}const is="_createPrompt_1insj_1",rs="_addSubjectBox_1insj_29",os="_closeButton_1insj_53",ls="_top_1insj_123",us="_activitiesWrapper_1insj_177",ds="_lists_1insj_315",hs="_submit_1insj_355",f={createPrompt:is,addSubjectBox:rs,closeButton:os,top:ls,activitiesWrapper:us,lists:ds,submit:hs},ms="_subjectBox_1eqzh_1",js="_choices_1eqzh_51",ps="_show_1eqzh_87",xs="_subject_1eqzh_1",fs="_subName_1eqzh_127",j={subjectBox:ms,choices:js,show:ps,subject:xs,subName:fs};function bs(){const{selectedDay:l,setSelectedDay:e}=i.useContext(M),b=["Monday","Tuesday","Wednesday","Thursday","Friday"],[m,h]=i.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:j.subName,children:"Days"}),s.jsxs("button",{className:j.subjectBox,onClick:()=>{h(!m)},children:[l,s.jsx("i",{className:m?"fa fa-angle-up":"fa fa-angle-down"}),s.jsx("ul",{className:m?`${j.choices} ${j.show}`:j.choices,children:b.map(p=>s.jsx("li",{className:j.subject,onClick:()=>{e(p)},children:p},Math.random()*1))})]})]})}const _s="_addSubjectWrapper_113me_1",ys="_addSubjectBox_113me_29",gs="_closeButton_113me_53",Ns="_top_113me_123",As="_buttonWrapper_113me_189",Ds="_submit_113me_199",R={addSubjectWrapper:_s,addSubjectBox:ys,closeButton:gs,top:Ns,buttonWrapper:As,submit:Ds};function ws({subject:l,setSubject:e}){const[b]=i.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[m,h]=i.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:j.subName,children:"Subject"}),s.jsxs("button",{className:j.subjectBox,onClick:()=>{h(!m)},children:[l,s.jsx("i",{className:m?"fa fa-angle-up":"fa fa-angle-down"}),s.jsx("ul",{className:m?`${j.choices} ${j.show}`:j.choices,children:b.map(p=>s.jsx("li",{className:j.subject,onClick:()=>{e(p)},children:p},Math.random()*1))})]})]})}function Ss({selectedStatus:l,setSelectedStatus:e}){const[b,m]=i.useState(!1),[h]=i.useState(["(Submitted)","(Continue)"]);return s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:j.subName,children:"Semester and Quarter"}),s.jsxs("button",{className:j.subjectBox,onClick:()=>{m(!b)},children:[l,s.jsx("i",{className:b?"fa fa-angle-up":"fa fa-angle-down"}),s.jsx("ul",{className:b?`${j.choices} ${j.show}`:j.choices,children:h.map(p=>s.jsx("li",{className:j.subject,onClick:()=>{e(p)},children:p},Math.random()*1))})]})]})}function Cs(){const{typeOfWork:l,setTypeOfWork:e,showActPrompt:b,setShowActPrompt:m,setRecap:h,recap:p,selectedDay:S}=i.useContext(M),[D,v]=i.useState(""),[N,w]=i.useState(""),[x,P]=i.useState("(Submitted)"),[g,$]=i.useState("CSS");function E(u){const a={id:Math.random()*1,status:x,title:D,description:N,typeOfWork:l,subject:g};u?(r(a),m(!1)):r(a)}function r(u){switch(l){case"Activity":h(a=>{if(!a)return a;const d=a.days.map(o=>S==o.day?{...o,Activities:[...o.Activities,{...u,status:x}]}:{...o});return{...a,days:d}});break;case"Groupings":h(a=>{if(!a)return a;const d=a.days.map(o=>S==o.day?{...o,Groupings:[...o.Groupings,{...u,status:x}]}:{...o});return{...a,days:d}});break;case"Assignment":h(a=>{if(!a)return a;const d=a.days.map(o=>S==o.day?{...o,Assignment:[...o.Assignment,{...u,status:x}]}:{...o});return{...a,days:d}});break;case"Project":h(a=>{if(!a)return a;const d=a.days.map(o=>S==o.day?{...o,Projects:[...o.Projects,{...u,status:x}]}:{...o});return{...a,days:d}});break;case"Exams":h(a=>{if(!a)return a;const d=a.days.map(o=>S==o.day?{...o,Exams:[...o.Exams,{...u,status:x}]}:{...o});return{...a,days:d}});break}}if(i.useEffect(()=>{p&&console.log(p)},[p]),b)return s.jsx("div",{className:R.addSubjectWrapper,children:s.jsxs("div",{className:R.addSubjectBox,children:[s.jsx("button",{className:R.closeButton,onClick:()=>{e(""),m(!1)},children:"X"}),s.jsxs("h1",{children:["Create ",l]}),s.jsxs("div",{className:R.top,children:[s.jsx(ws,{subject:g,setSubject:$}),s.jsx(Ss,{selectedStatus:x,setSelectedStatus:P}),s.jsxs("h2",{className:R.actTitle,children:[l," Title"]}),s.jsx("input",{type:"text",value:D,onChange:u=>{v(u.currentTarget.value)}}),s.jsxs("h2",{className:R.actDesc,children:[l," Description"]}),s.jsx("textarea",{rows:5,value:N,onChange:u=>{w(u.currentTarget.value)}})]}),s.jsxs("div",{className:R.buttonWrapper,children:[s.jsx("button",{className:R.submit,onClick:()=>E(!0),children:"Submit Only"}),s.jsx("button",{className:R.submit,onClick:()=>E(!1),children:"Create Again"})]})]})})}const M=i.createContext({});function ks({showAddRecap:l,setShowAddRecap:e,editRecap:b,setEditRecap:m,weeklyRecaps:h}){const p={monthAndDay:"",days:[{day:"Monday",Activities:[],Assignment:[],Groupings:[],Projects:[],Exams:[]},{day:"Tuesday",Activities:[],Assignment:[],Groupings:[],Projects:[],Exams:[]},{day:"Wednesday",Activities:[],Assignment:[],Groupings:[],Projects:[],Exams:[]},{day:"Thursday",Activities:[],Assignment:[],Groupings:[],Projects:[],Exams:[]},{day:"Friday",Activities:[],Assignment:[],Groupings:[],Projects:[],Exams:[]}]},[S,D]=i.useState(!1),[v,N]=i.useState("Activity"),[w,x]=i.useState("Monday"),[P,g]=i.useState("1st"),[$,E]=i.useState("1st"),[r,u]=i.useState(p);async function a(){const c={monthAndDay:r.monthAndDay};try{const t=B(T,"Main_Database","Recaps"),n=B(T,"Main_Database","Recaps",`${c.monthAndDay}`,`${c.monthAndDay}`);(await O(t)).exists()?await F(t,{ListsOfRecap:G(c)}):await V(t,{ListsOfRecap:G(c)}),await V(n,{[c.monthAndDay]:r}),e(!1)}catch(t){t instanceof L&&console.log(t),e(!1)}}function d(c,t){switch(t){case"Activity":u(n=>{if(!n)return n;const A=n.days.map(y=>{const C=y.Activities.filter(k=>k.id!=c);return{...y,Activities:C}});return{...n,days:A}});break;case"Groupings":u(n=>{if(!n||!n)return n;const A=n.days.map(y=>{const C=y.Groupings.filter(k=>k.id!=c);return{...y,Groupings:C}});return{...n,days:A}});break;case"Assignment":u(n=>{if(!n)return n;const A=n.days.map(y=>{const C=y.Assignment.filter(k=>k.id!=c);return{...y,Assignment:C}});return{...n,days:A}});break;case"Project":u(n=>{if(!n)return n;const A=n.days.map(y=>{const C=y.Projects.filter(k=>k.id!=c);return{...y,Projects:C}});return{...n,days:A}});break;case"Exams":u(n=>{if(!n)return n;const A=n.days.map(y=>{const C=y.Exams.filter(k=>k.id!=c);return{...y,Exams:C}});return{...n,days:A}});break}}i.useEffect(()=>{b&&h!=null&&u(h)},[h,b]);const o={showActPrompt:S,setShowActPrompt:D,selectedDay:w,setSelectedDay:x,typeOfWork:v,setTypeOfWork:N,quarter:P,setQuarter:g,semester:$,setSemester:E,recap:r,setRecap:u,createRecap:a};if(l||b)return s.jsxs(M.Provider,{value:o,children:[s.jsx(Cs,{}),s.jsx("div",{className:f.createPrompt,children:s.jsxs("div",{className:f.addSubjectBox,children:[s.jsx("button",{className:f.closeButton,onClick:()=>{e(!1),m(!1),u(p)},children:"X"}),s.jsxs("div",{className:f.top,children:[s.jsx(bs,{}),s.jsx("h2",{className:f.title,children:"Month and Day"}),s.jsx("input",{type:"text",value:r.monthAndDay,onChange:c=>{const t=c.currentTarget.value;u(n=>({...n,monthAndDay:t}))}}),s.jsxs("div",{className:f.activitiesWrapper,children:[s.jsxs("h2",{className:f.actTitle,children:[s.jsx("span",{children:"Activities: "}),s.jsx("button",{onClick:()=>{D(!0),N("Activity")},children:"Create Actvity"})]}),s.jsx("ul",{children:r?.days.map(c=>c.day==w&&c.Activities.map(t=>s.jsxs("li",{className:f.lists,children:[s.jsxs("span",{children:[t.subject,": ",t.title]}),s.jsxs("button",{onClick:()=>{d(t.id,t.typeOfWork)},children:[" ",s.jsx("i",{className:"fa fa-trash"})," "]})]},Math.random()*1)))}),s.jsxs("h2",{className:f.actTitle,children:[s.jsx("span",{children:"Group Activities: "}),s.jsx("button",{onClick:()=>{D(!0),N("Groupings")},children:"Create Groupings"})]}),s.jsx("ul",{children:r?.days.map(c=>c.day==w&&c.Groupings.map(t=>s.jsxs("li",{className:f.lists,children:[s.jsxs("span",{children:[t.subject,": ",t.title]}),s.jsxs("button",{onClick:()=>{d(t.id,t.typeOfWork)},children:[" ",s.jsx("i",{className:"fa fa-trash"})," "]})]},Math.random()*1)))}),s.jsxs("h2",{className:f.actTitle,children:[s.jsx("span",{children:"Assignments: "}),s.jsx("button",{onClick:()=>{D(!0),N("Assignment")},children:"Create Assignment"})]}),s.jsx("ul",{children:r?.days.map(c=>c.day==w&&c.Assignment.map(t=>s.jsxs("li",{className:f.lists,children:[s.jsxs("span",{children:[t.subject,": ",t.title]}),s.jsxs("button",{onClick:()=>{d(t.id,t.typeOfWork)},children:[" ",s.jsx("i",{className:"fa fa-trash"})," "]})]},Math.random()*1)))}),s.jsxs("h2",{className:f.actTitle,children:[s.jsx("span",{children:"Projects: "}),s.jsx("button",{onClick:()=>{D(!0),N("Project")},children:"Create Project"})]}),s.jsx("ul",{children:r?.days.map(c=>c.day==w&&c.Projects.map(t=>s.jsxs("li",{className:f.lists,children:[s.jsxs("span",{children:[t.subject,": ",t.title]}),s.jsxs("button",{onClick:()=>{d(t.id,t.typeOfWork)},children:[" ",s.jsx("i",{className:"fa fa-trash"})," "]})]},Math.random()*1)))}),s.jsxs("h2",{className:f.actTitle,children:[s.jsx("span",{children:"Exams: "}),s.jsx("button",{onClick:()=>{D(!0),N("Exams")},children:"Create Exam"})]}),s.jsx("ul",{children:r?.days.map(c=>c.day==w&&c.Exams.map(t=>s.jsxs("li",{className:f.lists,children:[s.jsxs("span",{children:[t.subject,": ",t.title]}),s.jsxs("button",{onClick:()=>{d(t.id,t.typeOfWork)},children:[" ",s.jsx("i",{className:"fa fa-trash"})," "]})]},Math.random()*1)))})]}),s.jsx("button",{className:f.submit,onClick:a,children:"Submit"})]})]})})]})}function Rs(){const{userData:l,pageDetector:e,userObject:b}=i.useContext(q),[m,h]=i.useState(!1),[p,S]=i.useState(!1),[D,v]=i.useState(!1),[N,w]=i.useState(null),[x,P]=i.useState({}),[g,$]=i.useState([]);async function E(r){const u=B(T,"Main_Database","Recaps",`${r}`,`${r}`),d=(await O(u)).data();if(!d)return;const c=d[r];w(c)}return i.useEffect(()=>{const r=B(T,"Main_Database","Recaps"),u=z(r,a=>{console.log("Render!");const d=a.data()?.ListsOfRecap;d&&(P(d[d.length-1]),$(d))});return()=>{u()}},[]),i.useEffect(()=>{const r=x?B(T,"Main_Database","Recaps",`${x.monthAndDay}`,`${x.monthAndDay}`):null,u=x&&r?z(r,a=>{async function d(){const o=B(T,"Main_Database","Recaps",`${g[g.length-1]?.monthAndDay}`,`${g[g.length-1]?.monthAndDay}`),t=(await O(o)).data();if(!t)return;const n=g[g.length-1]?.monthAndDay,A=t[n];w(A)}a.data()&&d()}):null;return()=>{u&&u()}},[x,g]),i.useEffect(()=>{b?.uid?e(null,2,!1):e(0,null,!0)},[b]),s.jsxs("div",{className:W.recapWrapper,children:[s.jsx(ks,{weeklyRecaps:N,showAddRecap:p,setShowAddRecap:S,editRecap:D,setEditRecap:v}),s.jsxs("div",{className:W.top,children:[s.jsx("h2",{children:"Weekly Recap"}),s.jsxs("div",{className:W.weekWrapper,children:[s.jsx("button",{onClick:()=>{h(!m)},className:W.weekButton,children:x.monthAndDay?x.monthAndDay:"Nothing"}),s.jsx("ul",{className:m?W.weeksDropdown:W.hideDropDown,children:g?.map(r=>s.jsx("li",{onClick:()=>{P(r),r.monthAndDay&&E(r.monthAndDay)},children:r.monthAndDay},r.monthAndDay))}),l?.user.status=="Owner"&&s.jsx("button",{className:W.createRecap,onClick:()=>S(!0),children:"Create Recap"}),l?.user.status=="Owner"&&s.jsx("button",{className:W.createRecap,onClick:()=>v(!0),children:s.jsx("i",{className:"fa fa-edit"})})]})]}),s.jsx("div",{className:W.daysWrapper,children:N?.days.map(r=>s.jsx(cs,{day:r},Math.random()*1))})]})}export{Rs as default};
