import{j as e,r as t,c as Y,L as we,d as je,f as fe,g as Be,s as qe,a as Ce,b as oe,F as ze,u as Ee,e as Te,h as Oe}from"./index-DVC8VIDQ.js";import{s as Ie}from"./subjects-Qvdm7Wki.js";const Qe="_subjectsWrapper_1bbtx_1",Fe="_top_1bbtx_31",Re="_dropDownButton_1bbtx_69",Le="_showChoices_1bbtx_119",He="_hideChoices_1bbtx_127",Ue="_choicesBox_1bbtx_135",J={subjectsWrapper:Qe,top:Fe,dropDownButton:Re,showChoices:Le,hideChoices:He,choicesBox:Ue},Ze="_subjectBox_1xvju_1",Ve="_topWrapper_1xvju_95",Xe="_subjectName_1xvju_217",Ye="_progressWrapper_1xvju_261",Ge="_progresses_1xvju_279",Je="_top_1xvju_95",Ke="_bottom_1xvju_305",et="_barWrapper_1xvju_329",tt="_bar_1xvju_329",st="_openSubject_1xvju_357",v={subjectBox:Ze,topWrapper:Ve,subjectName:Xe,progressWrapper:Ye,progresses:Ge,top:Je,bottom:Ke,barWrapper:et,bar:tt,openSubject:st},nt="_subjectSkeletonBox_bnzn5_1",ct={subjectSkeletonBox:nt};function at(){return e.jsx("div",{className:`${ct.subjectSkeletonBox}`})}function it({subData:s}){const{userData:i}=t.useContext(Y),{selectedQuarter:n}=t.useContext(pe),[a,r]=t.useState(0),[c,b]=t.useState(0),[m,p]=t.useState(0),[u,x]=t.useState(0),[o,_]=t.useState(0),[N,W]=t.useState(0),[C,A]=t.useState(0),[$,z]=t.useState(0),[w,P]=t.useState(0),[g,S]=t.useState(),[O,R]=t.useState(),[ee,q]=t.useState();return t.useEffect(()=>{const G=a>0?c/a*100:0,I=u>0?o/u*100:0,L=C>0?$/C*100:0;p(G),W(I),P(L)},[a,c,u,o,C,$]),t.useEffect(()=>{if(n){const G=g?.filter(j=>j.subject==s.subjectNameAbbreviation&&n==j.quarter)?.length,I=O?.filter(j=>j.subject==s.subjectNameAbbreviation&&n==j.quarter)?.length,L=ee?.filter(j=>j.subject==s.subjectNameAbbreviation&&n==j.quarter)?.length,te=g?.filter(j=>j.status=="completed"&&j.subject==s.subjectNameAbbreviation&&n==j.quarter)?.length,ae=O?.filter(j=>j.status=="completed"&&j.subject==s.subjectNameAbbreviation&&n==j.quarter)?.length,H=ee?.filter(j=>j.status=="completed"&&j.subject==s.subjectNameAbbreviation&&n==j.quarter)?.length;r(G||0),b(te||0),x(I||0),_(ae||0),A(L||0),z(H||0)}},[n,g,O,ee]),t.useEffect(()=>{i&&(S(i.activities),R(i.assignments),q(i.petas))},[i]),g?e.jsxs("div",{className:`${v.subjectBox}`,children:[e.jsx("div",{className:v.topWrapper,children:e.jsx("h1",{className:v.subjectName,children:s.subjectNameAbbreviation})}),e.jsxs("div",{className:v.progressWrapper,children:[e.jsxs("div",{className:`${v.actWrapper} ${v.progresses}`,children:[e.jsxs("div",{className:v.top,children:[e.jsx("p",{children:"Activities:"}),e.jsx("p",{className:v.completed,children:a>=c&&a!=0?c+" out of "+a+" is Completed":"No Activity"})]}),e.jsx("div",{className:v.bottom,children:e.jsx("div",{className:v.barWrapper,children:e.jsx("div",{className:v.bar,style:{width:`${a>=c&&a!=0?m:100}%`}})})})]}),e.jsxs("div",{className:`${v.assignWrapper} ${v.progresses}`,children:[e.jsxs("div",{className:v.top,children:[e.jsx("p",{children:"Assignments:"}),e.jsx("p",{className:v.completed,children:u>=o&&u!=0?o+" out of "+u+" is Completed":"No Assignment"})]}),e.jsx("div",{className:v.bottom,children:e.jsx("div",{className:v.barWrapper,children:e.jsx("div",{className:v.bar,style:{width:`${u>=o&&u!=0?N:100}%`}})})})]}),e.jsxs("div",{className:`${v.projWrapper} ${v.progresses}`,children:[e.jsxs("div",{className:v.top,children:[e.jsx("p",{children:"Performance Tasks:"}),e.jsx("p",{className:v.completed,children:C>=$&&C!=0?$+" out of "+C+" is Completed":"No Projects"})]}),e.jsx("div",{className:v.bottom,children:e.jsx("div",{className:v.barWrapper,children:e.jsx("div",{className:v.bar,style:{width:`${C>=$&&C!=0?w:100}%`}})})})]})]}),e.jsx(we,{to:"/subjects/"+s.subjectNameAbbreviation,className:v.openSubject,children:"Open Subject"})]}):e.jsx(at,{})}const ot="_subConWrapper_1fnzp_1",rt="_topComponent_1fnzp_23",lt="_backButt_1fnzp_1",ut="_right_1fnzp_77",dt="_wrapMenusButton_1fnzp_89",ht="_wrap_1fnzp_89",mt="_hideWrap_1fnzp_99",jt="_selectedChoice_1fnzp_109",ft="_showChoices_1fnzp_149",pt="_hideChoices_1fnzp_157",xt="_choicesBox_1fnzp_165",bt="_contentWrapper_1fnzp_223",_t="_subjectActs_1fnzp_267",St="_content_1fnzp_223",At="_selectAllButton_1fnzp_339",gt="_hideSelectAllButton_1fnzp_355",vt="_transparent_1fnzp_385",h={subConWrapper:ot,topComponent:rt,backButt:lt,right:ut,wrapMenusButton:dt,wrap:ht,hideWrap:mt,selectedChoice:jt,showChoices:ft,hideChoices:pt,choicesBox:xt,contentWrapper:bt,subjectActs:_t,content:St,selectAllButton:At,hideSelectAllButton:gt,transparent:vt},Nt="_showActDesc_ozrv6_1",Ct="_hideActDesc_ozrv6_29",wt="_showActDescBox_ozrv6_37",Bt="_right_ozrv6_73",$t="_stateWrapper_ozrv6_81",yt="_showButton_ozrv6_95",Dt="_choices_ozrv6_103",kt="_hideChoices_ozrv6_105",Pt="_showInfo_ozrv6_115",Mt="_highlight_ozrv6_141",Wt="_unhighlight_ozrv6_161",qt="_hideButton_ozrv6_173",M={showActDesc:Nt,hideActDesc:Ct,showActDescBox:wt,right:Bt,stateWrapper:$t,showButton:yt,choices:Dt,hideChoices:kt,showInfo:Pt,highlight:Mt,unhighlight:Wt,hideButton:qt},zt="_infoBox_xvtjn_1",Et="_showInfoBox_xvtjn_21",Tt="_hideInfoBox_xvtjn_31",Ot="_animHideInfo_xvtjn_41",E={infoBox:zt,showInfoBox:Et,hideInfoBox:Tt,animHideInfo:Ot};function It({showInfo:s,setShowInfo:i}){const{actDesc:n}=t.useContext(T);function a(r){const c=r.currentTarget.classList;c.contains(E.hideInfoBox)?(c.replace(`${E.hideInfoBox}`,`${E.animHideInfo}`),setTimeout(()=>{c.replace(`${E.animHideInfo}`,`${E.hideInfoBox}`)},1e3)):(c.add(`${E.animHideInfo}`),setTimeout(()=>{c.replace(`${E.animHideInfo}`,`${E.hideInfoBox}`)},1e3)),i(!1)}return e.jsx(e.Fragment,{children:e.jsx("div",{className:s?`${E.infoBox} ${E.showInfoBox}`:`${E.infoBox} ${E.hideInfoBox}`,onMouseLeave:a,children:e.jsxs("ul",{children:[e.jsxs("li",{children:["Created At: ",n?.createdAt]}),e.jsxs("li",{children:["Deadline: ",n?.dueDate]}),e.jsxs("li",{children:["Semester: ",n?.semester," Sem"]}),e.jsxs("li",{children:["Quarter: ",n?.quarter," Quarter"]}),e.jsxs("li",{children:["Type: ",n?.typeOfWork]})]})})})}function Qt(){const{actDesc:s,showActDesc:i,setShowActDesc:n,setActDesc:a,defineTypeOfWork:r}=t.useContext(T),[c,b]=t.useState(!1),[m,p]=t.useState(!1);return e.jsx(e.Fragment,{children:e.jsx("div",{className:i?M.showActDesc:M.hideActDesc,children:e.jsxs("div",{className:i?M.showActDescBox:M.hideActDescBox,children:[e.jsxs("h2",{children:["Description",e.jsxs("div",{className:M.right,children:[e.jsxs("div",{className:M.stateWrapper,children:[e.jsx("button",{className:M.showButton,onClick:()=>{b(!c)},children:e.jsx("i",{className:"fa fa-navicon"})}),e.jsxs("div",{className:c?M.choices:M.hideChoices,children:[e.jsx("button",{className:s?.status=="completed"?M.highlight:M.unhighlight,onClick:()=>{s&&r(!1,"completed")},children:"Finish"}),e.jsx("button",{className:s?.status=="pending"?M.highlight:M.unhighlight,onClick:()=>{s&&r(!1,"pending")},children:"Pending"}),e.jsxs("button",{className:M.showInfo,onClick:()=>{p(!m)},children:[e.jsx("i",{className:"fa fa-list-alt"}),e.jsx(It,{showInfo:m,setShowInfo:p})]})]})]}),e.jsx("button",{onClick:()=>{n(!1),a(null)},className:M.hideButton,children:"X"})]})]}),e.jsx("h3",{children:s?.title}),e.jsx("p",{children:s?.description})]})})})}const Ft="_addSubjectWrapper_55ez4_1",Rt="_addSubjectBox_55ez4_29",Lt="_closeButton_55ez4_53",Ht="_top_55ez4_123",Ut="_submit_55ez4_189",V={addSubjectWrapper:Ft,addSubjectBox:Rt,closeButton:Lt,top:Ht,submit:Ut},Zt="_subjectBox_1p62z_1",Vt="_choices_1p62z_51",Xt="_show_1p62z_87",Yt="_subject_1p62z_1",Gt="_status_1p62z_99",y={subjectBox:Zt,choices:Vt,show:Xt,subject:Yt,status:Gt};function Jt({subject:s,setSubject:i}){const[n]=t.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[a,r]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:y.subName,children:"Subject"}),e.jsxs("button",{className:y.subjectBox,onClick:()=>{r(!a)},children:[s,e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:a?`${y.choices} ${y.show}`:y.choices,children:n.map(c=>e.jsx("li",{className:y.subject,onClick:()=>{i(c)},children:c},Math.random()*1))})]})]})}function Kt(){const{quarterAndSemChoices:s,quarter:i,setQuarter:n,semester:a,setSemester:r}=t.useContext(T),[c,b]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:y.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:y.subjectBox,onClick:()=>{b(!c)},children:[a+" Sem: "+i+" Quarter",e.jsx("i",{className:c?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:c?`${y.choices} ${y.show}`:y.choices,children:s.map(m=>e.jsx("li",{className:y.subject,onClick:()=>{n(m.quarter),r(m.sem)},children:m.sem+" Sem: "+m.quarter+" Quarter"},Math.random()*1))})]})]})}function es({status:s,setStatus:i}){const[n]=t.useState(["pending","completed"]),[a,r]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:y.subName,children:"Subject"}),e.jsxs("button",{className:y.subjectBox,onClick:()=>{r(!a)},children:[s,e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:a?`${y.choices} ${y.show}`:y.choices,children:n.map(c=>e.jsx("li",{className:y.status,onClick:()=>{i(c=="pending"?"pending":"completed")},children:c},Math.random()*1))})]})]})}function ts(){const{typeOfWork:s,showAddPrompt:i,setShowAddPrompt:n,setTypeOfWork:a,params:r,quarter:c,semester:b}=t.useContext(T),{userData:m}=t.useContext(Y),[p,u]=t.useState(""),[x,o]=t.useState(""),[_,N]=t.useState(null),[W,C]=t.useState(r?.toUpperCase()),[A,$]=t.useState("pending");async function z(){const w=new Date,P={id:Math.random()*1,title:p,description:x,typeOfWork:s,status:A,createdBy:"Pajarillaga, Bryan",createdAt:`${w?.getFullYear()}-${w?.getMonth()}-${w?.getDate()}`,dueDate:_,subject:W,semester:b,quarter:c,isSelected:!1,timeCreated:Date.now()};try{const g=je(fe,"Main_Database","School_Activities");(await Be(g)).exists()?await oe(g,{[s]:Ce(P)}):await qe(g,{[s]:Ce(P)}),u(""),o(""),N(null),a(""),n(!1)}catch(g){g instanceof ze&&console.log(g)}}if(t.useEffect(()=>{C(r)},[r]),i&&m?.user.status=="Owner")return e.jsx("div",{className:V.addSubjectWrapper,children:e.jsxs("div",{className:V.addSubjectBox,children:[e.jsx("button",{className:V.closeButton,onClick:()=>{a(""),n(!1)},children:"X"}),e.jsxs("h1",{children:["Create ",s]}),e.jsxs("div",{className:V.top,children:[e.jsx(Jt,{subject:W,setSubject:C}),e.jsx(Kt,{}),e.jsx(es,{status:A,setStatus:$}),e.jsx("h2",{className:V.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:w=>{console.log(w.currentTarget.value),N(w.currentTarget.value)}}),e.jsxs("h2",{className:V.actTitle,children:[s," Title"]}),e.jsx("input",{type:"text",value:p,onChange:w=>{u(w.currentTarget.value)}}),e.jsxs("h2",{className:V.actDesc,children:[s," Description"]}),e.jsx("textarea",{rows:5,value:x,onChange:w=>{o(w.currentTarget.value)}})]}),e.jsx("button",{className:V.submit,onClick:z,children:"Submit"})]})})}const ss="_noActivities_1bced_1",ns="_showMenu_1bced_11",cs="_hideMenu_1bced_69",as="_addActivity_1bced_77",is="_hamWrapper_1bced_143",os="_dropDownMenus_1bced_183",rs="_hideDropDown_1bced_235",K={noActivities:ss,showMenu:ns,hideMenu:cs,addActivity:as,hamWrapper:is,dropDownMenus:os,hideDropDown:rs};function ls({task:s}){const{setShowActDesc:i,setCanSelect:n,defineTypeOfWork:a,actDesc:r,menu:c,showMenu:b,menuPos:m,canSelect:p,handleRightClick:u,setActivities:x,setAssignments:o,setProjects:_,handleSelectAll:N,setShowEdit:W}=t.useContext(T),{userData:C}=t.useContext(Y);function A(P){if(p)switch(s?.typeOfWork){case"Activity":x(g=>g?g.map(S=>S.id==s?.id?{...S,isSelected:P}:S):[]);break;case"Assignment":o(g=>g?g.map(S=>S.id==s?.id?{...S,isSelected:P}:S):[]);break;case"Project":_(g=>g?g.map(S=>S.id==s?.id?{...S,isSelected:P}:S):[]);break}}function $(P){switch(P){case 1:i(!0);break;case 2:n(!p),p&&(A(!1),N("All",!1));break;case 3:r&&a(!0,"pending",r);break;case 4:r&&a(!0,"completed",r);break;case 5:s?.isSelected?A(!1):A(!0);break;case 6:W(!0);break}}function z(){if(p)return e.jsxs("button",{onClick:()=>$(5),children:[e.jsx("i",{className:"fa fa-hand-o-up"}),r?.isSelected?"Unselect":"Select"]})}function w(){if(C?.user.status=="Owner")return e.jsxs("button",{onClick:()=>$(6),children:[e.jsx("i",{className:"	fa fa-edit"}),"Edit"]})}return e.jsxs("div",{ref:c,onClick:P=>u(P,null,!1),className:b?K.showMenu:K.hideMenu,style:{left:m.x,top:m.y},children:[e.jsxs("button",{onClick:()=>$(1),children:[e.jsx("i",{className:"fa fa-envelope-open"}),"Open"]}),e.jsx(w,{}),e.jsxs("button",{onClick:()=>$(2),children:[e.jsx("i",{className:p?"fa fa-close":"fa fa-hand-o-up"}),p?"Cancel":"Select"]}),e.jsx(z,{}),e.jsxs("button",{onClick:()=>$(3),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Pending"]}),e.jsxs("button",{onClick:()=>$(4),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Finish"]})]})}function us(){const{setSortingType:s}=t.useContext(T),[i,n]=t.useState(!1),[a,r]=t.useState([{classname:"fa fa-ellipsis-h",functionName:"Pending"},{classname:"fa fa-check",functionName:"Completed"},{classname:"fa fa-sort-numeric-asc",functionName:"Newest-Oldest"},{classname:"fa fa-sort-numeric-desc",functionName:"Oldest-Newest"},{classname:"fa fa-sort-alpha-asc",functionName:"A-Z"},{classname:"fa fa-sort-alpha-desc",functionName:"Z-A"}]),[c,b]=t.useState({classname:"fa fa-sort-alpha-asc",functionName:"A-Z"});return t.useEffect(()=>{c&&s(c?.functionName)},[c]),e.jsxs("button",{className:K.hamWrapper,onClick:()=>{n(!i)},children:[e.jsxs("p",{children:["Sort",e.jsx("i",{className:c?.classname}),e.jsx("i",{className:i?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("ul",{className:i?K.dropDownMenus:K.hideDropDown,children:a.map(m=>e.jsxs("li",{onClick:()=>{r(p=>p.map(u=>(m.functionName==u.functionName&&b(u),u)))},children:[e.jsx("i",{className:m.classname}),e.jsx("p",{children:m.functionName})]},m.functionName))})]})}function re({type:s}){const{userData:i}=t.useContext(Y),{setTypeOfWork:n,setShowAddPrompt:a}=t.useContext(T);if(i?.user?.status=="Owner")return e.jsx("div",{className:K.addActivity,onClick:()=>{n(s),a(!0)},children:e.jsx("h1",{children:"+"})})}const ds="_activity_19w5l_1",hs="_pendingActivity_19w5l_3",ms="_selected_19w5l_69",js="_notSelected_19w5l_71",le={activity:ds,pendingActivity:hs,selected:ms,notSelected:js};function fs({task:s,handleRightClick:i,setActDesc:n}){const{canSelect:a,setActivities:r,setAssignments:c,setProjects:b}=t.useContext(T),m=()=>{if(a)return e.jsx("input",{type:"checkbox",checked:s?.isSelected,onChange:()=>{p(null)},className:s?.isSelected?le.selected:le.notSelected})};function p(u){a&&(r(x=>x?x.map(o=>o.id==u?.id?{...o,isSelected:!o.isSelected}:o):[]),c(x=>x?x.map(o=>o.id==u?.id?{...o,isSelected:!o.isSelected}:o):[]),b(x=>x?x.map(o=>o.id==u?.id?{...o,isSelected:!o.isSelected}:o):[]))}return e.jsxs("div",{id:`${s?.id}`,className:s?.status=="completed"?le.activity:le.pendingActivity,onContextMenu:u=>i(u,s,!1),onDoubleClick:u=>i(u,s,!0),onClick:()=>{n(s),p(s)},children:[e.jsx("h2",{children:s?.title}),e.jsx("p",{children:s?.description}),e.jsx(m,{})]})}const ps="_activitySkeleton_o3c77_1",xs={activitySkeleton:ps};function bs({count:s}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((i,n)=>e.jsx("div",{className:xs.activitySkeleton},n))})}function ue({typeOfWork:s,sortingType:i}){const{activities:n,assignments:a,projects:r,selectedChoice:c,handleRightClick:b,setActDesc:m}=t.useContext(T),{userData:p}=t.useContext(Y),u=s==="Activity"?n||[]:s==="Assignment"?a||[]:r||[],x=t.useMemo(()=>{let o=[...u];return i==="Newest-Oldest"?o.sort((_,N)=>N.timeCreated-_.timeCreated):i==="Oldest-Newest"?o.sort((_,N)=>_.timeCreated-N.timeCreated):i==="A-Z"?o.sort((_,N)=>(_.title||"").localeCompare(N.title||"")):i==="Z-A"?o.sort((_,N)=>(N.title||"").localeCompare(_.title||"")):i==="Pending"?o=o.filter(_=>_.status==="pending"):i==="Completed"&&(o=o.filter(_=>_.status==="completed")),o.filter(_=>_.quarter===c.quarter&&_.semester===c.sem)},[u,i,c]);if(p){if(p&&x.length!=0)return e.jsx(e.Fragment,{children:x.map(o=>e.jsx(fs,{task:o,handleRightClick:b,setActDesc:m},o.id||o.timeCreated))});if(p&&x.length==0)return e.jsxs("h2",{className:K.noActivities,children:[s==="Activity"&&"There are no Activities!",s==="Assignment"&&"There are no Assignments!",s==="Project"&&"There are no Projects!"]})}else return e.jsx(bs,{count:6})}const _s="_addSubjectWrapper_55ez4_1",Ss="_addSubjectBox_55ez4_29",As="_closeButton_55ez4_53",gs="_top_55ez4_123",vs="_submit_55ez4_189",X={addSubjectWrapper:_s,addSubjectBox:Ss,closeButton:As,top:gs,submit:vs},Ns="_subjectBox_1p62z_1",Cs="_choices_1p62z_51",ws="_show_1p62z_87",Bs="_subject_1p62z_1",$s="_status_1p62z_99",D={subjectBox:Ns,choices:Cs,show:ws,subject:Bs,status:$s};function ys({subject:s,setSubject:i}){const[n]=t.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[a,r]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:D.subName,children:"Subject"}),e.jsxs("button",{className:D.subjectBox,onClick:()=>{r(!a)},children:[s,e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:a?`${D.choices} ${D.show}`:D.choices,children:n.map(c=>e.jsx("li",{className:D.subject,onClick:()=>{i(c)},children:c},Math.random()*1))})]})]})}function Ds(){const{quarterAndSemChoices:s,quarter:i,setQuarter:n,semester:a,setSemester:r}=t.useContext(T),[c,b]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:D.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:D.subjectBox,onClick:()=>{b(!c)},children:[a+" Sem: "+i+" Quarter",e.jsx("i",{className:c?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:c?`${D.choices} ${D.show}`:D.choices,children:s.map(m=>e.jsx("li",{className:D.subject,onClick:()=>{n(m.quarter),r(m.sem)},children:m.sem+" Sem: "+m.quarter+" Quarter"},Math.random()*1))})]})]})}function ks({status:s,setStatus:i}){const[n]=t.useState(["pending","completed"]),[a,r]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:D.subName,children:"Subject"}),e.jsxs("button",{className:D.subjectBox,onClick:()=>{r(!a)},children:[s,e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:a?`${D.choices} ${D.show}`:D.choices,children:n.map(c=>e.jsx("li",{className:D.status,onClick:()=>{i(c=="pending"?"pending":"completed")},children:c},Math.random()*1))})]})]})}function Ps(){const{typeOfWork:s,setTypeOfWork:i,params:n,quarter:a,semester:r,actDesc:c,showEdit:b,setShowEdit:m}=t.useContext(T),{userData:p}=t.useContext(Y),[u,x]=t.useState(""),[o,_]=t.useState(""),[N,W]=t.useState(""),[C,A]=t.useState(n?.toUpperCase()),[$,z]=t.useState("pending"),[w,P]=t.useState("");async function g(){const S=new Date,O={id:w,title:u,description:o,typeOfWork:s,status:$,createdBy:"Pajarillaga, Bryan",createdAt:`${S?.getFullYear()}-${S?.getMonth()}-${S?.getDate()}`,dueDate:N,subject:C,semester:r,quarter:a,isSelected:!1,timeCreated:Date.now()},R=je(fe,"Main_Database","School_Activities"),q=(await Be(R)).data();if(q)switch(s){case"Activity":const I=q.Activity.map(j=>j.id==w?{...O,id:Math.random()*1}:{...j});await oe(R,{[s]:I});break;case"Assignment":const te=q.Assignment.map(j=>j.id==w?{...O,id:Math.random()*1}:{...j});await oe(R,{[s]:te});break;case"Project":const H=q.Project.map(j=>j.id==w?{...O,id:Math.random()*1}:{...j});await oe(R,{[s]:H});break}m(!1)}if(t.useEffect(()=>{A(n)},[n]),t.useEffect(()=>{c&&(x(c.title),_(c.description),W(c.dueDate),z(c.status),P(c.id))},[c]),b&&p?.user.status=="Owner")return e.jsx("div",{className:X.addSubjectWrapper,children:e.jsxs("div",{className:X.addSubjectBox,children:[e.jsx("button",{className:X.closeButton,onClick:()=>{i(""),m(!1)},children:"X"}),e.jsxs("h1",{children:["Edit ",s]}),e.jsxs("div",{className:X.top,children:[e.jsx(ys,{subject:C,setSubject:A}),e.jsx(Ds,{}),e.jsx(ks,{status:$,setStatus:z}),e.jsx("h2",{className:X.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:S=>{console.log(S.currentTarget.value),W(S.currentTarget.value)}}),e.jsxs("h2",{className:X.actTitle,children:[s," Title"]}),e.jsx("input",{type:"text",value:u,onChange:S=>{x(S.currentTarget.value)}}),e.jsxs("h2",{className:X.actDescription,children:[s," Description"]}),e.jsx("textarea",{rows:5,value:o,onChange:S=>{_(S.currentTarget.value)}})]}),e.jsx("button",{className:X.submit,onClick:g,children:"Submit"})]})})}const T=t.createContext({});function Ms({params:s,subjects:i}){const{userData:n,userObject:a,setUserData:r}=t.useContext(Y),{selectedQuarter:c,selectedSemester:b}=t.useContext(pe),m=t.useRef(null),p=Ee(),u=Te(),[x,o]=t.useState(null),[_,N]=t.useState(null),[W,C]=t.useState(null),[A,$]=t.useState(null),[z,w]=t.useState(!1),[P,g]=t.useState(!1),[S,O]=t.useState(!1),[R,ee]=t.useState(!1),[q,G]=t.useState(!1),[I,L]=t.useState(!1),[te,ae]=t.useState(!1),[H,j]=t.useState(""),[U,xe]=t.useState("2nd"),[$e,be]=t.useState("1st"),[ie,ye]=t.useState("Pending"),[de,he]=t.useState(null),[De,_e]=t.useState({x:0,y:0}),[se,ne]=t.useState({quarter:"2nd",sem:"1st"}),[Z,Q]=t.useState({Activity:!1,Assignment:!1,Project:!1,Exam:!1,Groupings:!1}),[Se,Ae]=t.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]);function ke(l,B,d){d&&l.preventDefault(),g(!0),_e({x:l.clientX,y:l.clientY}),B&&(j(B.typeOfWork),he(B))}function Pe(l,B,d){switch(H){case"Activity":f("activities");break;case"Assignment":f("assignments");break;case"Project":f("petas");break;case"Exam":f("exams");break}function f(k){r(me=>{if(!me)return null;const ve=me[k]?.map(ce=>{if(d&&d.id===ce.id)return{...d,status:B};const Ne=x?.find(We=>We.id===ce.id);return Ne?.isSelected?(console.log(Ne),{...ce,status:B}):ce})||[];return he(l?null:de),ge(ve,k),Q(ce=>({...ce,[H]:!1})),{...me,[k]:ve}})}}function F(l,B){if(q)switch(l){case"Activity":o(d=>d?d?.map(f=>({...f,isSelected:f.quarter==U?B:!1})):[]);break;case"Assignment":N(d=>d?d?.map(f=>({...f,isSelected:f.quarter==U?B:!1})):[]);break;case"Project":C(d=>d?d?.map(f=>({...f,isSelected:f.quarter==U?B:!1})):[]);break;case"Exam":$(d=>d?d?.map(f=>({...f,isSelected:f.quarter==U?B:!1})):[]);break;case"All":o(d=>d?d?.map(f=>({...f,isSelected:f.quarter==U?B:!1})):[]),N(d=>d?d?.map(f=>({...f,isSelected:f.quarter==U?B:!1})):[]),C(d=>d?d?.map(f=>({...f,isSelected:f.quarter==U?B:!1})):[]);break}}async function ge(l,B){try{if(l&&B){const d=je(fe,"McCarthy",`${a?.uid}`);await oe(d,{[B]:l})}}catch{}}t.useEffect(()=>{(n?.activities!=null||n?.assignments!=null||n?.petas!=null)&&(o(n.activities.filter(l=>l.subject===s)),N(n.assignments.filter(l=>l.subject===s)),C(n.petas.filter(l=>l.subject===s)),$(n.exams.filter(l=>l.subject===s)))},[n,s]),t.useEffect(()=>{xe(se.quarter),be(se.sem)},[se]),t.useEffect(()=>{ne({quarter:c,sem:b})},[c,b]),t.useEffect(()=>{if(u.hash&&x!=null){const l=u.hash.substring(1).split("#"),[B,d]=l;if(B&&document.getElementById(B)?.scrollIntoView({behavior:"smooth"}),d){const f=document.getElementById(d);switch(f?.scrollIntoView({behavior:"smooth"}),B){case"Activity":x?.map(k=>{k.id==d&&ne({quarter:k.quarter,sem:k.semester})});break;case"Assignment":_?.map(k=>{k.id==d&&ne({quarter:k.quarter,sem:k.semester})});break;case"Project":console.log("Project"),W?.map(k=>{k.id==d&&(console.log("Project"),ne({quarter:k.quarter,sem:k.semester}))});break}f&&setTimeout(()=>{p(`/subjects/${s}`)},1e3)}}},[u,x]);const Me={canSelect:q,setCanSelect:G,showMenu:P,setShowMenu:g,showActDesc:S,showAddPrompt:R,setShowAddPrompt:ee,showEdit:te,setShowEdit:ae,typeOfWork:H,setTypeOfWork:j,selectedChoice:se,setSelectedChoice:ne,setShowActDesc:O,actDesc:de,setActDesc:he,activities:x,setActivities:o,assignments:_,setAssignments:N,projects:W,setProjects:C,exams:A,setExams:$,quarterAndSemChoices:Se,setQuarterAndSemChoices:Ae,quarter:U,setQuarter:xe,semester:$e,setSemester:be,params:s,sortingType:ie,setSortingType:ye,menuPos:De,setMenuPos:_e,defineTypeOfWork:Pe,handleRightClick:ke,handleSelectAll:F,saveToDatabase:ge,menu:m};if(s)return e.jsx(T.Provider,{value:Me,children:e.jsxs("div",{className:h.subConWrapper,onClick:()=>{g(!1)},children:[e.jsx(ls,{task:de}),e.jsx(Qt,{}),e.jsx(ts,{}),e.jsx(Ps,{}),e.jsxs("div",{className:h.topComponent,children:[e.jsx(we,{to:"/subjects",id:h.backButt,children:"Back"}),e.jsx("h1",{children:i.map(l=>l.subjectNameAbbreviation.toLowerCase()==s.toLowerCase()?l.subjectNameAbbreviation:"")}),e.jsxs("div",{className:h.right,children:[e.jsx("button",{className:h.wrapMenusButton,onClick:()=>{L(!I)},children:e.jsx("i",{className:"fa fa-bars"})}),e.jsxs("div",{className:I?h.wrap:h.hideWrap,children:[e.jsxs("div",{className:h.selectedChoice,children:[e.jsxs("button",{onClick:()=>{w(!z)},children:[se.sem," Sem: ",se.quarter," Quarter",e.jsx("i",{className:z?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("div",{className:z?`${h.choicesBox} ${h.showChoices}`:`${h.choicesBox} ${h.hideChoices}`,children:Se.map((l,B)=>e.jsxs("button",{onClick:()=>{Ae(d=>d.map((f,k)=>(B==k&&ne(f),f))),w(!1)},children:[l.sem," Sem: ",l.quarter," Quarter"]},Math.random()*1))})]}),e.jsx(us,{})]})]})]}),e.jsxs("div",{className:h.contentWrapper,children:[e.jsxs("div",{className:`${h.subjectActs} ${h.subjectActivities}`,id:"Activity",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Activities"})]}),e.jsxs("div",{className:h.content,children:[e.jsx(re,{type:"Activity"},Math.random()*1),e.jsx("button",{className:q?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{Z.Activity?(F("Activity",!1),Q(l=>({...l,Activity:!1}))):(F("Activity",!0),Q(l=>({...l,Activity:!0})))},children:e.jsx("i",{className:Z.Activity?"fa fa-check":h.transparent})}),e.jsx(ue,{typeOfWork:"Activity",sortingType:ie})]})]}),e.jsxs("div",{className:`${h.subjectActs} ${h.subjectAssignments}`,id:"Assignment",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Assignment"})]}),e.jsxs("div",{className:h.content,children:[e.jsx(re,{type:"Assignment"},Math.random()*1),e.jsx("button",{className:q?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{Z.Assignment?(F("Assignment",!1),Q(l=>({...l,Assignment:!1}))):(F("Assignment",!0),Q(l=>({...l,Assignment:!0})))},children:e.jsx("i",{className:Z.Assignment?"fa fa-check":h.transparent})}),e.jsx(ue,{typeOfWork:"Assignment",sortingType:ie})]})]}),e.jsxs("div",{className:`${h.subjectActs} ${h.subjectProjects}`,id:"Project",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Performance Tasks"})]}),e.jsxs("div",{className:h.content,children:[e.jsx(re,{type:"Project"},Math.random()*1),e.jsx("button",{className:q?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{Z.Project?(F("Project",!1),Q(l=>({...l,Project:!1}))):(F("Project",!0),Q(l=>({...l,Project:!0})))},children:e.jsx("i",{className:Z.Project?"fa fa-check":h.transparent})}),e.jsx(ue,{typeOfWork:"Project",sortingType:ie})]})]}),e.jsxs("div",{className:`${h.subjectActs} ${h.subjectActivities}`,id:"Exam",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Exams"})]}),e.jsxs("div",{className:h.content,children:[e.jsx(re,{type:"Activity"},Math.random()*1),e.jsx("button",{className:q?h.selectAllButton:h.hideSelectAllButton,onClick:()=>{Z.Activity?(F("Exam",!1),Q(l=>({...l,Exam:!1}))):(F("Exam",!0),Q(l=>({...l,Exam:!0})))},children:e.jsx("i",{className:Z.Exam?"fa fa-check":h.transparent})}),e.jsx(ue,{typeOfWork:"Exam",sortingType:ie})]})]})]})]})})}const pe=t.createContext(null);function zs(){const{pageDetector:s,userObject:i}=t.useContext(Y),{subjectName:n}=Oe(),[a,r]=t.useState(!1),[c,b]=t.useState("1st"),[m,p]=t.useState("1st"),[u]=t.useState(Ie),[x,o]=t.useState({quarter:"1st",sem:"1st"}),[_]=t.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]),N=t.useRef(null),W=t.useRef(null);t.useEffect(()=>{s(null,1,!1)},[n]),t.useEffect(()=>{i?.uid?s(null,1,!1):s(0,null,!0)},[i]);const C={selectedQuarter:c,setSelectedQuarter:b,selectedSemester:m,setSelectedSemester:p};return e.jsx(pe.Provider,{value:C,children:n?e.jsx(Ms,{params:n,subjects:u}):e.jsxs("div",{ref:N,className:`${J.subjectsWrapper}`,children:[e.jsxs("header",{ref:W,id:"SubjectNavigation",className:`${J.top}`,children:[e.jsx("h1",{children:"Subjects"}),e.jsxs("div",{className:J.dropDownButton,onClick:()=>r(A=>!A),children:[x.sem," Semester: ",x.quarter," Quarter",e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("div",{className:a?`${J.choicesBox} ${J.showChoices}`:`${J.choicesBox} ${J.hideChoices}`,children:_.map(A=>e.jsxs("button",{onClick:()=>{o(A),b(A.quarter),p(A.sem)},children:[A.sem," Sem: ",A.quarter," Quarter"]},`${A.sem}-${A.quarter}`))})]})]}),e.jsx("section",{children:u.map(A=>e.jsx(it,{subData:A},A.subjectTeacher))})]})})}export{pe as SubjectsContext,zs as default};
