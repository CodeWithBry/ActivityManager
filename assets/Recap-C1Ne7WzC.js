import{j as e,r,d as $,f as T,g as O,b as q,a as V,s as G,F as z,c as H,o as F}from"./index-BcdzfKrx.js";const I="_recapWrapper_t2jca_1",Q="_top_t2jca_31",U="_weekWrapper_t2jca_63",X="_weekButton_t2jca_79",J="_hideDropDown_t2jca_99",K="_weeksDropdown_t2jca_107",Y="_createRecap_t2jca_163",Z="_daysWrapper_t2jca_191",W={recapWrapper:I,top:Q,weekWrapper:U,weekButton:X,hideDropDown:J,weeksDropdown:K,createRecap:Y,daysWrapper:Z},ee="_daysWrapper_18kka_1",se="_dayCard_18kka_1",te="_selectedDay_18kka_43",ae="_dayHeader_18kka_83",ne="_hideButton_18kka_91",ce="_cancelDay_18kka_99",ie="_openDay_18kka_147",re="_dayContent_18kka_191",oe="_activities_18kka_235",le="_actWrapper_18kka_255",y={daysWrapper:ee,dayCard:se,selectedDay:te,dayHeader:ae,hideButton:ne,cancelDay:ce,openDay:ie,dayContent:re,activities:oe,actWrapper:le};function ue({day:o,daySelected:h,setDaySelected:d}){return e.jsx("div",{className:h.day==o.day?y.selectedDay:y.daysWrapper,children:e.jsxs("div",{className:y.dayCard,children:[e.jsxs("div",{className:y.dayHeader,children:[o.day," ",e.jsx("button",{className:h.day==o.day?y.cancelDay:y.hideButton,onClick:()=>{d(s=>({...s,day:""}))},children:"x"})]}),e.jsxs("div",{className:y.dayContent,children:[e.jsxs("div",{className:y.activities,children:[e.jsx("h2",{children:"Activities"}),e.jsx("ul",{className:y.actWrapper,children:o.Activities.length!=0?o.Activities.map(s=>e.jsxs("li",{children:[e.jsx("i",{className:"fa fa-caret-right"})," ",e.jsx("span",{children:s.subject}),": ",s.title+s.status]},s.id)):e.jsx("li",{children:"There are no Activity"})})]}),e.jsxs("div",{className:y.activities,children:[e.jsx("h2",{children:"Assignment"}),e.jsx("ul",{className:y.actWrapper,children:o.Assignment.length!=0?o.Assignment.map(s=>e.jsxs("li",{children:[e.jsx("i",{className:"fa fa-caret-right"})," ",e.jsx("span",{children:s.subject}),": ",s.title+s.status]},s.id)):e.jsx("li",{children:"There are no Assignment"})})]}),e.jsxs("div",{className:y.activities,children:[e.jsx("h2",{children:"Projects"}),e.jsx("ul",{className:y.actWrapper,children:o.Projects.length!=0?o.Projects.map(s=>e.jsxs("li",{children:[e.jsx("i",{className:"fa fa-caret-right"})," ",e.jsx("span",{children:s.subject}),": ",s.title+s.status]},s.id)):e.jsx("li",{children:"There are no Project"})})]}),e.jsxs("div",{className:y.activities,children:[e.jsx("h2",{children:"Exams"}),e.jsx("ul",{className:y.actWrapper,children:o.Exams.length!=0?o.Exams.map(s=>e.jsxs("li",{children:[e.jsx("i",{className:"fa fa-caret-right"})," ",e.jsx("span",{children:s.subject}),": ",s.title+s.status]},s.id)):e.jsx("li",{children:"There are no Exam"})})]})]}),e.jsx("button",{className:y.openDay,onClick:()=>{d(s=>({...s,day:o.day}))},children:"Open"})]})})}const de="_createPrompt_1insj_1",he="_addSubjectBox_1insj_29",me="_closeButton_1insj_53",je="_top_1insj_123",pe="_activitiesWrapper_1insj_177",xe="_lists_1insj_315",fe="_submit_1insj_355",f={createPrompt:de,addSubjectBox:he,closeButton:me,top:je,activitiesWrapper:pe,lists:xe,submit:fe},ye="_subjectBox_1eqzh_1",_e="_choices_1eqzh_51",be="_show_1eqzh_87",ke="_subject_1eqzh_1",De="_subName_1eqzh_127",m={subjectBox:ye,choices:_e,show:be,subject:ke,subName:De};function ge(){const{selectedDay:o,setSelectedDay:h}=r.useContext(M),d=["Monday","Tuesday","Wednesday","Thursday","Friday"],[s,u]=r.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:m.subName,children:"Days"}),e.jsxs("button",{className:m.subjectBox,onClick:()=>{u(!s)},children:[o,e.jsx("i",{className:s?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:s?`${m.choices} ${m.show}`:m.choices,children:d.map(j=>e.jsx("li",{className:m.subject,onClick:()=>{h(j)},children:j},Math.random()*1))})]})]})}const Ne="_addSubjectWrapper_113me_1",Ae="_addSubjectBox_113me_29",Se="_closeButton_113me_53",we="_top_113me_123",Ce="_buttonWrapper_113me_189",We="_submit_113me_199",R={addSubjectWrapper:Ne,addSubjectBox:Ae,closeButton:Se,top:we,buttonWrapper:Ce,submit:We};function Re({subject:o,setSubject:h}){const[d]=r.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[s,u]=r.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:m.subName,children:"Subject"}),e.jsxs("button",{className:m.subjectBox,onClick:()=>{u(!s)},children:[o,e.jsx("i",{className:s?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:s?`${m.choices} ${m.show}`:m.choices,children:d.map(j=>e.jsx("li",{className:m.subject,onClick:()=>{h(j)},children:j},Math.random()*1))})]})]})}function Pe({selectedStatus:o,setSelectedStatus:h}){const[d,s]=r.useState(!1),[u]=r.useState(["(Submitted)","(Continue)",""]);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:m.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:m.subjectBox,onClick:()=>{s(!d)},children:[o,e.jsx("i",{className:d?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:d?`${m.choices} ${m.show}`:m.choices,children:u.map(j=>e.jsx("li",{className:m.subject,onClick:()=>{h(j)},children:j},Math.random()*1))})]})]})}function ve(){const{typeOfWork:o,setTypeOfWork:h,showActPrompt:d,setShowActPrompt:s,setRecap:u,recap:j,selectedDay:C}=r.useContext(M),[A,P]=r.useState(""),[S,k]=r.useState(""),[D,v]=r.useState("(Submitted)"),[g,B]=r.useState("CSS");function E(l){const i={id:Math.random()*1,status:D,title:A,description:S,typeOfWork:o,subject:g};l?(_(i),s(!1)):_(i)}function _(l){switch(o){case"Activity":u(i=>{if(!i)return i;const p=i.days.map(t=>C==t.day?{...t,Activities:[...t.Activities,{...l,status:D}]}:{...t});return{...i,days:p}});break;case"Groupings":u(i=>{if(!i)return i;const p=i.days.map(t=>C==t.day?{...t,Groupings:[...t.Groupings,{...l,status:D}]}:{...t});return{...i,days:p}});break;case"Assignment":u(i=>{if(!i)return i;const p=i.days.map(t=>C==t.day?{...t,Assignment:[...t.Assignment,{...l,status:D}]}:{...t});return{...i,days:p}});break;case"Project":u(i=>{if(!i)return i;const p=i.days.map(t=>C==t.day?{...t,Projects:[...t.Projects,{...l,status:D}]}:{...t});return{...i,days:p}});break;case"Exams":u(i=>{if(!i)return i;const p=i.days.map(t=>C==t.day?{...t,Exams:[...t.Exams,{...l,status:D}]}:{...t});return{...i,days:p}});break}}if(r.useEffect(()=>{j&&console.log(j)},[j]),d)return e.jsx("div",{className:R.addSubjectWrapper,children:e.jsxs("div",{className:R.addSubjectBox,children:[e.jsx("button",{className:R.closeButton,onClick:()=>{h(""),s(!1)},children:"X"}),e.jsxs("h1",{children:["Create ",o]}),e.jsxs("div",{className:R.top,children:[e.jsx(Re,{subject:g,setSubject:B}),e.jsx(Pe,{selectedStatus:D,setSelectedStatus:v}),e.jsxs("h2",{className:R.actTitle,children:[o," Title"]}),e.jsx("input",{type:"text",value:A,onChange:l=>{P(l.currentTarget.value)}}),e.jsxs("h2",{className:R.actDesc,children:[o," Description"]}),e.jsx("textarea",{rows:5,value:S,onChange:l=>{k(l.currentTarget.value)}})]}),e.jsxs("div",{className:R.buttonWrapper,children:[e.jsx("button",{className:R.submit,onClick:()=>E(!0),children:"Submit Only"}),e.jsx("button",{className:R.submit,onClick:()=>E(!1),children:"Create Again"})]})]})})}const M=r.createContext({});function Be({showAddRecap:o,setShowAddRecap:h,editRecap:d,setEditRecap:s,weeklyRecaps:u}){const j={monthAndDay:"",days:[{day:"Monday",Activities:[],Assignment:[],Groupings:[],Projects:[],Exams:[]},{day:"Tuesday",Activities:[],Assignment:[],Groupings:[],Projects:[],Exams:[]},{day:"Wednesday",Activities:[],Assignment:[],Groupings:[],Projects:[],Exams:[]},{day:"Thursday",Activities:[],Assignment:[],Groupings:[],Projects:[],Exams:[]},{day:"Friday",Activities:[],Assignment:[],Groupings:[],Projects:[],Exams:[]}]},[C,A]=r.useState(!1),[P,S]=r.useState("Activity"),[k,D]=r.useState("Monday"),[v,g]=r.useState("1st"),[B,E]=r.useState("1st"),[_,l]=r.useState(j);async function i(){const c={monthAndDay:_.monthAndDay};try{const a=$(T,"Main_Database","Recaps"),n=$(T,"Main_Database","Recaps",`${c.monthAndDay}`,`${c.monthAndDay}`);(await O(a)).exists()?await q(a,{ListsOfRecap:V(c)}):await G(a,{ListsOfRecap:V(c)}),await G(n,{[c.monthAndDay]:_}),h(!1),s(!1)}catch(a){a instanceof z&&console.log(a),h(!1)}}function p(c,a){switch(a){case"Activity":l(n=>{if(!n)return n;const b=n.days.map(x=>{const N=x.Activities.filter(w=>w.id!=c);return{...x,Activities:N}});return{...n,days:b}});break;case"Groupings":l(n=>{if(!n||!n)return n;const b=n.days.map(x=>{const N=x.Groupings.filter(w=>w.id!=c);return{...x,Groupings:N}});return{...n,days:b}});break;case"Assignment":l(n=>{if(!n)return n;const b=n.days.map(x=>{const N=x.Assignment.filter(w=>w.id!=c);return{...x,Assignment:N}});return{...n,days:b}});break;case"Project":l(n=>{if(!n)return n;const b=n.days.map(x=>{const N=x.Projects.filter(w=>w.id!=c);return{...x,Projects:N}});return{...n,days:b}});break;case"Exams":l(n=>{if(!n)return n;const b=n.days.map(x=>{const N=x.Exams.filter(w=>w.id!=c);return{...x,Exams:N}});return{...n,days:b}});break}}r.useEffect(()=>{d&&u!=null&&l(u)},[u,d]);const t={showActPrompt:C,setShowActPrompt:A,selectedDay:k,setSelectedDay:D,typeOfWork:P,setTypeOfWork:S,quarter:v,setQuarter:g,semester:B,setSemester:E,recap:_,setRecap:l,createRecap:i};if(o||d)return e.jsxs(M.Provider,{value:t,children:[e.jsx(ve,{}),e.jsx("div",{className:f.createPrompt,children:e.jsxs("div",{className:f.addSubjectBox,children:[e.jsx("button",{className:f.closeButton,onClick:()=>{h(!1),s(!1),l(j)},children:"X"}),e.jsxs("div",{className:f.top,children:[e.jsx(ge,{}),e.jsx("h2",{className:f.title,children:"Month and Day"}),e.jsx("input",{type:"text",value:_.monthAndDay,onChange:c=>{const a=c.currentTarget.value;l(n=>({...n,monthAndDay:a}))}}),e.jsxs("div",{className:f.activitiesWrapper,children:[e.jsxs("h2",{className:f.actTitle,children:[e.jsx("span",{children:"Activities: "}),e.jsx("button",{onClick:()=>{A(!0),S("Activity")},children:"Create Actvity"})]}),e.jsx("ul",{children:_?.days.map(c=>c.day==k&&c.Activities.map(a=>e.jsxs("li",{className:f.lists,children:[e.jsxs("span",{children:[a.subject,": ",a.title]}),e.jsxs("button",{onClick:()=>{p(a.id,a.typeOfWork)},children:[" ",e.jsx("i",{className:"fa fa-trash"})," "]})]},Math.random()*1)))}),e.jsxs("h2",{className:f.actTitle,children:[e.jsx("span",{children:"Group Activities: "}),e.jsx("button",{onClick:()=>{A(!0),S("Groupings")},children:"Create Groupings"})]}),e.jsx("ul",{children:_?.days.map(c=>c.day==k&&c.Groupings.map(a=>e.jsxs("li",{className:f.lists,children:[e.jsxs("span",{children:[a.subject,": ",a.title]}),e.jsxs("button",{onClick:()=>{p(a.id,a.typeOfWork)},children:[" ",e.jsx("i",{className:"fa fa-trash"})," "]})]},Math.random()*1)))}),e.jsxs("h2",{className:f.actTitle,children:[e.jsx("span",{children:"Assignments: "}),e.jsx("button",{onClick:()=>{A(!0),S("Assignment")},children:"Create Assignment"})]}),e.jsx("ul",{children:_?.days.map(c=>c.day==k&&c.Assignment.map(a=>e.jsxs("li",{className:f.lists,children:[e.jsxs("span",{children:[a.subject,": ",a.title]}),e.jsxs("button",{onClick:()=>{p(a.id,a.typeOfWork)},children:[" ",e.jsx("i",{className:"fa fa-trash"})," "]})]},Math.random()*1)))}),e.jsxs("h2",{className:f.actTitle,children:[e.jsx("span",{children:"Projects: "}),e.jsx("button",{onClick:()=>{A(!0),S("Project")},children:"Create Project"})]}),e.jsx("ul",{children:_?.days.map(c=>c.day==k&&c.Projects.map(a=>e.jsxs("li",{className:f.lists,children:[e.jsxs("span",{children:[a.subject,": ",a.title]}),e.jsxs("button",{onClick:()=>{p(a.id,a.typeOfWork)},children:[" ",e.jsx("i",{className:"fa fa-trash"})," "]})]},Math.random()*1)))}),e.jsxs("h2",{className:f.actTitle,children:[e.jsx("span",{children:"Exams: "}),e.jsx("button",{onClick:()=>{A(!0),S("Exams")},children:"Create Exam"})]}),e.jsx("ul",{children:_?.days.map(c=>c.day==k&&c.Exams.map(a=>e.jsxs("li",{className:f.lists,children:[e.jsxs("span",{children:[a.subject,": ",a.title]}),e.jsxs("button",{onClick:()=>{p(a.id,a.typeOfWork)},children:[" ",e.jsx("i",{className:"fa fa-trash"})," "]})]},Math.random()*1)))})]}),e.jsx("button",{className:f.submit,onClick:i,children:"Submit"})]})]})})]})}const Ee="_skeletonDay_1irx6_1",$e={skeletonDay:Ee};function Te({count:o}){return e.jsx(e.Fragment,{children:Array.from({length:o}).map(h=>e.jsx("div",{className:$e.skeletonDay}))})}function Me(){const{userData:o,pageDetector:h,userObject:d}=r.useContext(H),[s,u]=r.useState(!1),[j,C]=r.useState(!1),[A,P]=r.useState(!1),[S,k]=r.useState(!0),[D,v]=r.useState(null),[g,B]=r.useState({}),[E,_]=r.useState({day:""}),[l,i]=r.useState([]);async function p(t){const c=$(T,"Main_Database","Recaps",`${t}`,`${t}`),n=(await O(c)).data();if(!n)return;const x=n[t];v(x)}return r.useEffect(()=>{const t=$(T,"Main_Database","Recaps"),c=F(t,a=>{k(!0),console.log("Render!");const n=a.data()?.ListsOfRecap;n&&(B(n[n.length-1]),i(n))});return()=>{c()}},[]),r.useEffect(()=>{const t=g?$(T,"Main_Database","Recaps",`${g.monthAndDay}`,`${g.monthAndDay}`):null,c=g&&t?F(t,a=>{async function n(){const b=$(T,"Main_Database","Recaps",`${l[l.length-1]?.monthAndDay}`,`${l[l.length-1]?.monthAndDay}`),N=(await O(b)).data();if(k(!1),!N)return;const w=l[l.length-1]?.monthAndDay,L=N[w];v(L),k(!1)}a.data()&&n()}):null;return()=>{c&&c()}},[g,l]),r.useEffect(()=>{d?.uid?h(null,2,!1):h(0,null,!0)},[d]),e.jsxs("div",{className:W.recapWrapper,children:[e.jsx(Be,{weeklyRecaps:D,showAddRecap:j,setShowAddRecap:C,editRecap:A,setEditRecap:P}),e.jsxs("div",{className:W.top,children:[e.jsx("h2",{children:"Weekly Recap"}),e.jsxs("div",{className:W.weekWrapper,children:[e.jsx("button",{onClick:()=>{u(!s)},className:W.weekButton,children:g.monthAndDay?g.monthAndDay:"Nothing"}),e.jsx("ul",{className:s?W.weeksDropdown:W.hideDropDown,children:l?.map(t=>e.jsx("li",{onClick:()=>{B(t),t.monthAndDay&&p(t.monthAndDay)},children:t.monthAndDay},t.monthAndDay))}),o?.user.status=="Owner"&&e.jsx("button",{className:W.createRecap,onClick:()=>C(!0),children:"Create Recap"}),o?.user.status=="Owner"&&e.jsx("button",{className:W.createRecap,onClick:()=>P(!0),children:e.jsx("i",{className:"fa fa-edit"})})]})]}),e.jsx("div",{className:W.daysWrapper,children:S?e.jsx(Te,{count:5}):D?.days.map(t=>e.jsx(ue,{day:t,daySelected:E,setDaySelected:_},Math.random()*1))})]})}export{Me as default};
