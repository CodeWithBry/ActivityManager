import{j as e,r as t,c as X,L as Ae,d as me,f as fe,g as ge,s as ye,a as Se,b as oe,F as De,u as ke,e as Pe,h as Me}from"./index-Cs5dxJb7.js";import{s as We}from"./subjects-Qvdm7Wki.js";const qe="_subjectsWrapper_1bbtx_1",ze="_top_1bbtx_31",Ee="_dropDownButton_1bbtx_69",Ie="_showChoices_1bbtx_119",Oe="_hideChoices_1bbtx_127",Te="_choicesBox_1bbtx_135",K={subjectsWrapper:qe,top:ze,dropDownButton:Ee,showChoices:Ie,hideChoices:Oe,choicesBox:Te},Qe="_subjectBox_1xvju_1",Fe="_topWrapper_1xvju_95",Re="_subjectName_1xvju_217",He="_progressWrapper_1xvju_261",Le="_progresses_1xvju_279",Ue="_top_1xvju_95",Ze="_bottom_1xvju_305",Ve="_barWrapper_1xvju_329",Xe="_bar_1xvju_329",Ye="_openSubject_1xvju_357",v={subjectBox:Qe,topWrapper:Fe,subjectName:Re,progressWrapper:He,progresses:Le,top:Ue,bottom:Ze,barWrapper:Ve,bar:Xe,openSubject:Ye},Ge="_subjectSkeletonBox_bnzn5_1",Je={subjectSkeletonBox:Ge};function Ke(){return e.jsx("div",{className:`${Je.subjectSkeletonBox}`})}function et({subData:s}){const{userData:i}=t.useContext(X),{selectedQuarter:c}=t.useContext(je),[a,r]=t.useState(0),[n,S]=t.useState(0),[f,p]=t.useState(0),[h,x]=t.useState(0),[o,_]=t.useState(0),[N,W]=t.useState(0),[w,A]=t.useState(0),[y,T]=t.useState(0),[B,M]=t.useState(0),[C,g]=t.useState(),[Q,z]=t.useState(),[te,F]=t.useState();return t.useEffect(()=>{const H=a>0?n/a*100:0,L=h>0?o/h*100:0,Y=w>0?y/w*100:0;p(H),W(L),M(Y)},[a,n,h,o,w,y]),t.useEffect(()=>{if(c){const H=C?.filter(j=>j.subject==s.subjectNameAbbreviation&&c==j.quarter)?.length,L=Q?.filter(j=>j.subject==s.subjectNameAbbreviation&&c==j.quarter)?.length,Y=te?.filter(j=>j.subject==s.subjectNameAbbreviation&&c==j.quarter)?.length,G=C?.filter(j=>j.status=="completed"&&j.subject==s.subjectNameAbbreviation&&c==j.quarter)?.length,se=Q?.filter(j=>j.status=="completed"&&j.subject==s.subjectNameAbbreviation&&c==j.quarter)?.length,E=te?.filter(j=>j.status=="completed"&&j.subject==s.subjectNameAbbreviation&&c==j.quarter)?.length;console.log(C),r(H||0),S(G||0),x(L||0),_(se||0),A(Y||0),T(E||0)}},[c,C,Q,te]),t.useEffect(()=>{i&&(g(i.activities),z(i.assignments),F(i.petas))},[i]),C?e.jsxs("div",{className:`${v.subjectBox}`,children:[e.jsx("div",{className:v.topWrapper,children:e.jsx("h1",{className:v.subjectName,children:s.subjectNameAbbreviation})}),e.jsxs("div",{className:v.progressWrapper,children:[e.jsxs("div",{className:`${v.actWrapper} ${v.progresses}`,children:[e.jsxs("div",{className:v.top,children:[e.jsx("p",{children:"Activities:"}),e.jsx("p",{className:v.completed,children:a>=n&&a!=0?n+" out of "+a+" is Completed":"No Activity"})]}),e.jsx("div",{className:v.bottom,children:e.jsx("div",{className:v.barWrapper,children:e.jsx("div",{className:v.bar,style:{width:`${a>=n&&a!=0?f:100}%`}})})})]}),e.jsxs("div",{className:`${v.assignWrapper} ${v.progresses}`,children:[e.jsxs("div",{className:v.top,children:[e.jsx("p",{children:"Assignments:"}),e.jsx("p",{className:v.completed,children:h>=o&&h!=0?o+" out of "+h+" is Completed":"No Assignment"})]}),e.jsx("div",{className:v.bottom,children:e.jsx("div",{className:v.barWrapper,children:e.jsx("div",{className:v.bar,style:{width:`${h>=o&&h!=0?N:100}%`}})})})]}),e.jsxs("div",{className:`${v.projWrapper} ${v.progresses}`,children:[e.jsxs("div",{className:v.top,children:[e.jsx("p",{children:"Performance Tasks:"}),e.jsx("p",{className:v.completed,children:w>=y&&w!=0?y+" out of "+w+" is Completed":"No Projects"})]}),e.jsx("div",{className:v.bottom,children:e.jsx("div",{className:v.barWrapper,children:e.jsx("div",{className:v.bar,style:{width:`${w>=y&&w!=0?B:100}%`}})})})]})]}),e.jsx(Ae,{to:"/subjects/"+s.subjectNameAbbreviation,className:v.openSubject,children:"Open Subject"})]}):e.jsx(Ke,{})}const tt="_subConWrapper_1fnzp_1",st="_topComponent_1fnzp_23",nt="_backButt_1fnzp_1",ct="_right_1fnzp_77",at="_wrapMenusButton_1fnzp_89",it="_wrap_1fnzp_89",ot="_hideWrap_1fnzp_99",rt="_selectedChoice_1fnzp_109",lt="_showChoices_1fnzp_149",ut="_hideChoices_1fnzp_157",dt="_choicesBox_1fnzp_165",ht="_contentWrapper_1fnzp_223",mt="_subjectActs_1fnzp_267",ft="_content_1fnzp_223",jt="_selectAllButton_1fnzp_339",pt="_hideSelectAllButton_1fnzp_355",xt="_transparent_1fnzp_385",b={subConWrapper:tt,topComponent:st,backButt:nt,right:ct,wrapMenusButton:at,wrap:it,hideWrap:ot,selectedChoice:rt,showChoices:lt,hideChoices:ut,choicesBox:dt,contentWrapper:ht,subjectActs:mt,content:ft,selectAllButton:jt,hideSelectAllButton:pt,transparent:xt},bt="_showActDesc_ozrv6_1",_t="_hideActDesc_ozrv6_29",St="_showActDescBox_ozrv6_37",At="_right_ozrv6_73",gt="_stateWrapper_ozrv6_81",vt="_showButton_ozrv6_95",Ct="_choices_ozrv6_103",Nt="_hideChoices_ozrv6_105",wt="_showInfo_ozrv6_115",Bt="_highlight_ozrv6_141",$t="_unhighlight_ozrv6_161",yt="_hideButton_ozrv6_173",q={showActDesc:bt,hideActDesc:_t,showActDescBox:St,right:At,stateWrapper:gt,showButton:vt,choices:Ct,hideChoices:Nt,showInfo:wt,highlight:Bt,unhighlight:$t,hideButton:yt},Dt="_infoBox_xvtjn_1",kt="_showInfoBox_xvtjn_21",Pt="_hideInfoBox_xvtjn_31",Mt="_animHideInfo_xvtjn_41",I={infoBox:Dt,showInfoBox:kt,hideInfoBox:Pt,animHideInfo:Mt};function Wt({showInfo:s,setShowInfo:i}){const{actDesc:c}=t.useContext(O);function a(r){const n=r.currentTarget.classList;n.contains(I.hideInfoBox)?(n.replace(`${I.hideInfoBox}`,`${I.animHideInfo}`),setTimeout(()=>{n.replace(`${I.animHideInfo}`,`${I.hideInfoBox}`)},1e3)):(n.add(`${I.animHideInfo}`),setTimeout(()=>{n.replace(`${I.animHideInfo}`,`${I.hideInfoBox}`)},1e3)),i(!1)}return e.jsx(e.Fragment,{children:e.jsx("div",{className:s?`${I.infoBox} ${I.showInfoBox}`:`${I.infoBox} ${I.hideInfoBox}`,onMouseLeave:a,children:e.jsxs("ul",{children:[e.jsxs("li",{children:["Created At: ",c?.createdAt]}),e.jsxs("li",{children:["Deadline: ",c?.dueDate]}),e.jsxs("li",{children:["Semester: ",c?.semester," Sem"]}),e.jsxs("li",{children:["Quarter: ",c?.quarter," Quarter"]}),e.jsxs("li",{children:["Type: ",c?.typeOfWork]})]})})})}function qt(){const{actDesc:s,showActDesc:i,setShowActDesc:c,setActDesc:a,defineTypeOfWork:r}=t.useContext(O),[n,S]=t.useState(!1),[f,p]=t.useState(!1);return e.jsx(e.Fragment,{children:e.jsx("div",{className:i?q.showActDesc:q.hideActDesc,children:e.jsxs("div",{className:i?q.showActDescBox:q.hideActDescBox,children:[e.jsxs("h2",{children:["Description",e.jsxs("div",{className:q.right,children:[e.jsxs("div",{className:q.stateWrapper,children:[e.jsx("button",{className:q.showButton,onClick:()=>{S(!n)},children:e.jsx("i",{className:"fa fa-navicon"})}),e.jsxs("div",{className:n?q.choices:q.hideChoices,children:[e.jsx("button",{className:s?.status=="completed"?q.highlight:q.unhighlight,onClick:()=>{s&&r(!1,"completed")},children:"Finish"}),e.jsx("button",{className:s?.status=="pending"?q.highlight:q.unhighlight,onClick:()=>{s&&r(!1,"pending")},children:"Pending"}),e.jsxs("button",{className:q.showInfo,onClick:()=>{p(!f)},children:[e.jsx("i",{className:"fa fa-list-alt"}),e.jsx(Wt,{showInfo:f,setShowInfo:p})]})]})]}),e.jsx("button",{onClick:()=>{c(!1),a(null)},className:q.hideButton,children:"X"})]})]}),e.jsx("h3",{children:s?.title}),e.jsx("p",{children:s?.description})]})})})}const zt="_addSubjectWrapper_55ez4_1",Et="_addSubjectBox_55ez4_29",It="_closeButton_55ez4_53",Ot="_top_55ez4_123",Tt="_submit_55ez4_189",Z={addSubjectWrapper:zt,addSubjectBox:Et,closeButton:It,top:Ot,submit:Tt},Qt="_subjectBox_1p62z_1",Ft="_choices_1p62z_51",Rt="_show_1p62z_87",Ht="_subject_1p62z_1",Lt="_status_1p62z_99",D={subjectBox:Qt,choices:Ft,show:Rt,subject:Ht,status:Lt};function Ut({subject:s,setSubject:i}){const[c]=t.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[a,r]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:D.subName,children:"Subject"}),e.jsxs("button",{className:D.subjectBox,onClick:()=>{r(!a)},children:[s,e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:a?`${D.choices} ${D.show}`:D.choices,children:c.map(n=>e.jsx("li",{className:D.subject,onClick:()=>{i(n)},children:n},Math.random()*1))})]})]})}function Zt(){const{quarterAndSemChoices:s,quarter:i,setQuarter:c,semester:a,setSemester:r}=t.useContext(O),[n,S]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:D.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:D.subjectBox,onClick:()=>{S(!n)},children:[a+" Sem: "+i+" Quarter",e.jsx("i",{className:n?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:n?`${D.choices} ${D.show}`:D.choices,children:s.map(f=>e.jsx("li",{className:D.subject,onClick:()=>{c(f.quarter),r(f.sem)},children:f.sem+" Sem: "+f.quarter+" Quarter"},Math.random()*1))})]})]})}function Vt({status:s,setStatus:i}){const[c]=t.useState(["pending","completed"]),[a,r]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:D.subName,children:"Subject"}),e.jsxs("button",{className:D.subjectBox,onClick:()=>{r(!a)},children:[s,e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:a?`${D.choices} ${D.show}`:D.choices,children:c.map(n=>e.jsx("li",{className:D.status,onClick:()=>{i(n=="pending"?"pending":"completed")},children:n},Math.random()*1))})]})]})}function Xt(){const{typeOfWork:s,showAddPrompt:i,setShowAddPrompt:c,setTypeOfWork:a,params:r,quarter:n,semester:S}=t.useContext(O),{userData:f}=t.useContext(X),[p,h]=t.useState(""),[x,o]=t.useState(""),[_,N]=t.useState(null),[W,w]=t.useState(r?.toUpperCase()),[A,y]=t.useState("pending");async function T(){const B=new Date,M={id:Math.random()*1,title:p,description:x,typeOfWork:s,status:A,createdBy:"Pajarillaga, Bryan",createdAt:`${B?.getFullYear()}-${B?.getMonth()}-${B?.getDate()}`,dueDate:_,subject:W,semester:S,quarter:n,isSelected:!1,timeCreated:Date.now()};try{const C=me(fe,"Main_Database","School_Activities");(await ge(C)).exists()?await oe(C,{[s]:Se(M)}):await ye(C,{[s]:Se(M)}),h(""),o(""),N(null),a(""),c(!1)}catch(C){C instanceof De&&console.log(C)}}if(t.useEffect(()=>{w(r)},[r]),i&&f?.user.status=="Owner")return e.jsx("div",{className:Z.addSubjectWrapper,children:e.jsxs("div",{className:Z.addSubjectBox,children:[e.jsx("button",{className:Z.closeButton,onClick:()=>{a(""),c(!1)},children:"X"}),e.jsxs("h1",{children:["Create ",s]}),e.jsxs("div",{className:Z.top,children:[e.jsx(Ut,{subject:W,setSubject:w}),e.jsx(Zt,{}),e.jsx(Vt,{status:A,setStatus:y}),e.jsx("h2",{className:Z.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:B=>{console.log(B.currentTarget.value),N(B.currentTarget.value)}}),e.jsxs("h2",{className:Z.actTitle,children:[s," Title"]}),e.jsx("input",{type:"text",value:p,onChange:B=>{h(B.currentTarget.value)}}),e.jsxs("h2",{className:Z.actDesc,children:[s," Description"]}),e.jsx("textarea",{rows:5,value:x,onChange:B=>{o(B.currentTarget.value)}})]}),e.jsx("button",{className:Z.submit,onClick:T,children:"Submit"})]})})}const Yt="_noActivities_1bced_1",Gt="_showMenu_1bced_11",Jt="_hideMenu_1bced_69",Kt="_addActivity_1bced_77",es="_hamWrapper_1bced_143",ts="_dropDownMenus_1bced_183",ss="_hideDropDown_1bced_235",ee={noActivities:Yt,showMenu:Gt,hideMenu:Jt,addActivity:Kt,hamWrapper:es,dropDownMenus:ts,hideDropDown:ss};function ns({task:s}){const{setShowActDesc:i,setCanSelect:c,defineTypeOfWork:a,actDesc:r,menu:n,showMenu:S,menuPos:f,canSelect:p,handleRightClick:h,setActivities:x,setAssignments:o,setProjects:_,handleSelectAll:N,setShowEdit:W}=t.useContext(O),{userData:w}=t.useContext(X);function A(M){if(p)switch(s?.typeOfWork){case"Activity":x(C=>C?C.map(g=>g.id==s?.id?{...g,isSelected:M}:g):[]);break;case"Assignment":o(C=>C?C.map(g=>g.id==s?.id?{...g,isSelected:M}:g):[]);break;case"Project":_(C=>C?C.map(g=>g.id==s?.id?{...g,isSelected:M}:g):[]);break}}function y(M){switch(M){case 1:i(!0);break;case 2:c(!p),p&&(A(!1),N("All",!1));break;case 3:r&&a(!0,"pending");break;case 4:r&&a(!0,"completed");break;case 5:s?.isSelected?A(!1):A(!0);break;case 6:W(!0);break}}function T(){if(p)return e.jsxs("button",{onClick:()=>y(5),children:[e.jsx("i",{className:"fa fa-hand-o-up"}),r?.isSelected?"Unselect":"Select"]})}function B(){if(w?.user.status=="Owner")return e.jsxs("button",{onClick:()=>y(6),children:[e.jsx("i",{className:"	fa fa-edit"}),"Edit"]})}return e.jsxs("div",{ref:n,onClick:M=>h(M,null,!1),className:S?ee.showMenu:ee.hideMenu,style:{left:f.x,top:f.y},children:[e.jsxs("button",{onClick:()=>y(1),children:[e.jsx("i",{className:"fa fa-envelope-open"}),"Open"]}),e.jsx(B,{}),e.jsxs("button",{onClick:()=>y(2),children:[e.jsx("i",{className:p?"fa fa-close":"fa fa-hand-o-up"}),p?"Cancel":"Select"]}),e.jsx(T,{}),e.jsxs("button",{onClick:()=>y(3),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Pending"]}),e.jsxs("button",{onClick:()=>y(4),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Finish"]})]})}function cs(){const{setSortingType:s}=t.useContext(O),[i,c]=t.useState(!1),[a,r]=t.useState([{classname:"fa fa-ellipsis-h",functionName:"Pending"},{classname:"fa fa-check",functionName:"Completed"},{classname:"fa fa-sort-numeric-asc",functionName:"Newest-Oldest"},{classname:"fa fa-sort-numeric-desc",functionName:"Oldest-Newest"},{classname:"fa fa-sort-alpha-asc",functionName:"A-Z"},{classname:"fa fa-sort-alpha-desc",functionName:"Z-A"}]),[n,S]=t.useState({classname:"fa fa-sort-alpha-asc",functionName:"A-Z"});return t.useEffect(()=>{n&&s(n?.functionName)},[n]),e.jsxs("button",{className:ee.hamWrapper,onClick:()=>{c(!i)},children:[e.jsxs("p",{children:["Sort",e.jsx("i",{className:n?.classname}),e.jsx("i",{className:i?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("ul",{className:i?ee.dropDownMenus:ee.hideDropDown,children:a.map(f=>e.jsxs("li",{onClick:()=>{r(p=>p.map(h=>(f.functionName==h.functionName&&S(h),h)))},children:[e.jsx("i",{className:f.classname}),e.jsx("p",{children:f.functionName})]},f.functionName))})]})}function de({type:s}){const{userData:i}=t.useContext(X),{setTypeOfWork:c,setShowAddPrompt:a}=t.useContext(O);if(i?.user?.status=="Owner")return e.jsx("div",{className:ee.addActivity,onClick:()=>{c(s),a(!0)},children:e.jsx("h1",{children:"+"})})}const as="_activity_19w5l_1",is="_pendingActivity_19w5l_3",os="_selected_19w5l_69",rs="_notSelected_19w5l_71",ue={activity:as,pendingActivity:is,selected:os,notSelected:rs};function ls({task:s,handleRightClick:i,setActDesc:c}){const{canSelect:a,setActivities:r,setAssignments:n,setProjects:S}=t.useContext(O),f=()=>{if(a)return e.jsx("input",{type:"checkbox",checked:s?.isSelected,onChange:()=>{p(null)},className:s?.isSelected?ue.selected:ue.notSelected})};function p(h){a&&(r(x=>x?x.map(o=>o.id==h?.id?{...o,isSelected:!o.isSelected}:o):[]),n(x=>x?x.map(o=>o.id==h?.id?{...o,isSelected:!o.isSelected}:o):[]),S(x=>x?x.map(o=>o.id==h?.id?{...o,isSelected:!o.isSelected}:o):[]))}return e.jsxs("div",{id:`${s?.id}`,className:s?.status=="completed"?ue.activity:ue.pendingActivity,onContextMenu:h=>i(h,s,!1),onDoubleClick:h=>i(h,s,!0),onClick:()=>{c(s),p(s)},children:[e.jsx("h2",{children:s?.title}),e.jsx("p",{children:s?.description}),e.jsx(f,{})]})}const us="_activitySkeleton_o3c77_1",ds={activitySkeleton:us};function hs({count:s}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((i,c)=>e.jsx("div",{className:ds.activitySkeleton},c))})}function he({typeOfWork:s,sortingType:i}){const{activities:c,assignments:a,projects:r,selectedChoice:n,handleRightClick:S,setActDesc:f}=t.useContext(O),{userData:p}=t.useContext(X),h=s==="Activity"?c||[]:s==="Assignment"?a||[]:r||[],x=t.useMemo(()=>{let o=[...h];return i==="Newest-Oldest"?o.sort((_,N)=>N.timeCreated-_.timeCreated):i==="Oldest-Newest"?o.sort((_,N)=>_.timeCreated-N.timeCreated):i==="A-Z"?o.sort((_,N)=>(_.title||"").localeCompare(N.title||"")):i==="Z-A"?o.sort((_,N)=>(N.title||"").localeCompare(_.title||"")):i==="Pending"?o=o.filter(_=>_.status==="pending"):i==="Completed"&&(o=o.filter(_=>_.status==="completed")),o.filter(_=>_.quarter===n.quarter&&_.semester===n.sem)},[h,i,n]);if(p){if(p&&x.length!=0)return e.jsx(e.Fragment,{children:x.map(o=>e.jsx(ls,{task:o,handleRightClick:S,setActDesc:f},o.id||o.timeCreated))});if(p&&x.length==0)return e.jsxs("h2",{className:ee.noActivities,children:[s==="Activity"&&"There are no Activities!",s==="Assignment"&&"There are no Assignments!",s==="Project"&&"There are no Projects!"]})}else return e.jsx(hs,{count:6})}const ms="_addSubjectWrapper_55ez4_1",fs="_addSubjectBox_55ez4_29",js="_closeButton_55ez4_53",ps="_top_55ez4_123",xs="_submit_55ez4_189",V={addSubjectWrapper:ms,addSubjectBox:fs,closeButton:js,top:ps,submit:xs},bs="_subjectBox_1p62z_1",_s="_choices_1p62z_51",Ss="_show_1p62z_87",As="_subject_1p62z_1",gs="_status_1p62z_99",k={subjectBox:bs,choices:_s,show:Ss,subject:As,status:gs};function vs({subject:s,setSubject:i}){const[c]=t.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[a,r]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:k.subName,children:"Subject"}),e.jsxs("button",{className:k.subjectBox,onClick:()=>{r(!a)},children:[s,e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:a?`${k.choices} ${k.show}`:k.choices,children:c.map(n=>e.jsx("li",{className:k.subject,onClick:()=>{i(n)},children:n},Math.random()*1))})]})]})}function Cs(){const{quarterAndSemChoices:s,quarter:i,setQuarter:c,semester:a,setSemester:r}=t.useContext(O),[n,S]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:k.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:k.subjectBox,onClick:()=>{S(!n)},children:[a+" Sem: "+i+" Quarter",e.jsx("i",{className:n?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:n?`${k.choices} ${k.show}`:k.choices,children:s.map(f=>e.jsx("li",{className:k.subject,onClick:()=>{c(f.quarter),r(f.sem)},children:f.sem+" Sem: "+f.quarter+" Quarter"},Math.random()*1))})]})]})}function Ns({status:s,setStatus:i}){const[c]=t.useState(["pending","completed"]),[a,r]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:k.subName,children:"Subject"}),e.jsxs("button",{className:k.subjectBox,onClick:()=>{r(!a)},children:[s,e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:a?`${k.choices} ${k.show}`:k.choices,children:c.map(n=>e.jsx("li",{className:k.status,onClick:()=>{i(n=="pending"?"pending":"completed")},children:n},Math.random()*1))})]})]})}function ws(){const{typeOfWork:s,setTypeOfWork:i,params:c,quarter:a,semester:r,actDesc:n,showEdit:S,setShowEdit:f}=t.useContext(O),{userData:p}=t.useContext(X),[h,x]=t.useState(""),[o,_]=t.useState(""),[N,W]=t.useState(""),[w,A]=t.useState(c?.toUpperCase()),[y,T]=t.useState("pending"),[B,M]=t.useState("");async function C(){const g=new Date,Q={id:B,title:h,description:o,typeOfWork:s,status:y,createdBy:"Pajarillaga, Bryan",createdAt:`${g?.getFullYear()}-${g?.getMonth()}-${g?.getDate()}`,dueDate:N,subject:w,semester:r,quarter:a,isSelected:!1,timeCreated:Date.now()},z=me(fe,"Main_Database","School_Activities"),F=(await ge(z)).data();if(F)switch(s){case"Activity":const L=F.Activity.map(j=>j.id==B?{...Q,id:Math.random()*1}:{...j});await oe(z,{[s]:L});break;case"Assignment":const G=F.Assignment.map(j=>j.id==B?{...Q,id:Math.random()*1}:{...j});await oe(z,{[s]:G});break;case"Project":const E=F.Project.map(j=>j.id==B?{...Q,id:Math.random()*1}:{...j});await oe(z,{[s]:E});break}f(!1)}if(t.useEffect(()=>{A(c)},[c]),t.useEffect(()=>{n&&(x(n.title),_(n.description),W(n.dueDate),T(n.status),M(n.id))},[n]),S&&p?.user.status=="Owner")return e.jsx("div",{className:V.addSubjectWrapper,children:e.jsxs("div",{className:V.addSubjectBox,children:[e.jsx("button",{className:V.closeButton,onClick:()=>{i(""),f(!1)},children:"X"}),e.jsxs("h1",{children:["Edit ",s]}),e.jsxs("div",{className:V.top,children:[e.jsx(vs,{subject:w,setSubject:A}),e.jsx(Cs,{}),e.jsx(Ns,{status:y,setStatus:T}),e.jsx("h2",{className:V.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:g=>{console.log(g.currentTarget.value),W(g.currentTarget.value)}}),e.jsxs("h2",{className:V.actTitle,children:[s," Title"]}),e.jsx("input",{type:"text",value:h,onChange:g=>{x(g.currentTarget.value)}}),e.jsxs("h2",{className:V.actDescription,children:[s," Description"]}),e.jsx("textarea",{rows:5,value:o,onChange:g=>{_(g.currentTarget.value)}})]}),e.jsx("button",{className:V.submit,onClick:C,children:"Submit"})]})})}const O=t.createContext({});function Bs({params:s,subjects:i}){const{userData:c,userObject:a,setUserData:r}=t.useContext(X),{selectedQuarter:n,selectedSemester:S}=t.useContext(je),f=t.useRef(null),p=ke(),h=Pe(),[x,o]=t.useState(null),[_,N]=t.useState(null),[W,w]=t.useState(null),[A,y]=t.useState(!1),[T,B]=t.useState(!1),[M,C]=t.useState(!1),[g,Q]=t.useState(!1),[z,te]=t.useState(!1),[F,H]=t.useState(!1),[L,Y]=t.useState(!1),[G,se]=t.useState(""),[E,j]=t.useState("2nd"),[ve,pe]=t.useState("1st"),[ie,U]=t.useState(null),[Ce,xe]=t.useState({x:0,y:0}),[be,_e]=t.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]),[ne,ce]=t.useState({quarter:"2nd",sem:"1st"}),[ae,R]=t.useState({Activity:!1,Assignment:!1,Project:!1}),[re,Ne]=t.useState("Pending");function we(u,$,l){l&&u.preventDefault(),B(!0),xe({x:u.clientX,y:u.clientY}),$&&(se($.typeOfWork),U($))}function Be(u,$,l){switch(G){case"Activity":r(d=>d?(d?.activities.map(m=>(x?.map(P=>{m.id==P.id&&l==null?(P.isSelected||ie?.id==P.id)&&(m.status=$,U(u?null:P)):l!=null&&l.id==m.id&&(m={...l},U(u?null:P))}),m)),console.log(d.activities),le(d.activities,"activities"),R(m=>({...m,Activity:!1})),d):null);break;case"Assignment":r(d=>d?(d?.assignments.map(m=>(_?.map(P=>{m.id==P.id&&l==null?(P.isSelected||ie?.id==P.id)&&(m.status=$,U(u?null:P)):l!=null&&l.id==m.id&&(m=l,U(u?null:P))}),m)),le(d.assignments,"petas"),R(m=>({...m,Assignment:!1})),d):null);break;case"Project":r(d=>d?(d?.petas.map(m=>(W?.map(P=>{m.id==P.id&&l==null?(P.isSelected||ie?.id==P.id)&&(m.status=$,U(u?null:P)):l!=null&&l.id==m.id&&(m=l,U(u?null:P))}),m)),le(d.petas,"petas"),R(m=>({...m,Project:!1})),d):null);break}}function J(u,$){if(z)switch(u){case"Activity":o(l=>l?l?.map(d=>({...d,isSelected:d.quarter==E?$:!1})):[]);break;case"Assignment":N(l=>l?l?.map(d=>({...d,isSelected:d.quarter==E?$:!1})):[]);break;case"Project":w(l=>l?l?.map(d=>({...d,isSelected:d.quarter==E?$:!1})):[]);break;case"All":o(l=>l?l?.map(d=>({...d,isSelected:d.quarter==E?$:!1})):[]),N(l=>l?l?.map(d=>({...d,isSelected:d.quarter==E?$:!1})):[]),w(l=>l?l?.map(d=>({...d,isSelected:d.quarter==E?$:!1})):[]);break}}async function le(u,$){try{if(u&&$){const l=me(fe,"McCarthy",`${a?.uid}`);await oe(l,{[$]:u})}}catch{}}t.useEffect(()=>{(c?.activities!=null||c?.assignments!=null||c?.petas!=null)&&(o(c.activities.filter(u=>u.subject===s)),N(c.assignments.filter(u=>u.subject===s)),w(c.petas.filter(u=>u.subject===s)))},[c,s]),t.useEffect(()=>{j(ne.quarter),pe(ne.sem)},[ne]),t.useEffect(()=>{ce({quarter:n,sem:S})},[n,S]),t.useEffect(()=>{if(h.hash&&x!=null){const u=h.hash.substring(1).split("#"),[$,l]=u;if($&&document.getElementById($)?.scrollIntoView({behavior:"smooth"}),l){const d=document.getElementById(l);switch(d?.scrollIntoView({behavior:"smooth"}),$){case"Activity":x?.map(m=>{m.id==l&&ce({quarter:m.quarter,sem:m.semester})});break;case"Assignment":_?.map(m=>{m.id==l&&ce({quarter:m.quarter,sem:m.semester})});break;case"Project":console.log("Project"),W?.map(m=>{m.id==l&&(console.log("Project"),ce({quarter:m.quarter,sem:m.semester}))});break}d&&setTimeout(()=>{p(`/subjects/${s}`)},1e3)}}},[h,x]);const $e={canSelect:z,setCanSelect:te,showMenu:T,setShowMenu:B,showActDesc:M,showAddPrompt:g,setShowAddPrompt:Q,showEdit:L,setShowEdit:Y,typeOfWork:G,setTypeOfWork:se,selectedChoice:ne,setSelectedChoice:ce,setShowActDesc:C,actDesc:ie,setActDesc:U,activities:x,setActivities:o,assignments:_,setAssignments:N,projects:W,setProjects:w,quarterAndSemChoices:be,setQuarterAndSemChoices:_e,quarter:E,setQuarter:j,semester:ve,setSemester:pe,params:s,sortingType:re,setSortingType:Ne,menuPos:Ce,setMenuPos:xe,defineTypeOfWork:Be,handleRightClick:we,handleSelectAll:J,saveToDatabase:le,menu:f};if(s)return e.jsx(O.Provider,{value:$e,children:e.jsxs("div",{className:b.subConWrapper,onClick:()=>{B(!1)},children:[e.jsx(ns,{task:ie}),e.jsx(qt,{}),e.jsx(Xt,{}),e.jsx(ws,{}),e.jsxs("div",{className:b.topComponent,children:[e.jsx(Ae,{to:"/subjects",id:b.backButt,children:"Back"}),e.jsx("h1",{children:i.map(u=>u.subjectNameAbbreviation.toLowerCase()==s.toLowerCase()?u.subjectNameAbbreviation:"")}),e.jsxs("div",{className:b.right,children:[e.jsx("button",{className:b.wrapMenusButton,onClick:()=>{H(!F)},children:e.jsx("i",{className:"fa fa-bars"})}),e.jsxs("div",{className:F?b.wrap:b.hideWrap,children:[e.jsxs("div",{className:b.selectedChoice,children:[e.jsxs("button",{onClick:()=>{y(!A)},children:[ne.sem," Sem: ",ne.quarter," Quarter",e.jsx("i",{className:A?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("div",{className:A?`${b.choicesBox} ${b.showChoices}`:`${b.choicesBox} ${b.hideChoices}`,children:be.map((u,$)=>e.jsxs("button",{onClick:()=>{_e(l=>l.map((d,m)=>($==m&&ce(d),d))),y(!1)},children:[u.sem," Sem: ",u.quarter," Quarter"]},Math.random()*1))})]}),e.jsx(cs,{})]})]})]}),e.jsxs("div",{className:b.contentWrapper,children:[e.jsxs("div",{className:`${b.subjectActs} ${b.subjectActivities}`,id:"Activity",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Activities"})]}),e.jsxs("div",{className:b.content,children:[e.jsx(de,{type:"Activity"},Math.random()*1),e.jsx("button",{className:z?b.selectAllButton:b.hideSelectAllButton,onClick:()=>{ae.Activity?(J("Activity",!1),R(u=>({...u,Activity:!1}))):(J("Activity",!0),R(u=>({...u,Activity:!0})))},children:e.jsx("i",{className:ae.Activity?"fa fa-check":b.transparent})}),e.jsx(he,{typeOfWork:"Activity",sortingType:re})]})]}),e.jsxs("div",{className:`${b.subjectActs} ${b.subjectAssignments}`,id:"Assignment",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Assignment"})]}),e.jsxs("div",{className:b.content,children:[e.jsx(de,{type:"Assignment"},Math.random()*1),e.jsx("button",{className:z?b.selectAllButton:b.hideSelectAllButton,onClick:()=>{ae.Assignment?(J("Assignment",!1),R(u=>({...u,Assignment:!1}))):(J("Assignment",!0),R(u=>({...u,Assignment:!0})))},children:e.jsx("i",{className:ae.Assignment?"fa fa-check":b.transparent})}),e.jsx(he,{typeOfWork:"Assignment",sortingType:re})]})]}),e.jsxs("div",{className:`${b.subjectActs} ${b.subjectProjects}`,id:"Project",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Performance Tasks"})]}),e.jsxs("div",{className:b.content,children:[e.jsx(de,{type:"Project"},Math.random()*1),e.jsx("button",{className:z?b.selectAllButton:b.hideSelectAllButton,onClick:()=>{ae.Project?(J("Project",!1),R(u=>({...u,Project:!1}))):(J("Project",!0),R(u=>({...u,Project:!0})))},children:e.jsx("i",{className:ae.Project?"fa fa-check":b.transparent})}),e.jsx(he,{typeOfWork:"Project",sortingType:re})]})]})]})]})})}const je=t.createContext(null);function Ds(){const{pageDetector:s,userObject:i}=t.useContext(X),{subjectName:c}=Me(),[a,r]=t.useState(!1),[n,S]=t.useState("1st"),[f,p]=t.useState("1st"),[h]=t.useState(We),[x,o]=t.useState({quarter:"1st",sem:"1st"}),[_]=t.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]),N=t.useRef(null),W=t.useRef(null);t.useEffect(()=>{s(null,1,!1)},[c]),t.useEffect(()=>{i?.uid?s(null,1,!1):s(0,null,!0)},[i]);const w={selectedQuarter:n,setSelectedQuarter:S,selectedSemester:f,setSelectedSemester:p};return e.jsx(je.Provider,{value:w,children:c?e.jsx(Bs,{params:c,subjects:h}):e.jsxs("div",{ref:N,className:`${K.subjectsWrapper}`,children:[e.jsxs("header",{ref:W,id:"SubjectNavigation",className:`${K.top}`,children:[e.jsx("h1",{children:"Subjects"}),e.jsxs("div",{className:K.dropDownButton,onClick:()=>r(A=>!A),children:[x.sem," Semester: ",x.quarter," Quarter",e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("div",{className:a?`${K.choicesBox} ${K.showChoices}`:`${K.choicesBox} ${K.hideChoices}`,children:_.map(A=>e.jsxs("button",{onClick:()=>{o(A),S(A.quarter),p(A.sem)},children:[A.sem," Sem: ",A.quarter," Quarter"]},`${A.sem}-${A.quarter}`))})]})]}),e.jsx("section",{children:h.map(A=>e.jsx(et,{subData:A},A.subjectTeacher))})]})})}export{je as SubjectsContext,Ds as default};
