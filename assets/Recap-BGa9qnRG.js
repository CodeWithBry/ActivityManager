import{j as s,r as o,d as v,f as P,g as O,b as F,a as G,s as V,F as z,c as L,i as q,o as H}from"./index-Cs5dxJb7.js";const I="_recapWrapper_h2f15_1",Q="_top_h2f15_37",U="_weekWrapper_h2f15_69",X="_weekButton_h2f15_85",J="_hideDropDown_h2f15_105",K="_weeksDropdown_h2f15_113",Y="_createRecap_h2f15_169",Z="_daysWrapper_h2f15_197",k={recapWrapper:I,top:Q,weekWrapper:U,weekButton:X,hideDropDown:J,weeksDropdown:K,createRecap:Y,daysWrapper:Z},ss="_dayCard_zr5t7_1",es="_dayHeader_zr5t7_35",ts="_openDay_zr5t7_37",as="_dayContent_zr5t7_81",ns="_activities_zr5t7_125",cs="_actWrapper_zr5t7_145",_={dayCard:ss,dayHeader:es,openDay:ts,dayContent:as,activities:ns,actWrapper:cs};function is({day:u}){return s.jsx("div",{className:_.daysWrapper,children:s.jsxs("div",{className:_.dayCard,children:[s.jsx("div",{className:_.dayHeader,children:u.day}),s.jsxs("div",{className:_.dayContent,children:[s.jsxs("div",{className:_.activities,children:[s.jsx("h2",{children:"Activities"}),s.jsx("ul",{className:_.actWrapper,children:u.Activities.length!=0?u.Activities.map(e=>s.jsxs("li",{children:[s.jsx("i",{className:"fa fa-caret-right"})," ",s.jsx("span",{children:e.subject}),": ",e.title+e.status]},e.id)):s.jsx("li",{children:"There are no Activity"})})]}),s.jsxs("div",{className:_.activities,children:[s.jsx("h2",{children:"Group Activity"}),s.jsx("ul",{className:_.actWrapper,children:u.Groupings.length!=0?u.Groupings.map(e=>s.jsxs("li",{children:[s.jsx("i",{className:"fa fa-caret-right"})," ",s.jsx("span",{children:e.subject}),": ",e.title+e.status]},e.id)):s.jsx("li",{children:"There are no Group Activity"})})]}),s.jsxs("div",{className:_.activities,children:[s.jsx("h2",{children:"Assignment"}),s.jsx("ul",{className:_.actWrapper,children:u.Assignment.length!=0?u.Assignment.map(e=>s.jsxs("li",{children:[s.jsx("i",{className:"fa fa-caret-right"})," ",s.jsx("span",{children:e.subject}),": ",e.title+e.status]},e.id)):s.jsx("li",{children:"There are no Assignment"})})]}),s.jsxs("div",{className:_.activities,children:[s.jsx("h2",{children:"Projects"}),s.jsx("ul",{className:_.actWrapper,children:u.Projects.length!=0?u.Projects.map(e=>s.jsxs("li",{children:[s.jsx("i",{className:"fa fa-caret-right"})," ",s.jsx("span",{children:e.subject}),": ",e.title+e.status]},e.id)):s.jsx("li",{children:"There are no Project"})})]}),s.jsxs("div",{className:_.activities,children:[s.jsx("h2",{children:"Exams"}),s.jsx("ul",{className:_.actWrapper,children:u.Exams.length!=0?u.Exams.map(e=>s.jsxs("li",{children:[s.jsx("i",{className:"fa fa-caret-right"})," ",s.jsx("span",{children:e.subject}),": ",e.title+e.status]},e.id)):s.jsx("li",{children:"There are no Exam"})})]})]}),s.jsx("button",{className:_.openDay,children:"Open"})]})})}const rs="_createPrompt_1insj_1",os="_addSubjectBox_1insj_29",ls="_closeButton_1insj_53",us="_top_1insj_123",ds="_activitiesWrapper_1insj_177",hs="_lists_1insj_315",ms="_submit_1insj_355",x={createPrompt:rs,addSubjectBox:os,closeButton:ls,top:us,activitiesWrapper:ds,lists:hs,submit:ms},js="_subjectBox_1eqzh_1",ps="_choices_1eqzh_51",xs="_show_1eqzh_87",fs="_subject_1eqzh_1",bs="_subName_1eqzh_127",j={subjectBox:js,choices:ps,show:xs,subject:fs,subName:bs};function _s(){const{selectedDay:u,setSelectedDay:e}=o.useContext(M),f=["Monday","Tuesday","Wednesday","Thursday","Friday"],[m,h]=o.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:j.subName,children:"Days"}),s.jsxs("button",{className:j.subjectBox,onClick:()=>{h(!m)},children:[u,s.jsx("i",{className:m?"fa fa-angle-up":"fa fa-angle-down"}),s.jsx("ul",{className:m?`${j.choices} ${j.show}`:j.choices,children:f.map(p=>s.jsx("li",{className:j.subject,onClick:()=>{e(p)},children:p},Math.random()*1))})]})]})}const ys="_addSubjectWrapper_113me_1",gs="_addSubjectBox_113me_29",Ns="_closeButton_113me_53",As="_top_113me_123",Ds="_buttonWrapper_113me_189",ws="_submit_113me_199",W={addSubjectWrapper:ys,addSubjectBox:gs,closeButton:Ns,top:As,buttonWrapper:Ds,submit:ws};function Ss({subject:u,setSubject:e}){const[f]=o.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[m,h]=o.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:j.subName,children:"Subject"}),s.jsxs("button",{className:j.subjectBox,onClick:()=>{h(!m)},children:[u,s.jsx("i",{className:m?"fa fa-angle-up":"fa fa-angle-down"}),s.jsx("ul",{className:m?`${j.choices} ${j.show}`:j.choices,children:f.map(p=>s.jsx("li",{className:j.subject,onClick:()=>{e(p)},children:p},Math.random()*1))})]})]})}function Cs({selectedStatus:u,setSelectedStatus:e}){const[f,m]=o.useState(!1),[h]=o.useState(["(Submitted)","(Continue)"]);return s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:j.subName,children:"Semester and Quarter"}),s.jsxs("button",{className:j.subjectBox,onClick:()=>{m(!f)},children:[u,s.jsx("i",{className:f?"fa fa-angle-up":"fa fa-angle-down"}),s.jsx("ul",{className:f?`${j.choices} ${j.show}`:j.choices,children:h.map(p=>s.jsx("li",{className:j.subject,onClick:()=>{e(p)},children:p},Math.random()*1))})]})]})}function ks(){const{typeOfWork:u,setTypeOfWork:e,showActPrompt:f,setShowActPrompt:m,setRecap:h,recap:p,selectedDay:w}=o.useContext(M),[D,E]=o.useState(""),[y,g]=o.useState(""),[N,B]=o.useState("(Submitted)"),[R,$]=o.useState("CSS");function T(l){const n={id:Math.random()*1,status:N,title:D,description:y,typeOfWork:u,subject:R};l?(d(n),m(!1)):d(n)}function d(l){switch(u){case"Activity":h(n=>{if(!n)return n;const t=n.days.map(r=>w==r.day?{...r,Activities:[...r.Activities,{...l,status:N}]}:{...r});return{...n,days:t}});break;case"Groupings":h(n=>{if(!n)return n;const t=n.days.map(r=>w==r.day?{...r,Groupings:[...r.Groupings,{...l,status:N}]}:{...r});return{...n,days:t}});break;case"Assignment":h(n=>{if(!n)return n;const t=n.days.map(r=>w==r.day?{...r,Assignment:[...r.Assignment,{...l,status:N}]}:{...r});return{...n,days:t}});break;case"Project":h(n=>{if(!n)return n;const t=n.days.map(r=>w==r.day?{...r,Projects:[...r.Projects,{...l,status:N}]}:{...r});return{...n,days:t}});break;case"Exams":h(n=>{if(!n)return n;const t=n.days.map(r=>w==r.day?{...r,Exams:[...r.Exams,{...l,status:N}]}:{...r});return{...n,days:t}});break}}if(o.useEffect(()=>{p&&console.log(p)},[p]),f)return s.jsx("div",{className:W.addSubjectWrapper,children:s.jsxs("div",{className:W.addSubjectBox,children:[s.jsx("button",{className:W.closeButton,onClick:()=>{e(""),m(!1)},children:"X"}),s.jsxs("h1",{children:["Create ",u]}),s.jsxs("div",{className:W.top,children:[s.jsx(Ss,{subject:R,setSubject:$}),s.jsx(Cs,{selectedStatus:N,setSelectedStatus:B}),s.jsxs("h2",{className:W.actTitle,children:[u," Title"]}),s.jsx("input",{type:"text",value:D,onChange:l=>{E(l.currentTarget.value)}}),s.jsxs("h2",{className:W.actDesc,children:[u," Description"]}),s.jsx("textarea",{rows:5,value:y,onChange:l=>{g(l.currentTarget.value)}})]}),s.jsxs("div",{className:W.buttonWrapper,children:[s.jsx("button",{className:W.submit,onClick:()=>T(!0),children:"Submit Only"}),s.jsx("button",{className:W.submit,onClick:()=>T(!1),children:"Create Again"})]})]})})}const M=o.createContext({});function Ws({showAddRecap:u,setShowAddRecap:e,editRecap:f,setEditRecap:m,weeklyRecaps:h}){const p={monthAndDay:"",days:[{day:"Monday",Activities:[],Assignment:[],Groupings:[],Projects:[],Exams:[]},{day:"Tuesday",Activities:[],Assignment:[],Groupings:[],Projects:[],Exams:[]},{day:"Wednesday",Activities:[],Assignment:[],Groupings:[],Projects:[],Exams:[]},{day:"Thursday",Activities:[],Assignment:[],Groupings:[],Projects:[],Exams:[]},{day:"Friday",Activities:[],Assignment:[],Groupings:[],Projects:[],Exams:[]}]},[w,D]=o.useState(!1),[E,y]=o.useState("Activity"),[g,N]=o.useState("Monday"),[B,R]=o.useState("1st"),[$,T]=o.useState("1st"),[d,l]=o.useState(p);async function n(){const c={monthAndDay:d.monthAndDay};try{const a=v(P,"Main_Database","Recaps"),i=v(P,"Main_Database","Recaps",`${c.monthAndDay}`,`${c.monthAndDay}`);(await O(a)).exists()?await F(a,{ListsOfRecap:G(c)}):await V(a,{ListsOfRecap:G(c)}),await V(i,{[c.monthAndDay]:d}),e(!1)}catch(a){a instanceof z&&console.log(a),e(!1)}}function t(c,a){switch(a){case"Activity":l(i=>{if(!i)return i;const A=i.days.map(b=>{const S=b.Activities.filter(C=>C.id!=c);return{...b,Activities:S}});return{...i,days:A}});break;case"Groupings":l(i=>{if(!i||!i)return i;const A=i.days.map(b=>{const S=b.Groupings.filter(C=>C.id!=c);return{...b,Groupings:S}});return{...i,days:A}});break;case"Assignment":l(i=>{if(!i)return i;const A=i.days.map(b=>{const S=b.Assignment.filter(C=>C.id!=c);return{...b,Assignment:S}});return{...i,days:A}});break;case"Project":l(i=>{if(!i)return i;const A=i.days.map(b=>{const S=b.Projects.filter(C=>C.id!=c);return{...b,Projects:S}});return{...i,days:A}});break;case"Exams":l(i=>{if(!i)return i;const A=i.days.map(b=>{const S=b.Exams.filter(C=>C.id!=c);return{...b,Exams:S}});return{...i,days:A}});break}}o.useEffect(()=>{f&&h!=null&&l(h)},[h,f]);const r={showActPrompt:w,setShowActPrompt:D,selectedDay:g,setSelectedDay:N,typeOfWork:E,setTypeOfWork:y,quarter:B,setQuarter:R,semester:$,setSemester:T,recap:d,setRecap:l,createRecap:n};if(u||f)return s.jsxs(M.Provider,{value:r,children:[s.jsx(ks,{}),s.jsx("div",{className:x.createPrompt,children:s.jsxs("div",{className:x.addSubjectBox,children:[s.jsx("button",{className:x.closeButton,onClick:()=>{e(!1),m(!1),l(p)},children:"X"}),s.jsxs("div",{className:x.top,children:[s.jsx(_s,{}),s.jsx("h2",{className:x.title,children:"Month and Day"}),s.jsx("input",{type:"text",value:d.monthAndDay,onChange:c=>{const a=c.currentTarget.value;l(i=>({...i,monthAndDay:a}))}}),s.jsxs("div",{className:x.activitiesWrapper,children:[s.jsxs("h2",{className:x.actTitle,children:[s.jsx("span",{children:"Activities: "}),s.jsx("button",{onClick:()=>{D(!0),y("Activity")},children:"Create Actvity"})]}),s.jsx("ul",{children:d?.days.map(c=>c.day==g&&c.Activities.map(a=>s.jsxs("li",{className:x.lists,children:[s.jsxs("span",{children:[a.subject,": ",a.title]}),s.jsxs("button",{onClick:()=>{t(a.id,a.typeOfWork)},children:[" ",s.jsx("i",{className:"fa fa-trash"})," "]})]},Math.random()*1)))}),s.jsxs("h2",{className:x.actTitle,children:[s.jsx("span",{children:"Group Activities: "}),s.jsx("button",{onClick:()=>{D(!0),y("Groupings")},children:"Create Groupings"})]}),s.jsx("ul",{children:d?.days.map(c=>c.day==g&&c.Groupings.map(a=>s.jsxs("li",{className:x.lists,children:[s.jsxs("span",{children:[a.subject,": ",a.title]}),s.jsxs("button",{onClick:()=>{t(a.id,a.typeOfWork)},children:[" ",s.jsx("i",{className:"fa fa-trash"})," "]})]},Math.random()*1)))}),s.jsxs("h2",{className:x.actTitle,children:[s.jsx("span",{children:"Assignments: "}),s.jsx("button",{onClick:()=>{D(!0),y("Assignment")},children:"Create Assignment"})]}),s.jsx("ul",{children:d?.days.map(c=>c.day==g&&c.Assignment.map(a=>s.jsxs("li",{className:x.lists,children:[s.jsxs("span",{children:[a.subject,": ",a.title]}),s.jsxs("button",{onClick:()=>{t(a.id,a.typeOfWork)},children:[" ",s.jsx("i",{className:"fa fa-trash"})," "]})]},Math.random()*1)))}),s.jsxs("h2",{className:x.actTitle,children:[s.jsx("span",{children:"Projects: "}),s.jsx("button",{onClick:()=>{D(!0),y("Project")},children:"Create Project"})]}),s.jsx("ul",{children:d?.days.map(c=>c.day==g&&c.Projects.map(a=>s.jsxs("li",{className:x.lists,children:[s.jsxs("span",{children:[a.subject,": ",a.title]}),s.jsxs("button",{onClick:()=>{t(a.id,a.typeOfWork)},children:[" ",s.jsx("i",{className:"fa fa-trash"})," "]})]},Math.random()*1)))}),s.jsxs("h2",{className:x.actTitle,children:[s.jsx("span",{children:"Exams: "}),s.jsx("button",{onClick:()=>{D(!0),y("Exams")},children:"Create Exam"})]}),s.jsx("ul",{children:d?.days.map(c=>c.day==g&&c.Exams.map(a=>s.jsxs("li",{className:x.lists,children:[s.jsxs("span",{children:[a.subject,": ",a.title]}),s.jsxs("button",{onClick:()=>{t(a.id,a.typeOfWork)},children:[" ",s.jsx("i",{className:"fa fa-trash"})," "]})]},Math.random()*1)))})]}),s.jsx("button",{className:x.submit,onClick:n,children:"Submit"})]})]})})]})}function vs(){const{userData:u,pageDetector:e,userObject:f}=o.useContext(L),[m,h]=o.useState(!1),[p,w]=o.useState(!1),[D,E]=o.useState(!1),[y,g]=o.useState(null),[N,B]=o.useState({}),[R,$]=o.useState([]);async function T(d){const l=v(P,"Main_Database","Recaps",`${d}`,`${d}`),t=(await O(l)).data();if(!t)return;const c=t[d];g(c)}return o.useEffect(()=>{async function d(){try{const l=v(P,"Main_Database","Recaps"),t=(await O(l)).data();if(!t)return 0;const r=v(P,"Main_Database","Recaps",`${t[t.length-1].monthAndDay}`,`${t[t.length-1].monthAndDay}`),c=(await O(r)).data();g(c)}catch(l){if(l instanceof z)return}}q.currentUser&&d()},[R]),o.useEffect(()=>{const d=v(P,"Main_Database","Recaps"),l=H(d,n=>{console.log("Render!");const t=n.data()?.ListsOfRecap;if(!t)return;B(t[t.length-1]);async function r(){$(t);const c=v(P,"Main_Database","Recaps",`${t[t.length-1]?.monthAndDay}`,`${t[t.length-1]?.monthAndDay}`),i=(await O(c)).data();if(!i)return;const A=t[t.length-1]?.monthAndDay,b=i[A];g(b)}console.log(t),t.length!=0&&setTimeout(()=>r(),5e3)});return()=>{l()}},[]),o.useEffect(()=>{f?.uid?e(null,2,!1):e(0,null,!0)},[f]),s.jsxs("div",{className:k.recapWrapper,children:[s.jsx(Ws,{weeklyRecaps:y,showAddRecap:p,setShowAddRecap:w,editRecap:D,setEditRecap:E}),s.jsxs("div",{className:k.top,children:[s.jsx("h2",{children:"Weekly Recap"}),s.jsxs("div",{className:k.weekWrapper,children:[s.jsx("button",{onClick:()=>{h(!m)},className:k.weekButton,children:N.monthAndDay?N.monthAndDay:"Nothing"}),s.jsx("ul",{className:m?k.weeksDropdown:k.hideDropDown,children:R?.map(d=>s.jsx("li",{onClick:()=>{B(d),d.monthAndDay&&T(d.monthAndDay)},children:d.monthAndDay},d.monthAndDay))}),u?.user.status=="Owner"&&s.jsx("button",{className:k.createRecap,onClick:()=>w(!0),children:"Create Recap"}),u?.user.status=="Owner"&&s.jsx("button",{className:k.createRecap,onClick:()=>E(!0),children:s.jsx("i",{className:"fa fa-edit"})})]})]}),s.jsx("div",{className:k.daysWrapper,children:y?.days.map(d=>s.jsx(is,{day:d},Math.random()*1))})]})}export{vs as default};
