import{j as e,r as s,c as X,L as Ae,d as me,f as fe,g as ge,s as ye,a as Se,b as oe,F as De,u as ke,e as Pe,h as Me}from"./index-CAtJRsEJ.js";import{s as We}from"./subjects-Qvdm7Wki.js";const qe="_subjectsWrapper_1bbtx_1",ze="_top_1bbtx_31",Ee="_dropDownButton_1bbtx_69",Ie="_showChoices_1bbtx_119",Oe="_hideChoices_1bbtx_127",Te="_choicesBox_1bbtx_135",K={subjectsWrapper:qe,top:ze,dropDownButton:Ee,showChoices:Ie,hideChoices:Oe,choicesBox:Te},Qe="_subjectBox_1xvju_1",Fe="_topWrapper_1xvju_95",Re="_subjectName_1xvju_217",He="_progressWrapper_1xvju_261",Le="_progresses_1xvju_279",Ue="_top_1xvju_95",Ze="_bottom_1xvju_305",Ve="_barWrapper_1xvju_329",Xe="_bar_1xvju_329",Ye="_openSubject_1xvju_357",v={subjectBox:Qe,topWrapper:Fe,subjectName:Re,progressWrapper:He,progresses:Le,top:Ue,bottom:Ze,barWrapper:Ve,bar:Xe,openSubject:Ye},Ge="_subjectSkeletonBox_bnzn5_1",Je={subjectSkeletonBox:Ge};function Ke(){return e.jsx("div",{className:`${Je.subjectSkeletonBox}`})}function es({subData:t}){const{userData:i}=s.useContext(X),{selectedQuarter:c}=s.useContext(je),[a,r]=s.useState(0),[n,S]=s.useState(0),[f,p]=s.useState(0),[h,x]=s.useState(0),[o,_]=s.useState(0),[N,W]=s.useState(0),[w,A]=s.useState(0),[y,T]=s.useState(0),[B,M]=s.useState(0),[C,g]=s.useState(),[Q,z]=s.useState(),[se,F]=s.useState();return s.useEffect(()=>{const H=a>0?n/a*100:0,L=h>0?o/h*100:0,Y=w>0?y/w*100:0;p(H),W(L),M(Y)},[a,n,h,o,w,y]),s.useEffect(()=>{if(c){const H=C?.filter(j=>j.subject==t.subjectNameAbbreviation&&c==j.quarter)?.length,L=Q?.filter(j=>j.subject==t.subjectNameAbbreviation&&c==j.quarter)?.length,Y=se?.filter(j=>j.subject==t.subjectNameAbbreviation&&c==j.quarter)?.length,G=C?.filter(j=>j.status=="completed"&&j.subject==t.subjectNameAbbreviation&&c==j.quarter)?.length,te=Q?.filter(j=>j.status=="completed"&&j.subject==t.subjectNameAbbreviation&&c==j.quarter)?.length,E=se?.filter(j=>j.status=="completed"&&j.subject==t.subjectNameAbbreviation&&c==j.quarter)?.length;console.log(C),r(H||0),S(G||0),x(L||0),_(te||0),A(Y||0),T(E||0)}},[c,C,Q,se]),s.useEffect(()=>{i&&(g(i.activities),z(i.assignments),F(i.petas))},[i]),C?e.jsxs("div",{className:`${v.subjectBox}`,children:[e.jsx("div",{className:v.topWrapper,children:e.jsx("h1",{className:v.subjectName,children:t.subjectNameAbbreviation})}),e.jsxs("div",{className:v.progressWrapper,children:[e.jsxs("div",{className:`${v.actWrapper} ${v.progresses}`,children:[e.jsxs("div",{className:v.top,children:[e.jsx("p",{children:"Activities:"}),e.jsx("p",{className:v.completed,children:a>=n&&a!=0?n+" out of "+a+" is Completed":"No Activity"})]}),e.jsx("div",{className:v.bottom,children:e.jsx("div",{className:v.barWrapper,children:e.jsx("div",{className:v.bar,style:{width:`${a>=n&&a!=0?f:100}%`}})})})]}),e.jsxs("div",{className:`${v.assignWrapper} ${v.progresses}`,children:[e.jsxs("div",{className:v.top,children:[e.jsx("p",{children:"Assignments:"}),e.jsx("p",{className:v.completed,children:h>=o&&h!=0?o+" out of "+h+" is Completed":"No Assignment"})]}),e.jsx("div",{className:v.bottom,children:e.jsx("div",{className:v.barWrapper,children:e.jsx("div",{className:v.bar,style:{width:`${h>=o&&h!=0?N:100}%`}})})})]}),e.jsxs("div",{className:`${v.projWrapper} ${v.progresses}`,children:[e.jsxs("div",{className:v.top,children:[e.jsx("p",{children:"Performance Tasks:"}),e.jsx("p",{className:v.completed,children:w>=y&&w!=0?y+" out of "+w+" is Completed":"No Projects"})]}),e.jsx("div",{className:v.bottom,children:e.jsx("div",{className:v.barWrapper,children:e.jsx("div",{className:v.bar,style:{width:`${w>=y&&w!=0?B:100}%`}})})})]})]}),e.jsx(Ae,{to:"/subjects/"+t.subjectNameAbbreviation,className:v.openSubject,children:"Open Subject"})]}):e.jsx(Ke,{})}const ss="_subConWrapper_1fnzp_1",ts="_topComponent_1fnzp_23",ns="_backButt_1fnzp_1",cs="_right_1fnzp_77",as="_wrapMenusButton_1fnzp_89",is="_wrap_1fnzp_89",os="_hideWrap_1fnzp_99",rs="_selectedChoice_1fnzp_109",ls="_showChoices_1fnzp_149",us="_hideChoices_1fnzp_157",ds="_choicesBox_1fnzp_165",hs="_contentWrapper_1fnzp_223",ms="_subjectActs_1fnzp_267",fs="_content_1fnzp_223",js="_selectAllButton_1fnzp_339",ps="_hideSelectAllButton_1fnzp_355",xs="_transparent_1fnzp_385",b={subConWrapper:ss,topComponent:ts,backButt:ns,right:cs,wrapMenusButton:as,wrap:is,hideWrap:os,selectedChoice:rs,showChoices:ls,hideChoices:us,choicesBox:ds,contentWrapper:hs,subjectActs:ms,content:fs,selectAllButton:js,hideSelectAllButton:ps,transparent:xs},bs="_showActDesc_ozrv6_1",_s="_hideActDesc_ozrv6_29",Ss="_showActDescBox_ozrv6_37",As="_right_ozrv6_73",gs="_stateWrapper_ozrv6_81",vs="_showButton_ozrv6_95",Cs="_choices_ozrv6_103",Ns="_hideChoices_ozrv6_105",ws="_showInfo_ozrv6_115",Bs="_highlight_ozrv6_141",$s="_unhighlight_ozrv6_161",ys="_hideButton_ozrv6_173",q={showActDesc:bs,hideActDesc:_s,showActDescBox:Ss,right:As,stateWrapper:gs,showButton:vs,choices:Cs,hideChoices:Ns,showInfo:ws,highlight:Bs,unhighlight:$s,hideButton:ys},Ds="_infoBox_xvtjn_1",ks="_showInfoBox_xvtjn_21",Ps="_hideInfoBox_xvtjn_31",Ms="_animHideInfo_xvtjn_41",I={infoBox:Ds,showInfoBox:ks,hideInfoBox:Ps,animHideInfo:Ms};function Ws({showInfo:t,setShowInfo:i}){const{actDesc:c}=s.useContext(O);function a(r){const n=r.currentTarget.classList;n.contains(I.hideInfoBox)?(n.replace(`${I.hideInfoBox}`,`${I.animHideInfo}`),setTimeout(()=>{n.replace(`${I.animHideInfo}`,`${I.hideInfoBox}`)},1e3)):(n.add(`${I.animHideInfo}`),setTimeout(()=>{n.replace(`${I.animHideInfo}`,`${I.hideInfoBox}`)},1e3)),i(!1)}return e.jsx(e.Fragment,{children:e.jsx("div",{className:t?`${I.infoBox} ${I.showInfoBox}`:`${I.infoBox} ${I.hideInfoBox}`,onMouseLeave:a,children:e.jsxs("ul",{children:[e.jsxs("li",{children:["Created At: ",c?.createdAt]}),e.jsxs("li",{children:["Deadline: ",c?.dueDate]}),e.jsxs("li",{children:["Semester: ",c?.semester," Sem"]}),e.jsxs("li",{children:["Quarter: ",c?.quarter," Quarter"]}),e.jsxs("li",{children:["Type: ",c?.typeOfWork]})]})})})}function qs(){const{actDesc:t,showActDesc:i,setShowActDesc:c,setActDesc:a,defineTypeOfWork:r}=s.useContext(O),[n,S]=s.useState(!1),[f,p]=s.useState(!1);return e.jsx(e.Fragment,{children:e.jsx("div",{className:i?q.showActDesc:q.hideActDesc,children:e.jsxs("div",{className:i?q.showActDescBox:q.hideActDescBox,children:[e.jsxs("h2",{children:["Description",e.jsxs("div",{className:q.right,children:[e.jsxs("div",{className:q.stateWrapper,children:[e.jsx("button",{className:q.showButton,onClick:()=>{S(!n)},children:e.jsx("i",{className:"fa fa-navicon"})}),e.jsxs("div",{className:n?q.choices:q.hideChoices,children:[e.jsx("button",{className:t?.status=="completed"?q.highlight:q.unhighlight,onClick:()=>{t&&r(!1,"completed")},children:"Finish"}),e.jsx("button",{className:t?.status=="pending"?q.highlight:q.unhighlight,onClick:()=>{t&&r(!1,"pending")},children:"Pending"}),e.jsxs("button",{className:q.showInfo,onClick:()=>{p(!f)},children:[e.jsx("i",{className:"fa fa-list-alt"}),e.jsx(Ws,{showInfo:f,setShowInfo:p})]})]})]}),e.jsx("button",{onClick:()=>{c(!1),a(null)},className:q.hideButton,children:"X"})]})]}),e.jsx("h3",{children:t?.title}),e.jsx("p",{children:t?.description})]})})})}const zs="_addSubjectWrapper_qzsae_1",Es="_addSubjectBox_qzsae_29",Is="_closeButton_qzsae_57",Os="_top_qzsae_123",Ts="_submit_qzsae_189",Z={addSubjectWrapper:zs,addSubjectBox:Es,closeButton:Is,top:Os,submit:Ts},Qs="_subjectBox_1p62z_1",Fs="_choices_1p62z_51",Rs="_show_1p62z_87",Hs="_subject_1p62z_1",Ls="_status_1p62z_99",D={subjectBox:Qs,choices:Fs,show:Rs,subject:Hs,status:Ls};function Us({subject:t,setSubject:i}){const[c]=s.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[a,r]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:D.subName,children:"Subject"}),e.jsxs("button",{className:D.subjectBox,onClick:()=>{r(!a)},children:[t,e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:a?`${D.choices} ${D.show}`:D.choices,children:c.map(n=>e.jsx("li",{className:D.subject,onClick:()=>{i(n)},children:n},Math.random()*1))})]})]})}function Zs(){const{quarterAndSemChoices:t,quarter:i,setQuarter:c,semester:a,setSemester:r}=s.useContext(O),[n,S]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:D.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:D.subjectBox,onClick:()=>{S(!n)},children:[a+" Sem: "+i+" Quarter",e.jsx("i",{className:n?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:n?`${D.choices} ${D.show}`:D.choices,children:t.map(f=>e.jsx("li",{className:D.subject,onClick:()=>{c(f.quarter),r(f.sem)},children:f.sem+" Sem: "+f.quarter+" Quarter"},Math.random()*1))})]})]})}function Vs({status:t,setStatus:i}){const[c]=s.useState(["pending","completed"]),[a,r]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:D.subName,children:"Subject"}),e.jsxs("button",{className:D.subjectBox,onClick:()=>{r(!a)},children:[t,e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:a?`${D.choices} ${D.show}`:D.choices,children:c.map(n=>e.jsx("li",{className:D.status,onClick:()=>{i(n=="pending"?"pending":"completed")},children:n},Math.random()*1))})]})]})}function Xs(){const{typeOfWork:t,showAddPrompt:i,setShowAddPrompt:c,setTypeOfWork:a,params:r,quarter:n,semester:S}=s.useContext(O),{userData:f}=s.useContext(X),[p,h]=s.useState(""),[x,o]=s.useState(""),[_,N]=s.useState(null),[W,w]=s.useState(r?.toUpperCase()),[A,y]=s.useState("pending");async function T(){const B=new Date,M={id:Math.random()*1,title:p,description:x,typeOfWork:t,status:A,createdBy:"Pajarillaga, Bryan",createdAt:`${B?.getFullYear()}-${B?.getMonth()}-${B?.getDate()}`,dueDate:_,subject:W,semester:S,quarter:n,isSelected:!1,timeCreated:Date.now()};try{const C=me(fe,"Main_Database","School_Activities");(await ge(C)).exists()?await oe(C,{[t]:Se(M)}):await ye(C,{[t]:Se(M)}),h(""),o(""),N(null),a(""),c(!1)}catch(C){C instanceof De&&console.log(C)}}if(s.useEffect(()=>{w(r)},[r]),i&&f?.user.status=="Owner")return e.jsx("div",{className:Z.addSubjectWrapper,children:e.jsxs("div",{className:Z.addSubjectBox,children:[e.jsx("button",{className:Z.closeButton,onClick:()=>{a(""),c(!1)},children:"X"}),e.jsxs("h1",{children:["Create ",t]}),e.jsxs("div",{className:Z.top,children:[e.jsx(Us,{subject:W,setSubject:w}),e.jsx(Zs,{}),e.jsx(Vs,{status:A,setStatus:y}),e.jsx("h2",{className:Z.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:B=>{console.log(B.currentTarget.value),N(B.currentTarget.value)}}),e.jsxs("h2",{className:Z.actTitle,children:[t," Title"]}),e.jsx("input",{type:"text",value:p,onChange:B=>{h(B.currentTarget.value)}}),e.jsxs("h2",{className:Z.actDesc,children:[t," Description"]}),e.jsx("textarea",{rows:5,value:x,onChange:B=>{o(B.currentTarget.value)}})]}),e.jsx("button",{className:Z.submit,onClick:T,children:"Submit"})]})})}const Ys="_noActivities_1bced_1",Gs="_showMenu_1bced_11",Js="_hideMenu_1bced_69",Ks="_addActivity_1bced_77",et="_hamWrapper_1bced_143",st="_dropDownMenus_1bced_183",tt="_hideDropDown_1bced_235",ee={noActivities:Ys,showMenu:Gs,hideMenu:Js,addActivity:Ks,hamWrapper:et,dropDownMenus:st,hideDropDown:tt};function nt({task:t}){const{setShowActDesc:i,setCanSelect:c,defineTypeOfWork:a,actDesc:r,menu:n,showMenu:S,menuPos:f,canSelect:p,handleRightClick:h,setActivities:x,setAssignments:o,setProjects:_,handleSelectAll:N,setShowEdit:W}=s.useContext(O),{userData:w}=s.useContext(X);function A(M){if(p)switch(t?.typeOfWork){case"Activity":x(C=>C?C.map(g=>g.id==t?.id?{...g,isSelected:M}:g):[]);break;case"Assignment":o(C=>C?C.map(g=>g.id==t?.id?{...g,isSelected:M}:g):[]);break;case"Project":_(C=>C?C.map(g=>g.id==t?.id?{...g,isSelected:M}:g):[]);break}}function y(M){switch(M){case 1:i(!0);break;case 2:c(!p),p&&(A(!1),N("All",!1));break;case 3:r&&a(!0,"pending");break;case 4:r&&a(!0,"completed");break;case 5:t?.isSelected?A(!1):A(!0);break;case 6:W(!0);break}}function T(){if(p)return e.jsxs("button",{onClick:()=>y(5),children:[e.jsx("i",{className:"fa fa-hand-o-up"}),r?.isSelected?"Unselect":"Select"]})}function B(){if(w?.user.status=="Owner")return e.jsxs("button",{onClick:()=>y(6),children:[e.jsx("i",{className:"	fa fa-edit"}),"Edit"]})}return e.jsxs("div",{ref:n,onClick:M=>h(M,null,!1),className:S?ee.showMenu:ee.hideMenu,style:{left:f.x,top:f.y},children:[e.jsxs("button",{onClick:()=>y(1),children:[e.jsx("i",{className:"fa fa-envelope-open"}),"Open"]}),e.jsx(B,{}),e.jsxs("button",{onClick:()=>y(2),children:[e.jsx("i",{className:p?"fa fa-close":"fa fa-hand-o-up"}),p?"Cancel":"Select"]}),e.jsx(T,{}),e.jsxs("button",{onClick:()=>y(3),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Pending"]}),e.jsxs("button",{onClick:()=>y(4),children:[e.jsx("i",{className:"	fa fa-edit"}),"Mark As Finish"]})]})}function ct(){const{setSortingType:t}=s.useContext(O),[i,c]=s.useState(!1),[a,r]=s.useState([{classname:"fa fa-ellipsis-h",functionName:"Pending"},{classname:"fa fa-check",functionName:"Completed"},{classname:"fa fa-sort-numeric-asc",functionName:"Newest-Oldest"},{classname:"fa fa-sort-numeric-desc",functionName:"Oldest-Newest"},{classname:"fa fa-sort-alpha-asc",functionName:"A-Z"},{classname:"fa fa-sort-alpha-desc",functionName:"Z-A"}]),[n,S]=s.useState({classname:"fa fa-sort-alpha-asc",functionName:"A-Z"});return s.useEffect(()=>{n&&t(n?.functionName)},[n]),e.jsxs("button",{className:ee.hamWrapper,onClick:()=>{c(!i)},children:[e.jsxs("p",{children:["Sort",e.jsx("i",{className:n?.classname}),e.jsx("i",{className:i?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("ul",{className:i?ee.dropDownMenus:ee.hideDropDown,children:a.map(f=>e.jsxs("li",{onClick:()=>{r(p=>p.map(h=>(f.functionName==h.functionName&&S(h),h)))},children:[e.jsx("i",{className:f.classname}),e.jsx("p",{children:f.functionName})]},f.functionName))})]})}function de({type:t}){const{userData:i}=s.useContext(X),{setTypeOfWork:c,setShowAddPrompt:a}=s.useContext(O);if(i?.user?.status=="Owner")return e.jsx("div",{className:ee.addActivity,onClick:()=>{c(t),a(!0)},children:e.jsx("h1",{children:"+"})})}const at="_activity_19w5l_1",it="_pendingActivity_19w5l_3",ot="_selected_19w5l_69",rt="_notSelected_19w5l_71",ue={activity:at,pendingActivity:it,selected:ot,notSelected:rt};function lt({task:t,handleRightClick:i,setActDesc:c}){const{canSelect:a,setActivities:r,setAssignments:n,setProjects:S}=s.useContext(O),f=()=>{if(a)return e.jsx("input",{type:"checkbox",checked:t?.isSelected,onChange:()=>{p(null)},className:t?.isSelected?ue.selected:ue.notSelected})};function p(h){a&&(r(x=>x?x.map(o=>o.id==h?.id?{...o,isSelected:!o.isSelected}:o):[]),n(x=>x?x.map(o=>o.id==h?.id?{...o,isSelected:!o.isSelected}:o):[]),S(x=>x?x.map(o=>o.id==h?.id?{...o,isSelected:!o.isSelected}:o):[]))}return e.jsxs("div",{id:`${t?.id}`,className:t?.status=="completed"?ue.activity:ue.pendingActivity,onContextMenu:h=>i(h,t,!1),onDoubleClick:h=>i(h,t,!0),onClick:()=>{c(t),p(t)},children:[e.jsx("h2",{children:t?.title}),e.jsx("p",{children:t?.description}),e.jsx(f,{})]})}const ut="_activitySkeleton_o3c77_1",dt={activitySkeleton:ut};function ht({count:t}){return e.jsx(e.Fragment,{children:Array.from({length:t}).map((i,c)=>e.jsx("div",{className:dt.activitySkeleton},c))})}function he({typeOfWork:t,sortingType:i}){const{activities:c,assignments:a,projects:r,selectedChoice:n,handleRightClick:S,setActDesc:f}=s.useContext(O),{userData:p}=s.useContext(X),h=t==="Activity"?c||[]:t==="Assignment"?a||[]:r||[],x=s.useMemo(()=>{let o=[...h];return i==="Newest-Oldest"?o.sort((_,N)=>N.timeCreated-_.timeCreated):i==="Oldest-Newest"?o.sort((_,N)=>_.timeCreated-N.timeCreated):i==="A-Z"?o.sort((_,N)=>(_.title||"").localeCompare(N.title||"")):i==="Z-A"?o.sort((_,N)=>(N.title||"").localeCompare(_.title||"")):i==="Pending"?o=o.filter(_=>_.status==="pending"):i==="Completed"&&(o=o.filter(_=>_.status==="completed")),o.filter(_=>_.quarter===n.quarter&&_.semester===n.sem)},[h,i,n]);if(p){if(p&&x.length!=0)return e.jsx(e.Fragment,{children:x.map(o=>e.jsx(lt,{task:o,handleRightClick:S,setActDesc:f},o.id||o.timeCreated))});if(p&&x.length==0)return e.jsxs("h2",{className:ee.noActivities,children:[t==="Activity"&&"There are no Activities!",t==="Assignment"&&"There are no Assignments!",t==="Project"&&"There are no Projects!"]})}else return e.jsx(ht,{count:6})}const mt="_addSubjectWrapper_55ez4_1",ft="_addSubjectBox_55ez4_29",jt="_closeButton_55ez4_53",pt="_top_55ez4_123",xt="_submit_55ez4_189",V={addSubjectWrapper:mt,addSubjectBox:ft,closeButton:jt,top:pt,submit:xt},bt="_subjectBox_1p62z_1",_t="_choices_1p62z_51",St="_show_1p62z_87",At="_subject_1p62z_1",gt="_status_1p62z_99",k={subjectBox:bt,choices:_t,show:St,subject:At,status:gt};function vt({subject:t,setSubject:i}){const[c]=s.useState(["CSS","Philosophy","CPAR","UCSP","PEH3","Entrepreneurship","21stCL","Robotics"]),[a,r]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:k.subName,children:"Subject"}),e.jsxs("button",{className:k.subjectBox,onClick:()=>{r(!a)},children:[t,e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:a?`${k.choices} ${k.show}`:k.choices,children:c.map(n=>e.jsx("li",{className:k.subject,onClick:()=>{i(n)},children:n},Math.random()*1))})]})]})}function Ct(){const{quarterAndSemChoices:t,quarter:i,setQuarter:c,semester:a,setSemester:r}=s.useContext(O),[n,S]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:k.subName,children:"Semester and Quarter"}),e.jsxs("button",{className:k.subjectBox,onClick:()=>{S(!n)},children:[a+" Sem: "+i+" Quarter",e.jsx("i",{className:n?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:n?`${k.choices} ${k.show}`:k.choices,children:t.map(f=>e.jsx("li",{className:k.subject,onClick:()=>{c(f.quarter),r(f.sem)},children:f.sem+" Sem: "+f.quarter+" Quarter"},Math.random()*1))})]})]})}function Nt({status:t,setStatus:i}){const[c]=s.useState(["pending","completed"]),[a,r]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:k.subName,children:"Subject"}),e.jsxs("button",{className:k.subjectBox,onClick:()=>{r(!a)},children:[t,e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("ul",{className:a?`${k.choices} ${k.show}`:k.choices,children:c.map(n=>e.jsx("li",{className:k.status,onClick:()=>{i(n=="pending"?"pending":"completed")},children:n},Math.random()*1))})]})]})}function wt(){const{typeOfWork:t,setTypeOfWork:i,params:c,quarter:a,semester:r,actDesc:n,showEdit:S,setShowEdit:f}=s.useContext(O),{userData:p}=s.useContext(X),[h,x]=s.useState(""),[o,_]=s.useState(""),[N,W]=s.useState(""),[w,A]=s.useState(c?.toUpperCase()),[y,T]=s.useState("pending"),[B,M]=s.useState("");async function C(){const g=new Date,Q={id:B,title:h,description:o,typeOfWork:t,status:y,createdBy:"Pajarillaga, Bryan",createdAt:`${g?.getFullYear()}-${g?.getMonth()}-${g?.getDate()}`,dueDate:N,subject:w,semester:r,quarter:a,isSelected:!1,timeCreated:Date.now()},z=me(fe,"Main_Database","School_Activities"),F=(await ge(z)).data();if(F)switch(t){case"Activity":const L=F.Activity.map(j=>j.id==B?{...Q,id:Math.random()*1}:{...j});await oe(z,{[t]:L});break;case"Assignment":const G=F.Assignment.map(j=>j.id==B?{...Q,id:Math.random()*1}:{...j});await oe(z,{[t]:G});break;case"Projects":const E=F.Project.map(j=>j.id==B?{...Q,id:Math.random()*1}:{...j});await oe(z,{[t]:E});break}f(!1)}if(s.useEffect(()=>{A(c)},[c]),s.useEffect(()=>{n&&(x(n.title),_(n.description),W(n.dueDate),T(n.status),M(n.id))},[n]),S&&p?.user.status=="Owner")return e.jsx("div",{className:V.addSubjectWrapper,children:e.jsxs("div",{className:V.addSubjectBox,children:[e.jsx("button",{className:V.closeButton,onClick:()=>{i(""),f(!1)},children:"X"}),e.jsxs("h1",{children:["Create ",t]}),e.jsxs("div",{className:V.top,children:[e.jsx(vt,{subject:w,setSubject:A}),e.jsx(Ct,{}),e.jsx(Nt,{status:y,setStatus:T}),e.jsx("h2",{className:V.deadline,children:"Deadline: "}),e.jsx("input",{type:"date",onChange:g=>{console.log(g.currentTarget.value),W(g.currentTarget.value)}}),e.jsxs("h2",{className:V.actTitle,children:[t," Title"]}),e.jsx("input",{type:"text",value:h,onChange:g=>{x(g.currentTarget.value)}}),e.jsxs("h2",{className:V.actDescription,children:[t," Description"]}),e.jsx("textarea",{rows:5,value:o,onChange:g=>{_(g.currentTarget.value)}})]}),e.jsx("button",{className:V.submit,onClick:C,children:"Submit"})]})})}const O=s.createContext({});function Bt({params:t,subjects:i}){const{userData:c,userObject:a,setUserData:r}=s.useContext(X),{selectedQuarter:n,selectedSemester:S}=s.useContext(je),f=s.useRef(null),p=ke(),h=Pe(),[x,o]=s.useState(null),[_,N]=s.useState(null),[W,w]=s.useState(null),[A,y]=s.useState(!1),[T,B]=s.useState(!1),[M,C]=s.useState(!1),[g,Q]=s.useState(!1),[z,se]=s.useState(!1),[F,H]=s.useState(!1),[L,Y]=s.useState(!1),[G,te]=s.useState(""),[E,j]=s.useState("2nd"),[ve,pe]=s.useState("1st"),[ie,U]=s.useState(null),[Ce,xe]=s.useState({x:0,y:0}),[be,_e]=s.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]),[ne,ce]=s.useState({quarter:"2nd",sem:"1st"}),[ae,R]=s.useState({Activity:!1,Assignment:!1,Project:!1}),[re,Ne]=s.useState("Pending");function we(u,$,l){l&&u.preventDefault(),B(!0),xe({x:u.clientX,y:u.clientY}),$&&(te($.typeOfWork),U($))}function Be(u,$,l){switch(G){case"Activity":r(d=>d?(d?.activities.map(m=>(x?.map(P=>{m.id==P.id&&l==null?(P.isSelected||ie?.id==P.id)&&(m.status=$,U(u?null:P)):l!=null&&l.id==m.id&&(m={...l},U(u?null:P))}),m)),console.log(d.activities),le(d.activities,"activities"),R(m=>({...m,Activity:!1})),d):null);break;case"Assignment":r(d=>d?(d?.assignments.map(m=>(_?.map(P=>{m.id==P.id&&l==null?(P.isSelected||ie?.id==P.id)&&(m.status=$,U(u?null:P)):l!=null&&l.id==m.id&&(m=l,U(u?null:P))}),m)),le(d.assignments,"petas"),R(m=>({...m,Assignment:!1})),d):null);break;case"Project":r(d=>d?(d?.petas.map(m=>(W?.map(P=>{m.id==P.id&&l==null?(P.isSelected||ie?.id==P.id)&&(m.status=$,U(u?null:P)):l!=null&&l.id==m.id&&(m=l,U(u?null:P))}),m)),le(d.petas,"petas"),R(m=>({...m,Project:!1})),d):null);break}}function J(u,$){if(z)switch(u){case"Activity":o(l=>l?l?.map(d=>({...d,isSelected:d.quarter==E?$:!1})):[]);break;case"Assignment":N(l=>l?l?.map(d=>({...d,isSelected:d.quarter==E?$:!1})):[]);break;case"Project":w(l=>l?l?.map(d=>({...d,isSelected:d.quarter==E?$:!1})):[]);break;case"All":o(l=>l?l?.map(d=>({...d,isSelected:d.quarter==E?$:!1})):[]),N(l=>l?l?.map(d=>({...d,isSelected:d.quarter==E?$:!1})):[]),w(l=>l?l?.map(d=>({...d,isSelected:d.quarter==E?$:!1})):[]);break}}async function le(u,$){try{if(u&&$){const l=me(fe,"McCarthy",`${a?.uid}`);await oe(l,{[$]:u})}}catch{}}s.useEffect(()=>{(c?.activities!=null||c?.assignments!=null||c?.petas!=null)&&(o(c.activities.filter(u=>u.subject===t)),N(c.assignments.filter(u=>u.subject===t)),w(c.petas.filter(u=>u.subject===t)))},[c,t]),s.useEffect(()=>{j(ne.quarter),pe(ne.sem)},[ne]),s.useEffect(()=>{ce({quarter:n,sem:S})},[n,S]),s.useEffect(()=>{if(h.hash&&x!=null){const u=h.hash.substring(1).split("#"),[$,l]=u;if($&&document.getElementById($)?.scrollIntoView({behavior:"smooth"}),l){const d=document.getElementById(l);switch(d?.scrollIntoView({behavior:"smooth"}),$){case"Activity":x?.map(m=>{m.id==l&&ce({quarter:m.quarter,sem:m.semester})});break;case"Assignment":_?.map(m=>{m.id==l&&ce({quarter:m.quarter,sem:m.semester})});break;case"Project":console.log("Project"),W?.map(m=>{m.id==l&&(console.log("Project"),ce({quarter:m.quarter,sem:m.semester}))});break}d&&setTimeout(()=>{p(`/subjects/${t}`)},1e3)}}},[h,x]);const $e={canSelect:z,setCanSelect:se,showMenu:T,setShowMenu:B,showActDesc:M,showAddPrompt:g,setShowAddPrompt:Q,showEdit:L,setShowEdit:Y,typeOfWork:G,setTypeOfWork:te,selectedChoice:ne,setSelectedChoice:ce,setShowActDesc:C,actDesc:ie,setActDesc:U,activities:x,setActivities:o,assignments:_,setAssignments:N,projects:W,setProjects:w,quarterAndSemChoices:be,setQuarterAndSemChoices:_e,quarter:E,setQuarter:j,semester:ve,setSemester:pe,params:t,sortingType:re,setSortingType:Ne,menuPos:Ce,setMenuPos:xe,defineTypeOfWork:Be,handleRightClick:we,handleSelectAll:J,saveToDatabase:le,menu:f};if(t)return e.jsx(O.Provider,{value:$e,children:e.jsxs("div",{className:b.subConWrapper,onClick:()=>{B(!1)},children:[e.jsx(nt,{task:ie}),e.jsx(qs,{}),e.jsx(Xs,{}),e.jsx(wt,{}),e.jsxs("div",{className:b.topComponent,children:[e.jsx(Ae,{to:"/subjects",id:b.backButt,children:"Back"}),e.jsx("h1",{children:i.map(u=>u.subjectNameAbbreviation.toLowerCase()==t.toLowerCase()?u.subjectNameAbbreviation:"")}),e.jsxs("div",{className:b.right,children:[e.jsx("button",{className:b.wrapMenusButton,onClick:()=>{H(!F)},children:e.jsx("i",{className:"fa fa-bars"})}),e.jsxs("div",{className:F?b.wrap:b.hideWrap,children:[e.jsxs("div",{className:b.selectedChoice,children:[e.jsxs("button",{onClick:()=>{y(!A)},children:[ne.sem," Sem: ",ne.quarter," Quarter",e.jsx("i",{className:A?"fa fa-angle-up":"fa fa-angle-down"})]}),e.jsx("div",{className:A?`${b.choicesBox} ${b.showChoices}`:`${b.choicesBox} ${b.hideChoices}`,children:be.map((u,$)=>e.jsxs("button",{onClick:()=>{_e(l=>l.map((d,m)=>($==m&&ce(d),d))),y(!1)},children:[u.sem," Sem: ",u.quarter," Quarter"]},Math.random()*1))})]}),e.jsx(ct,{})]})]})]}),e.jsxs("div",{className:b.contentWrapper,children:[e.jsxs("div",{className:`${b.subjectActs} ${b.subjectActivities}`,id:"Activity",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Activities"})]}),e.jsxs("div",{className:b.content,children:[e.jsx(de,{type:"Activity"},Math.random()*1),e.jsx("button",{className:z?b.selectAllButton:b.hideSelectAllButton,onClick:()=>{ae.Activity?(J("Activity",!1),R(u=>({...u,Activity:!1}))):(J("Activity",!0),R(u=>({...u,Activity:!0})))},children:e.jsx("i",{className:ae.Activity?"fa fa-check":b.transparent})}),e.jsx(he,{typeOfWork:"Activity",sortingType:re})]})]}),e.jsxs("div",{className:`${b.subjectActs} ${b.subjectAssignments}`,id:"Assignment",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Assignment"})]}),e.jsxs("div",{className:b.content,children:[e.jsx(de,{type:"Assignment"},Math.random()*1),e.jsx("button",{className:z?b.selectAllButton:b.hideSelectAllButton,onClick:()=>{ae.Assignment?(J("Assignment",!1),R(u=>({...u,Assignment:!1}))):(J("Assignment",!0),R(u=>({...u,Assignment:!0})))},children:e.jsx("i",{className:ae.Assignment?"fa fa-check":b.transparent})}),e.jsx(he,{typeOfWork:"Assignment",sortingType:re})]})]}),e.jsxs("div",{className:`${b.subjectActs} ${b.subjectProjects}`,id:"Project",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"	fa fa-leanpub"}),e.jsx("span",{children:"Performance Tasks"})]}),e.jsxs("div",{className:b.content,children:[e.jsx(de,{type:"Project"},Math.random()*1),e.jsx("button",{className:z?b.selectAllButton:b.hideSelectAllButton,onClick:()=>{ae.Project?(J("Project",!1),R(u=>({...u,Project:!1}))):(J("Project",!0),R(u=>({...u,Project:!0})))},children:e.jsx("i",{className:ae.Project?"fa fa-check":b.transparent})}),e.jsx(he,{typeOfWork:"Project",sortingType:re})]})]})]})]})})}const je=s.createContext(null);function Dt(){const{pageDetector:t,userObject:i}=s.useContext(X),{subjectName:c}=Me(),[a,r]=s.useState(!1),[n,S]=s.useState("1st"),[f,p]=s.useState("1st"),[h]=s.useState(We),[x,o]=s.useState({quarter:"1st",sem:"1st"}),[_]=s.useState([{quarter:"1st",sem:"1st"},{quarter:"2nd",sem:"1st"},{quarter:"3rd",sem:"2nd"},{quarter:"4th",sem:"2nd"}]),N=s.useRef(null),W=s.useRef(null);s.useEffect(()=>{t(null,1,!1)},[c]),s.useEffect(()=>{i?.uid?t(null,1,!1):t(0,null,!0)},[i]);const w={selectedQuarter:n,setSelectedQuarter:S,selectedSemester:f,setSelectedSemester:p};return e.jsx(je.Provider,{value:w,children:c?e.jsx(Bt,{params:c,subjects:h}):e.jsxs("div",{ref:N,className:`${K.subjectsWrapper}`,children:[e.jsxs("header",{ref:W,id:"SubjectNavigation",className:`${K.top}`,children:[e.jsx("h1",{children:"Subjects"}),e.jsxs("div",{className:K.dropDownButton,onClick:()=>r(A=>!A),children:[x.sem," Semester: ",x.quarter," Quarter",e.jsx("i",{className:a?"fa fa-angle-up":"fa fa-angle-down"}),e.jsx("div",{className:a?`${K.choicesBox} ${K.showChoices}`:`${K.choicesBox} ${K.hideChoices}`,children:_.map(A=>e.jsxs("button",{onClick:()=>{o(A),S(A.quarter),p(A.sem)},children:[A.sem," Sem: ",A.quarter," Quarter"]},`${A.sem}-${A.quarter}`))})]})]}),e.jsx("section",{children:h.map(A=>e.jsx(es,{subData:A},A.subjectTeacher))})]})})}export{je as SubjectsContext,Dt as default};
